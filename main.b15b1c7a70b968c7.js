"use strict";(self.webpackChunkforms=self.webpackChunkforms||[]).push([[179],{2011:(Et,Re,k)=>{k.d(Re,{Dh:()=>de,GT:()=>ve,Ot:()=>ue,cc:()=>Pe,hO:()=>Ne,on:()=>G,pX:()=>Ie,xv:()=>me});var f=k(4650),B=k(127),L=k(5119);Et=k.hmd(Et);const ee=["ngOnDestroy"],Ie=(he,ct,Ze,Fe={})=>new Proxy(he,{get:(xe,be)=>Ze.runOutsideAngular(()=>{var qe;if(he[be])return!(null===(qe=Fe?.spy)||void 0===qe)&&qe.get&&Fe.spy.get(be,he[be]),he[be];if(ee.indexOf(be)>-1)return()=>{};const ne=ct.toPromise().then(ce=>{const we=ce&&ce[be];return"function"==typeof we?we.bind(ce):we&&we.then?we.then(X=>Ze.run(()=>X)):Ze.run(()=>we)});return new Proxy(()=>{},{get:(ce,we)=>ne[we],apply:(ce,we,X)=>ne.then(Q=>{var le;const ae=Q&&Q(...X);return!(null===(le=Fe?.spy)||void 0===le)&&le.apply&&Fe.spy.apply(be,X,ae),ae})})})}),ve=(he,ct)=>{ct.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Fe=>{Object.defineProperty(he.prototype,Fe,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Fe))})})};class ue{constructor(ct){return ct}}const de=new f.OlP("angularfire2.app.options"),me=new f.OlP("angularfire2.app.name");function G(he,ct,Ze){const xe="object"==typeof Ze&&Ze||{};xe.name=xe.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const qe=B.Z.apps.filter(ne=>ne&&ne.name===xe.name)[0]||ct.runOutsideAngular(()=>B.Z.initializeApp(he,xe));try{JSON.stringify(he)!==JSON.stringify(qe.options)&&z("error",`${qe.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(qe)}const z=(he,...ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[he](...ct)},Z={provide:ue,useFactory:G,deps:[de,f.R0b,[new f.FiY,me]]};let Ne=(()=>{class he{constructor(Ze){B.Z.registerVersion("angularfire",L.q4.full,"core"),B.Z.registerVersion("angularfire",L.q4.full,"app-compat"),B.Z.registerVersion("angular",f.q4F.full,Ze.toString())}static initializeApp(Ze,Fe){return{ngModule:he,providers:[{provide:de,useValue:Ze},{provide:me,useValue:Fe}]}}}return he.\u0275fac=function(Ze){return new(Ze||he)(f.LFG(f.Lbi))},he.\u0275mod=f.oAB({type:he}),he.\u0275inj=f.cJS({providers:[Z]}),he})();function Pe(he,ct,Ze,Fe,xe){const[,be,qe]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===he)||[];if(be)return function Te(he,ct){try{return he.toString()===ct.toString()}catch{return he===ct}}(xe,qe)||(Ee("error",`${ct} was already initialized on the ${Ze} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:xe,was:qe})),be;{const ne=Fe();return globalThis.\u0275AngularfireInstanceCache.push([he,ne,xe]),ne}}const Je=!!Et.hot,Ee=(he,...ct)=>{(0,f.X6Q)()&&typeof console<"u"&&console[he](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5119:(Et,Re,k)=>{k.d(Re,{q4:()=>Tn,iC:()=>Td,HU:()=>Ea,vb:()=>Vs,JM:()=>hi,nk:()=>Pr,_J:()=>bd,u3:()=>Ol});var f=k(4650),B=k(5867),L=k(3226),ee=k(5861),ve=(k(2833),k(4859)),ue=k(8766),de=k(2090),me=k(9681);const G="/firebase-messaging-sw.js",z="/firebase-cloud-messaging-push-scope",Z="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Pe="google.c.a.c_id",Te="google.c.a.c_l",Je="google.c.a.ts",Ee="google.c.a.e";var ct=(()=>{return(j=ct||(ct={})).PUSH_RECEIVED="push-received",j.NOTIFICATION_CLICKED="notification-clicked",ct;var j})();function Ze(j){const ie=new Uint8Array(j);return btoa(String.fromCharCode(...ie)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fe(j){const Se=(j+"=".repeat((4-j.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Qe=atob(Se),jt=new Uint8Array(Qe.length);for(let Qt=0;Qt<Qe.length;++Qt)jt[Qt]=Qe.charCodeAt(Qt);return jt}const xe="fcm_token_details_db",qe="fcm_token_object_Store";function ne(j){return ce.apply(this,arguments)}function ce(){return ce=(0,ee.Z)(function*(j){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Qt=>Qt.name).includes(xe))return null;let ie=null;return(yield(0,ue.X3)(xe,5,{upgrade:(Qe=(0,ee.Z)(function*(jt,Qt,Dn,Hn){var ps;if(Qt<2||!jt.objectStoreNames.contains(qe))return;const wa=Hn.objectStore(qe),Bs=yield wa.index("fcmSenderId").get(j);if(yield wa.clear(),Bs)if(2===Qt){const Wn=Bs;if(!Wn.auth||!Wn.p256dh||!Wn.endpoint)return;ie={token:Wn.fcmToken,createTime:null!==(ps=Wn.createTime)&&void 0!==ps?ps:Date.now(),subscriptionOptions:{auth:Wn.auth,p256dh:Wn.p256dh,endpoint:Wn.endpoint,swScope:Wn.swScope,vapidKey:"string"==typeof Wn.vapidKey?Wn.vapidKey:Ze(Wn.vapidKey)}}}else if(3===Qt){const Wn=Bs;ie={token:Wn.fcmToken,createTime:Wn.createTime,subscriptionOptions:{auth:Ze(Wn.auth),p256dh:Ze(Wn.p256dh),endpoint:Wn.endpoint,swScope:Wn.swScope,vapidKey:Ze(Wn.vapidKey)}}}else if(4===Qt){const Wn=Bs;ie={token:Wn.fcmToken,createTime:Wn.createTime,subscriptionOptions:{auth:Ze(Wn.auth),p256dh:Ze(Wn.p256dh),endpoint:Wn.endpoint,swScope:Wn.swScope,vapidKey:Ze(Wn.vapidKey)}}}}),function(Qt,Dn,Hn,ps){return Qe.apply(this,arguments)})})).close(),yield(0,ue.Lj)(xe),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),we(ie)?ie:null;var Qe}),ce.apply(this,arguments)}function we(j){if(!j||!j.subscriptionOptions)return!1;const{subscriptionOptions:ie}=j;return"number"==typeof j.createTime&&j.createTime>0&&"string"==typeof j.token&&j.token.length>0&&"string"==typeof ie.auth&&ie.auth.length>0&&"string"==typeof ie.p256dh&&ie.p256dh.length>0&&"string"==typeof ie.endpoint&&ie.endpoint.length>0&&"string"==typeof ie.swScope&&ie.swScope.length>0&&"string"==typeof ie.vapidKey&&ie.vapidKey.length>0}const le="firebase-messaging-store";let ae=null;function Be(){return ae||(ae=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(j,ie)=>{0===ie&&j.createObjectStore(le)}})),ae}function $e(j){return pt.apply(this,arguments)}function pt(){return(pt=(0,ee.Z)(function*(j){const ie=Rn(j),Qe=yield(yield Be()).transaction(le).objectStore(le).get(ie);if(Qe)return Qe;{const jt=yield ne(j.appConfig.senderId);if(jt)return yield nn(j,jt),jt}})).apply(this,arguments)}function nn(j,ie){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,ee.Z)(function*(j,ie){const Se=Rn(j),jt=(yield Be()).transaction(le,"readwrite");return yield jt.objectStore(le).put(ie,Se),yield jt.done,ie})).apply(this,arguments)}function Ke(j){return cn.apply(this,arguments)}function cn(){return(cn=(0,ee.Z)(function*(j){const ie=Rn(j),Qe=(yield Be()).transaction(le,"readwrite");yield Qe.objectStore(le).delete(ie),yield Qe.done})).apply(this,arguments)}function Rn({appConfig:j}){return j.appId}const Dt=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vt(j,ie){return At.apply(this,arguments)}function At(){return(At=(0,ee.Z)(function*(j,ie){var Se;const Qe=yield Ir(j),jt=Fn(ie),Qt={method:"POST",headers:Qe,body:JSON.stringify(jt)};let Dn;try{Dn=yield(yield fetch(Gn(j.appConfig),Qt)).json()}catch(Hn){throw Dt.create("token-subscribe-failed",{errorInfo:null===(Se=Hn)||void 0===Se?void 0:Se.toString()})}if(Dn.error)throw Dt.create("token-subscribe-failed",{errorInfo:Dn.error.message});if(!Dn.token)throw Dt.create("token-subscribe-no-token");return Dn.token})).apply(this,arguments)}function Zn(j,ie){return wr.apply(this,arguments)}function wr(){return(wr=(0,ee.Z)(function*(j,ie){var Se;const Qe=yield Ir(j),jt=Fn(ie.subscriptionOptions),Qt={method:"PATCH",headers:Qe,body:JSON.stringify(jt)};let Dn;try{Dn=yield(yield fetch(`${Gn(j.appConfig)}/${ie.token}`,Qt)).json()}catch(Hn){throw Dt.create("token-update-failed",{errorInfo:null===(Se=Hn)||void 0===Se?void 0:Se.toString()})}if(Dn.error)throw Dt.create("token-update-failed",{errorInfo:Dn.error.message});if(!Dn.token)throw Dt.create("token-update-no-token");return Dn.token})).apply(this,arguments)}function Nr(j,ie){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,ee.Z)(function*(j,ie){var Se;const jt={method:"DELETE",headers:yield Ir(j)};try{const Dn=yield(yield fetch(`${Gn(j.appConfig)}/${ie}`,jt)).json();if(Dn.error)throw Dt.create("token-unsubscribe-failed",{errorInfo:Dn.error.message})}catch(Qt){throw Dt.create("token-unsubscribe-failed",{errorInfo:null===(Se=Qt)||void 0===Se?void 0:Se.toString()})}})).apply(this,arguments)}function Gn({projectId:j}){return`https://fcmregistrations.googleapis.com/v1/projects/${j}/registrations`}function Ir(j){return xn.apply(this,arguments)}function xn(){return(xn=(0,ee.Z)(function*({appConfig:j,installations:ie}){const Se=yield ie.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":j.apiKey,"x-goog-firebase-installations-auth":`FIS ${Se}`})})).apply(this,arguments)}function Fn({p256dh:j,auth:ie,endpoint:Se,vapidKey:Qe}){const jt={web:{endpoint:Se,auth:ie,p256dh:j}};return Qe!==Z&&(jt.web.applicationPubKey=Qe),jt}const pr=6048e5;function it(j){return K.apply(this,arguments)}function K(){return(K=(0,ee.Z)(function*(j){const ie=yield an(j.swRegistration,j.vapidKey),Se={vapidKey:j.vapidKey,swScope:j.swRegistration.scope,endpoint:ie.endpoint,auth:Ze(ie.getKey("auth")),p256dh:Ze(ie.getKey("p256dh"))},Qe=yield $e(j.firebaseDependencies);if(Qe){if(tt(Qe.subscriptionOptions,Se))return Date.now()>=Qe.createTime+pr?rt(j,{token:Qe.token,createTime:Date.now(),subscriptionOptions:Se}):Qe.token;try{yield Nr(j.firebaseDependencies,Qe.token)}catch(jt){console.warn(jt)}return Zt(j.firebaseDependencies,Se)}return Zt(j.firebaseDependencies,Se)})).apply(this,arguments)}function ke(j){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,ee.Z)(function*(j){const ie=yield $e(j.firebaseDependencies);ie&&(yield Nr(j.firebaseDependencies,ie.token),yield Ke(j.firebaseDependencies));const Se=yield j.swRegistration.pushManager.getSubscription();return!Se||Se.unsubscribe()})).apply(this,arguments)}function rt(j,ie){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,ee.Z)(function*(j,ie){try{const Se=yield Zn(j.firebaseDependencies,ie),Qe=Object.assign(Object.assign({},ie),{token:Se,createTime:Date.now()});return yield nn(j.firebaseDependencies,Qe),Se}catch(Se){throw yield ke(j),Se}})).apply(this,arguments)}function Zt(j,ie){return qt.apply(this,arguments)}function qt(){return(qt=(0,ee.Z)(function*(j,ie){const Qe={token:yield Vt(j,ie),createTime:Date.now(),subscriptionOptions:ie};return yield nn(j,Qe),Qe.token})).apply(this,arguments)}function an(j,ie){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,ee.Z)(function*(j,ie){return(yield j.pushManager.getSubscription())||j.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fe(ie)})})).apply(this,arguments)}function tt(j,ie){return ie.vapidKey===j.vapidKey&&ie.endpoint===j.endpoint&&ie.auth===j.auth&&ie.p256dh===j.p256dh}function nt(j){const ie={from:j.from,collapseKey:j.collapse_key,messageId:j.fcmMessageId};return function mt(j,ie){if(!ie.notification)return;j.notification={};const Se=ie.notification.title;Se&&(j.notification.title=Se);const Qe=ie.notification.body;Qe&&(j.notification.body=Qe);const jt=ie.notification.image;jt&&(j.notification.image=jt);const Qt=ie.notification.icon;Qt&&(j.notification.icon=Qt)}(ie,j),function qn(j,ie){!ie.data||(j.data=ie.data)}(ie,j),function Ln(j,ie){var Se,Qe,jt,Qt,Dn;if(!(ie.fcmOptions||null!==(Se=ie.notification)&&void 0!==Se&&Se.click_action))return;j.fcmOptions={};const Hn=null!==(jt=null===(Qe=ie.fcmOptions)||void 0===Qe?void 0:Qe.link)&&void 0!==jt?jt:null===(Qt=ie.notification)||void 0===Qt?void 0:Qt.click_action;Hn&&(j.fcmOptions.link=Hn);const ps=null===(Dn=ie.fcmOptions)||void 0===Dn?void 0:Dn.analytics_label;ps&&(j.fcmOptions.analyticsLabel=ps)}(ie,j),ie}function Yn(j){return"object"==typeof j&&!!j&&Pe in j}function wt(j,ie){const Se=[];for(let Qe=0;Qe<j.length;Qe++)Se.push(j.charAt(Qe)),Qe<ie.length&&Se.push(ie.charAt(Qe));return Se.join("")}function xt(j){return Dt.create("missing-app-config-values",{valueName:j})}wt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jn{constructor(ie,Se,Qe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const jt=function Cr(j){if(!j||!j.options)throw xt("App Configuration Object");if(!j.name)throw xt("App Name");const ie=["projectId","apiKey","appId","messagingSenderId"],{options:Se}=j;for(const Qe of ie)if(!Se[Qe])throw xt(Qe);return{appName:j.name,projectId:Se.projectId,apiKey:Se.apiKey,appId:Se.appId,senderId:Se.messagingSenderId}}(ie);this.firebaseDependencies={app:ie,appConfig:jt,installations:Se,analyticsProvider:Qe}}_delete(){return Promise.resolve()}}function Bt(j){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,ee.Z)(function*(j){var ie;try{j.swRegistration=yield navigator.serviceWorker.register(G,{scope:z}),j.swRegistration.update().catch(()=>{})}catch(Se){throw Dt.create("failed-service-worker-registration",{browserErrorMessage:null===(ie=Se)||void 0===ie?void 0:ie.message})}})).apply(this,arguments)}function bn(j,ie){return at.apply(this,arguments)}function at(){return(at=(0,ee.Z)(function*(j,ie){if(!ie&&!j.swRegistration&&(yield Bt(j)),ie||!j.swRegistration){if(!(ie instanceof ServiceWorkerRegistration))throw Dt.create("invalid-sw-registration");j.swRegistration=ie}})).apply(this,arguments)}function Ae(j,ie){return dt.apply(this,arguments)}function dt(){return(dt=(0,ee.Z)(function*(j,ie){ie?j.vapidKey=ie:j.vapidKey||(j.vapidKey=Z)})).apply(this,arguments)}function Pt(){return(Pt=(0,ee.Z)(function*(j,ie){if(!navigator)throw Dt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dt.create("permission-blocked");return yield Ae(j,ie?.vapidKey),yield bn(j,ie?.serviceWorkerRegistration),it(j)})).apply(this,arguments)}function un(j,ie,Se){return W.apply(this,arguments)}function W(){return(W=(0,ee.Z)(function*(j,ie,Se){const Qe=$(ie);(yield j.firebaseDependencies.analyticsProvider.get()).logEvent(Qe,{message_id:Se[Pe],message_name:Se[Te],message_time:Se[Je],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $(j){switch(j){case ct.NOTIFICATION_CLICKED:return"notification_open";case ct.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function x(){return(x=(0,ee.Z)(function*(j,ie){const Se=ie.data;if(!Se.isFirebaseMessaging)return;j.onMessageHandler&&Se.messageType===ct.PUSH_RECEIVED&&("function"==typeof j.onMessageHandler?j.onMessageHandler(nt(Se)):j.onMessageHandler.next(nt(Se)));const Qe=Se.data;Yn(Qe)&&"1"===Qe[Ee]&&(yield un(j,Se.messageType,Qe))})).apply(this,arguments)}const S="@firebase/messaging",N="0.10.0",H=j=>{const ie=new Jn(j.getProvider("app").getImmediate(),j.getProvider("installations-internal").getImmediate(),j.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Se=>function P(j,ie){return x.apply(this,arguments)}(ie,Se)),ie},fe=j=>{const ie=j.getProvider("messaging").getImmediate();return{getToken:Qe=>function bt(j,ie){return Pt.apply(this,arguments)}(ie,Qe)}};function ze(){return ge.apply(this,arguments)}function ge(){return(ge=(0,ee.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Le(){(0,me._registerComponent)(new ve.wA("messaging",H,"PUBLIC")),(0,me._registerComponent)(new ve.wA("messaging-internal",fe,"PRIVATE")),(0,me.registerVersion)(S,N),(0,me.registerVersion)(S,N,"esm2017")}();var Os=k(7982),Mt=k(4408),Ce=k(7565);const Ct=new class He extends Ce.v{}(class te extends Mt.o{constructor(ie,Se){super(ie,Se),this.scheduler=ie,this.work=Se}schedule(ie,Se=0){return Se>0?super.schedule(ie,Se):(this.delay=Se,this.state=ie,this.scheduler.flush(this),this)}execute(ie,Se){return Se>0||this.closed?super.execute(ie,Se):this._execute(ie,Se)}requestAsyncId(ie,Se,Qe=0){return null!=Qe&&Qe>0||null==Qe&&this.delay>0?super.requestAsyncId(ie,Se,Qe):(ie.flush(this),0)}});var wn=k(4986),Vn=k(9751),jn=k(8505),Vr=k(9468),Ur=k(5363);const Tn=new f.GfV("7.4.1"),vu="__angularfire_symbol__analyticsIsSupportedValue",ao="__angularfire_symbol__analyticsIsSupported",Fs="__angularfire_symbol__remoteConfigIsSupportedValue",Ls="__angularfire_symbol__remoteConfigIsSupported",Vi="__angularfire_symbol__messagingIsSupportedValue",Qi="__angularfire_symbol__messagingIsSupported";globalThis[ao]||(globalThis[ao]=(0,Os.Gb)().then(j=>globalThis[vu]=j).catch(()=>globalThis[vu]=!1)),globalThis[Qi]||(globalThis[Qi]=ze().then(j=>globalThis[Vi]=j).catch(()=>globalThis[Vi]=!1)),globalThis[Ls]||(globalThis[Ls]=(0,L.Gb)().then(j=>globalThis[Fs]=j).catch(()=>globalThis[Fs]=!1));const Xi=j=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${j} in the constructor, first ensure that ${j} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${j})\`.`,bd={async:()=>globalThis[Ls],sync:()=>{const j=globalThis[Fs];if(void 0===j)throw new Error(Xi("RemoteConfig"));return j}},Pr={async:()=>globalThis[ao],sync:()=>{const j=globalThis[vu];if(void 0===j)throw new Error(Xi("Analytics"));return j}};function hi(j,ie,Se){if(ie){if(1===ie.length)return ie[0];const Qt=ie.filter(Dn=>Dn.app===Se);if(1===Qt.length)return Qt[0]}return Se.container.getProvider(j).getImmediate({optional:!0})}const Vs=(j,ie)=>{const Se=ie?[ie]:(0,B.C6)(),Qe=[];return Se.forEach(jt=>{jt.container.getProvider(j).instances.forEach(Dn=>{Qe.includes(Dn)||Qe.push(Dn)})}),Qe};function Ji(){}class Us{constructor(ie,Se=Ct){this.zone=ie,this.delegate=Se}now(){return this.delegate.now()}schedule(ie,Se,Qe){const jt=this.zone;return this.delegate.schedule(function(Dn){jt.runGuarded(()=>{ie.apply(this,[Dn])})},Se,Qe)}}class Ui{constructor(ie){this.zone=ie,this.task=null}call(ie,Se){const Qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji)),Se.pipe((0,jn.b)({next:Qe,complete:Qe,error:Qe})).subscribe(ie).add(Qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ea=(()=>{class j{constructor(Se){this.ngZone=Se,this.outsideAngular=Se.runOutsideAngular(()=>new Us(Zone.current)),this.insideAngular=Se.run(()=>new Us(Zone.current,wn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return j.\u0275fac=function(Se){return new(Se||j)(f.LFG(f.R0b))},j.\u0275prov=f.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();function uo(){const j=globalThis.\u0275AngularFireScheduler;if(!j)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return j}function Eu(j){return uo().ngZone.runOutsideAngular(()=>j())}function Mi(j){return uo().ngZone.run(()=>j())}function Td(j){return uo(),function es(j){return function(Se){return(Se=Se.lift(new Ui(j.ngZone))).pipe((0,Vr.R)(j.outsideAngular),(0,Ur.Q)(j.insideAngular))}}(uo())(j)}const wp=(j,ie)=>function(){const Qe=arguments;return ie&&setTimeout(()=>{"scheduled"===ie.state&&ie.invoke()},10),Mi(()=>j.apply(void 0,Qe))},Ol=(j,ie)=>function(){let Se;const Qe=arguments;for(let Qt=0;Qt<arguments.length;Qt++)"function"==typeof Qe[Qt]&&(ie&&(Se||(Se=Mi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji)))),Qe[Qt]=wp(Qe[Qt],Se));const jt=Eu(()=>j.apply(this,Qe));if(!ie){if(jt instanceof Vn.y){const Qt=uo();return jt.pipe((0,Vr.R)(Qt.outsideAngular),(0,Ur.Q)(Qt.insideAngular))}return Mi(()=>jt)}return jt instanceof Vn.y?jt.pipe(Td):jt instanceof Promise?Mi(()=>new Promise((Qt,Dn)=>jt.then(Hn=>Mi(()=>Qt(Hn)),Hn=>Mi(()=>Dn(Hn))))):"function"==typeof jt&&Se?function(){return setTimeout(()=>{Se&&"scheduled"===Se.state&&Se.invoke()},10),jt.apply(this,arguments)}:Mi(()=>jt)}},8247:(Et,Re,k)=>{k.d(Re,{$:()=>Du,A:()=>z,B:()=>Pe,G:()=>Ce,H:()=>Vn,J:()=>es,L:()=>W,M:()=>Ip,N:()=>Cp,P:()=>dy,Q:()=>Dd,R:()=>w0,T:()=>Sd,U:()=>jo,V:()=>Ho,W:()=>B_,X:()=>p0,Y:()=>bu,Z:()=>Xt,_:()=>g0,a:()=>po,a0:()=>m0,a1:()=>Br,a2:()=>Vl,a3:()=>Pd,a4:()=>G_,a5:()=>_0,a6:()=>kr,a7:()=>ms,a8:()=>Au,a9:()=>fo,aA:()=>$,aB:()=>is,aC:()=>Hr,aD:()=>Wp,aE:()=>Mt,aI:()=>Sa,aL:()=>Ca,aa:()=>y0,ab:()=>Od,ac:()=>Ld,af:()=>Z_,ag:()=>Y_,ah:()=>Mp,ak:()=>Iu,al:()=>ty,an:()=>ny,ao:()=>zd,ap:()=>we,aq:()=>Me,ar:()=>Le,as:()=>Ze,at:()=>Fa,au:()=>ss,av:()=>_t,aw:()=>Fe,ax:()=>ne,ay:()=>$u,az:()=>Q,b:()=>Go,c:()=>jr,d:()=>Hp,e:()=>jp,f:()=>mr,g:()=>zp,h:()=>_i,i:()=>Ql,j:()=>zs,k:()=>lh,l:()=>ys,m:()=>ws,o:()=>de,r:()=>Ws,s:()=>_s,u:()=>Up});var f=k(5861),B=k(2090),L=k(9681),ee=k(1877),Ie=k(655),ve=k(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function Z(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Je=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),he=new ee.Yd("@firebase/auth");function ct(E,...m){he.logLevel<=ee.in.ERROR&&he.error(`Auth (${L.SDK_VERSION}): ${E}`,...m)}function Ze(E,...m){throw qe(E,...m)}function Fe(E,...m){return qe(E,...m)}function xe(E,m,_){const I=Object.assign(Object.assign({},Te()),{[m]:_});return new B.LL("auth","Firebase",I).create(m,{appName:E.name})}function be(E,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Ze(E,"argument-error"),xe(E,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(E,...m){if("string"!=typeof E){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(_,...I)}return Je.create(E,...m)}function ne(E,m,..._){if(!E)throw qe(m,..._)}function ce(E){const m="INTERNAL ASSERTION FAILED: "+E;throw ct(m),new Error(m)}function we(E,m){E||ce(m)}const X=new Map;function Q(E){we(E instanceof Function,"Expected a class definition");let m=X.get(E);return m?(we(m instanceof E,"Instance stored in cache mismatched with class"),m):(m=new E,X.set(E,m),m)}function Be(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function $e(){return"http:"===pt()||"https:"===pt()}function pt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Ke{constructor(m,_){this.shortDelay=m,this.longDelay=_,we(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function nn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($e()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(E,m){we(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class Rn{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dt=new Ke(3e4,6e4);function Vt(E,m){return E.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:E.tenantId}):m}function At(E,m,_,I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(E,m,_,I,M={}){return wr(E,M,(0,f.Z)(function*(){let F={},oe={};I&&("GET"===m?oe=I:F={body:JSON.stringify(I)});const Oe=(0,B.xO)(Object.assign({key:E.config.apiKey},oe)).slice(1),ft=yield E._getAdditionalHeaders();return ft["Content-Type"]="application/json",E.languageCode&&(ft["X-Firebase-Locale"]=E.languageCode),Rn.fetch()(Ir(E,E.config.apiHost,_,Oe),Object.assign({method:m,headers:ft,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function wr(E,m,_){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(E,m,_){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},pn),m);try{const M=new xn(E),F=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const oe=yield F.json();if("needConfirmation"in oe)throw Fn(E,"account-exists-with-different-credential",oe);if(F.ok&&!("errorMessage"in oe))return oe;{const Oe=F.ok?oe.errorMessage:oe.error.message,[ft,Lt]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ft)throw Fn(E,"credential-already-in-use",oe);if("EMAIL_EXISTS"===ft)throw Fn(E,"email-already-in-use",oe);if("USER_DISABLED"===ft)throw Fn(E,"user-disabled",oe);const hn=I[ft]||ft.toLowerCase().replace(/[_\s]+/g,"-");if(Lt)throw xe(E,hn,Lt);Ze(E,hn)}}catch(M){if(M instanceof B.ZR)throw M;Ze(E,"network-request-failed")}})).apply(this,arguments)}function Mn(E,m,_,I){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,f.Z)(function*(E,m,_,I,M={}){const F=yield At(E,m,_,I,M);return"mfaPendingCredential"in F&&Ze(E,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Ir(E,m,_,I){const M=`${m}${_}?${I}`;return E.config.emulator?cn(E.config,M):`${E.config.apiScheme}://${M}`}class xn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Fe(this.auth,"network-request-failed")),Dt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(E,m,_){const I={appName:E.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const M=Fe(E,m,I);return M.customData._tokenResponse=_,M}function it(){return(it=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function K(E,m){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Xe(E,m){return rt.apply(this,arguments)}function rt(){return(rt=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Rt(E){if(E)try{const m=new Date(Number(E));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function an(){return(an=(0,f.Z)(function*(E,m=!1){const _=(0,B.m9)(E),I=yield _.getIdToken(m),M=tt(I);ne(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,oe=F?.sign_in_provider;return{claims:M,token:I,authTime:Rt(Wt(M.auth_time)),issuedAtTime:Rt(Wt(M.iat)),expirationTime:Rt(Wt(M.exp)),signInProvider:oe||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function Wt(E){return 1e3*Number(E)}function tt(E){var m;const[_,I,M]=E.split(".");if(void 0===_||void 0===I||void 0===M)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,B.tV)(I);return F?JSON.parse(F):(ct("Failed to decode base64 JWT payload"),null)}catch(F){return ct("Caught error parsing JWT payload as JSON",null===(m=F)||void 0===m?void 0:m.toString()),null}}function mt(E,m){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(E,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof B.ZR&&Ln(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function Ln({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Yn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,f.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(_=I)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class wt{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rt(this.lastLoginAt),this.creationTime=Rt(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cr(E){return xt.apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(E){var m;const _=E.auth,I=yield E.getIdToken(),M=yield mt(E,Xe(_,{idToken:I}));ne(M?.users.length,_,"internal-error");const F=M.users[0];E._notifyReloadListener(F);const oe=null!==(m=F.providerUserInfo)&&void 0!==m&&m.length?bn(F.providerUserInfo):[],Oe=Cn(E.providerData,oe),hn=!!E.isAnonymous&&!(E.email&&F.passwordHash||Oe?.length),Pn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Oe,metadata:new wt(F.createdAt,F.lastLoginAt),isAnonymous:hn};Object.assign(E,Pn)})).apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(E){const m=(0,B.m9)(E);yield Cr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Cn(E,m){return[...E.filter(I=>!m.some(M=>M.providerId===I.providerId)),...m]}function bn(E){return E.map(m=>{var{providerId:_}=m,I=(0,Ie._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Ae(){return(Ae=(0,f.Z)(function*(E,m){const _=yield wr(E,{},(0,f.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:F}=E.config,oe=Ir(E,M,"/v1/token",`key=${F}`),Oe=yield E._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",Rn.fetch()(oe,{method:"POST",headers:Oe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ne(m.idToken,"internal-error"),ne(typeof m.idToken<"u","internal-error"),ne(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function nt(E){const m=tt(E);return ne(m,"internal-error"),ne(typeof m.exp<"u","internal-error"),ne(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,f.Z)(function*(){return ne(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,f.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:oe}=yield function at(E,m){return Ae.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(M,F,Number(oe))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:M,expirationTime:F}=_,oe=new dt;return I&&(ne("string"==typeof I,"internal-error",{appName:m}),oe.refreshToken=I),M&&(ne("string"==typeof M,"internal-error",{appName:m}),oe.accessToken=M),F&&(ne("number"==typeof F,"internal-error",{appName:m}),oe.expirationTime=F),oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new dt,this.toJSON())}_performRefresh(){return ce("not implemented")}}function bt(E,m){ne("string"==typeof E||typeof E>"u","internal-error",{appName:m})}class Pt{constructor(m){var{uid:_,auth:I,stsTokenManager:M}=m,F=(0,Ie._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new wt(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,f.Z)(function*(){const I=yield mt(_,_.stsTokenManager.getToken(_.auth,m));return ne(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function qt(E){return an.apply(this,arguments)}(this,m)}reload(){return function Jn(E){return Bt.apply(this,arguments)}(this)}_assign(m){this!==m&&(ne(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Pt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,f.Z)(function*(){let M=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield Cr(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,f.Z)(function*(){const _=yield m.getIdToken();return yield mt(m,function pr(E,m){return it.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,M,F,oe,Oe,ft,Lt,hn;const Pn=null!==(I=_.displayName)&&void 0!==I?I:void 0,ri=null!==(M=_.email)&&void 0!==M?M:void 0,Wi=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,sc=null!==(oe=_.photoURL)&&void 0!==oe?oe:void 0,oc=null!==(Oe=_.tenantId)&&void 0!==Oe?Oe:void 0,ac=null!==(ft=_._redirectEventId)&&void 0!==ft?ft:void 0,ia=null!==(Lt=_.createdAt)&&void 0!==Lt?Lt:void 0,Xp=null!==(hn=_.lastLoginAt)&&void 0!==hn?hn:void 0,{uid:ph,emailVerified:uc,isAnonymous:zu,providerData:Gu,stsTokenManager:Io}=_;ne(ph&&Io,m,"internal-error");const _y=dt.fromJSON(this.name,Io);ne("string"==typeof ph,m,"internal-error"),bt(Pn,m.name),bt(ri,m.name),ne("boolean"==typeof uc,m,"internal-error"),ne("boolean"==typeof zu,m,"internal-error"),bt(Wi,m.name),bt(sc,m.name),bt(oc,m.name),bt(ac,m.name),bt(ia,m.name),bt(Xp,m.name);const rr=new Pt({uid:ph,auth:m,email:ri,emailVerified:uc,displayName:Pn,isAnonymous:zu,photoURL:sc,phoneNumber:Wi,tenantId:oc,stsTokenManager:_y,createdAt:ia,lastLoginAt:Xp});return Gu&&Array.isArray(Gu)&&(rr.providerData=Gu.map(yy=>Object.assign({},yy))),ac&&(rr._redirectEventId=ac),rr}static _fromIdTokenResponse(m,_,I=!1){return(0,f.Z)(function*(){const M=new dt;M.updateFromServerResponse(_);const F=new Pt({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:I});return yield Cr(F),F})()}}const W=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,I){var M=this;return(0,f.Z)(function*(){M.storage[_]=I})()}_get(_){var I=this;return(0,f.Z)(function*(){const M=I.storage[_];return void 0===M?null:M})()}_remove(_){var I=this;return(0,f.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return E.type="NONE",E})();function $(E,m,_){return`firebase:${E}:${m}:${_}`}class P{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:M,name:F}=this.auth;this.fullUserKey=$(this.userKey,M.apiKey,F),this.fullPersistenceKey=$("persistence",M.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,f.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Pt._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,f.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,f.Z)(function*(){if(!_.length)return new P(Q(W),m,I);const M=(yield Promise.all(_.map(function(){var Lt=(0,f.Z)(function*(hn){if(yield hn._isAvailable())return hn});return function(hn){return Lt.apply(this,arguments)}}()))).filter(Lt=>Lt);let F=M[0]||Q(W);const oe=$(I,m.config.apiKey,m.name);let Oe=null;for(const Lt of _)try{const hn=yield Lt._get(oe);if(hn){const Pn=Pt._fromJSON(m,hn);Lt!==F&&(Oe=Pn),F=Lt;break}}catch{}const ft=M.filter(Lt=>Lt._shouldAllowMigration);return F._shouldAllowMigration&&ft.length?(F=ft[0],Oe&&(yield F._set(oe,Oe.toJSON())),yield Promise.all(_.map(function(){var Lt=(0,f.Z)(function*(hn){if(hn!==F)try{yield hn._remove(oe)}catch{}});return function(hn){return Lt.apply(this,arguments)}}())),new P(F,m,I)):new P(F,m,I)})()}}function x(E){const m=E.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(fe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(S(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(ze(m))return"Blackberry";if(ge(m))return"Webos";if(N(m))return"Safari";if((m.includes("chrome/")||H(m))&&!m.includes("edge/"))return"Chrome";if(Le(m))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function S(E=(0,B.z$)()){return/firefox\//i.test(E)}function N(E=(0,B.z$)()){const m=E.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function H(E=(0,B.z$)()){return/crios\//i.test(E)}function fe(E=(0,B.z$)()){return/iemobile/i.test(E)}function Le(E=(0,B.z$)()){return/android/i.test(E)}function ze(E=(0,B.z$)()){return/blackberry/i.test(E)}function ge(E=(0,B.z$)()){return/webos/i.test(E)}function Me(E=(0,B.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function _t(E=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function rn(E=(0,B.z$)()){return Me(E)||Le(E)||ge(E)||ze(E)||/windows phone/i.test(E)||fe(E)}function $n(E,m=[]){let _;switch(E){case"Browser":_=x((0,B.z$)());break;case"Worker":_=`${x((0,B.z$)())}-${E}`;break;default:_=E}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${L.SDK_VERSION}/${I}`}class oo{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=F=>new Promise((oe,Oe)=>{try{oe(m(F))}catch(ft){Oe(ft)}});I.onAbort=_,this.queue.push(I);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,f.Z)(function*(){var I;if(_.auth.currentUser===m)return;const M=[];try{for(const F of _.queue)yield F(m),F.onAbort&&M.push(F.onAbort)}catch(F){M.reverse();for(const oe of M)try{oe()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=F)||void 0===I?void 0:I.message})}})()}}class Os{constructor(m,_,I){this.app=m,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new te(this),this.idTokenSubscription=new te(this),this.beforeStateQueue=new oo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=Q(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var M,F;if(!I._deleted&&(I.persistenceManager=yield P.create(I,m),!I._deleted)){if(null!==(M=I._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,f.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,f.Z)(function*(){var I;const M=yield _.assertedPersistence.getCurrentUser();let F=M,oe=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Oe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,ft=F?._redirectEventId,Lt=yield _.tryRedirectSignIn(m);(!Oe||Oe===ft)&&Lt?.user&&(F=Lt.user,oe=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(oe)try{yield _.beforeStateQueue.runMiddleware(F)}catch(Oe){F=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Oe))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return ne(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var _=this;return(0,f.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,f.Z)(function*(){var I;try{yield Cr(m)}catch(M){if("auth/network-request-failed"!==(null===(I=M)||void 0===I?void 0:I.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Ft(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var m=this;return(0,f.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,f.Z)(function*(){const I=m?(0,B.m9)(m):null;return I&&ne(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,f.Z)(function*(){if(!I._deleted)return m&&ne(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,f.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,f.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(Q(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new B.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,f.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&Q(m)||_._popupRedirectResolver;ne(I,_,"argument-error"),_.redirectPersistenceManager=yield P.create(_,[Q(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,f.Z)(function*(){var I,M;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,f.Z)(function*(){if(m===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,M){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),oe=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(oe,this,"internal-error"),oe.then(()=>F(this.currentUser)),"function"==typeof _?m.addObserver(_,I,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=$n(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,f.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(I["X-Firebase-Client"]=M),I})()}}function Mt(E){return(0,B.m9)(E)}class te{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ce(E,m,_){const I=Mt(E);ne(I._canInitEmulator,I,"emulator-config-failed"),ne(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const M=!!_?.disableWarnings,F=He(m),{host:oe,port:Oe}=function Ct(E){const m=He(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const F=M[1];return{host:F,port:sn(I.substr(F.length+1))}}{const[F,oe]=I.split(":");return{host:F,port:sn(oe)}}}(m);I.config.emulator={url:`${F}//${oe}${null===Oe?"":`:${Oe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:oe,port:Oe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function wn(){function E(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function He(E){const m=E.indexOf(":");return m<0?"":E.substr(0,m+1)}function sn(E){if(!E)return null;const m=Number(E);return isNaN(m)?null:m}class Vn{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return ce("not implemented")}_getIdTokenResponse(m){return ce("not implemented")}_linkToIdToken(m,_){return ce("not implemented")}_getReauthenticationResolver(m){return ce("not implemented")}}function jn(E,m){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:resetPassword",Vt(E,m))})).apply(this,arguments)}function Ur(E,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function vu(E,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:update",Vt(E,m))})).apply(this,arguments)}function Ls(){return(Ls=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signInWithPassword",Vt(E,m))})).apply(this,arguments)}function Vi(E,m){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:sendOobCode",Vt(E,m))})).apply(this,arguments)}function Xi(E,m){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,f.Z)(function*(E,m){return Vi(E,m)})).apply(this,arguments)}function bd(E,m){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,f.Z)(function*(E,m){return Vi(E,m)})).apply(this,arguments)}function hi(E,m){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(E,m){return Vi(E,m)})).apply(this,arguments)}function Ji(E,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,f.Z)(function*(E,m){return Vi(E,m)})).apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signInWithEmailLink",Vt(E,m))})).apply(this,arguments)}function Eu(){return(Eu=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signInWithEmailLink",Vt(E,m))})).apply(this,arguments)}class Mi extends Vn{constructor(m,_,I,M=null){super("password",I),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new Mi(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new Mi(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function Fs(E,m){return Ls.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ui(E,m){return Ea.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Ze(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return Ur(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function uo(E,m){return Eu.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:Ze(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function lo(E,m){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signInWithIdp",Vt(E,m))})).apply(this,arguments)}class es extends Vn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new es(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Ze("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M}=_,F=(0,Ie._T)(_,["providerId","signInMethod"]);if(!I||!M)return null;const oe=new es(I,M);return oe.idToken=F.idToken||void 0,oe.accessToken=F.accessToken||void 0,oe.secret=F.secret,oe.nonce=F.nonce,oe.pendingToken=F.pendingToken||null,oe}_getIdTokenResponse(m){return lo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,lo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,lo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,B.xO)(_)}return m}}function wp(E,m){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:sendVerificationCode",Vt(E,m))})).apply(this,arguments)}function ie(){return(ie=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signInWithPhoneNumber",Vt(E,m))})).apply(this,arguments)}function Qe(){return(Qe=(0,f.Z)(function*(E,m){const _=yield Mn(E,"POST","/v1/accounts:signInWithPhoneNumber",Vt(E,m));if(_.temporaryProof)throw Fn(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const jt={USER_NOT_FOUND:"user-not-found"};function Dn(){return(Dn=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signInWithPhoneNumber",Vt(E,Object.assign(Object.assign({},m),{operation:"REAUTH"})),jt)})).apply(this,arguments)}class Hn extends Vn{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Hn({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Hn({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function j(E,m){return ie.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Se(E,m){return Qe.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Qt(E,m){return Dn.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:F}=m;return I||_||M||F?new Hn({verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:F}):null}}class Bs{constructor(m){var _,I,M,F,oe,Oe;const ft=(0,B.zd)((0,B.pd)(m)),Lt=null!==(_=ft.apiKey)&&void 0!==_?_:null,hn=null!==(I=ft.oobCode)&&void 0!==I?I:null,Pn=function ps(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=ft.mode)&&void 0!==M?M:null);ne(Lt&&hn&&Pn,"argument-error"),this.apiKey=Lt,this.operation=Pn,this.code=hn,this.continueUrl=null!==(F=ft.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(oe=ft.languageCode)&&void 0!==oe?oe:null,this.tenantId=null!==(Oe=ft.tenantId)&&void 0!==Oe?Oe:null}static parseLink(m){const _=function wa(E){const m=(0,B.zd)((0,B.pd)(E)).link,_=m?(0,B.zd)((0,B.pd)(m)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(E)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||_||m||E}(m);try{return new Bs(_)}catch{return null}}}let Ip=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,I){return Mi._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const M=Bs.parseLink(I);return ne(M,"argument-error"),Mi._fromEmailAndCode(_,M.code,M.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class ti{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ia extends ti{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class jo extends Ia{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return ne("providerId"in _&&"signInMethod"in _,"argument-error"),es._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ne(m.idToken||m.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return jo.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return jo.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:F,nonce:oe,providerId:Oe}=m;if(!I&&!M&&!_&&!F||!Oe)return null;try{return new jo(Oe)._credential({idToken:_,accessToken:I,nonce:oe,pendingToken:F})}catch{return null}}}let Cp=(()=>{class E extends Ia{constructor(){super("facebook.com")}static credential(_){return es._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Dd=(()=>{class E extends Ia{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return es._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:M}=_;if(!I&&!M)return null;try{return E.credential(I,M)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Sd=(()=>{class E extends Ia{constructor(){super("github.com")}static credential(_){return es._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ca extends Vn{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return lo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,lo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,lo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M,pendingToken:F}=_;return I&&M&&F&&I===M?new Ca(I,F):null}static _create(m,_){return new Ca(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ho extends ti{constructor(m){ne(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Ho.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Ho.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Ca.fromJSON(m);return ne(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return Ca._create(I,_)}catch{return null}}}let B_=(()=>{class E extends Ia{constructor(){super("twitter.com")}static credential(_,I){return es._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=_;if(!I||!M)return null;try{return E.credential(I,M)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function xi(E,m){return wu.apply(this,arguments)}function wu(){return(wu=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signUp",Vt(E,m))})).apply(this,arguments)}class Bi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,M=!1){return(0,f.Z)(function*(){const F=yield Pt._fromIdTokenResponse(m,I,M),oe=ba(I);return new Bi({user:F,providerId:oe,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,f.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const M=ba(I);return new Bi({user:m,providerId:M,_tokenResponse:I,operationType:_})})()}}function ba(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function p0(E){return $_.apply(this,arguments)}function $_(){return($_=(0,f.Z)(function*(E){var m;const _=Mt(E);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Bi({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield xi(_,{returnSecureToken:!0}),M=yield Bi._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class gr extends B.ZR{constructor(m,_,I,M){var F;super(_.code,_.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,gr.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,M){return new gr(m,_,I,M)}}function Tp(E,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?gr._fromErrorAndOperation(E,F,m,I):F})}function j_(E){return new Set(E.map(({providerId:m})=>m).filter(m=>!!m))}function Iu(E,m){return mi.apply(this,arguments)}function mi(){return(mi=(0,f.Z)(function*(E,m){const _=(0,B.m9)(E);yield co(!0,_,m);const{providerUserInfo:I}=yield K(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=j_(I||[]);return _.providerData=_.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Dp(E,m){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(E,m,_=!1){const I=yield mt(E,m._linkToIdToken(E.auth,yield E.getIdToken()),_);return Bi._forOperation(E,"link",I)})).apply(this,arguments)}function co(E,m,_){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(E,m,_){yield Cr(m);const M=!1===E?"provider-already-linked":"no-such-provider";ne(j_(m.providerData).has(_)===E,m.auth,M)})).apply(this,arguments)}function H_(E,m){return ho.apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(E,m,_=!1){var I;const{auth:M}=E,F="reauthenticate";try{const oe=yield mt(E,Tp(M,F,m,E),_);ne(oe.idToken,M,"internal-error");const Oe=tt(oe.idToken);ne(Oe,M,"internal-error");const{sub:ft}=Oe;return ne(E.uid===ft,M,"user-mismatch"),Bi._forOperation(E,F,oe)}catch(oe){throw"auth/user-not-found"===(null===(I=oe)||void 0===I?void 0:I.code)&&Ze(M,"user-mismatch"),oe}})).apply(this,arguments)}function W_(E,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(E,m,_=!1){const I="signIn",M=yield Tp(E,I,m),F=yield Bi._fromIdTokenResponse(E,I,M);return _||(yield E._updateCurrentUser(F.user)),F})).apply(this,arguments)}function bu(E,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,f.Z)(function*(E,m){return W_(Mt(E),m)})).apply(this,arguments)}function Xt(E,m){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,f.Z)(function*(E,m){const _=(0,B.m9)(E);return yield co(!1,_,m.providerId),Dp(_,m)})).apply(this,arguments)}function g0(E,m){return Md.apply(this,arguments)}function Md(){return(Md=(0,f.Z)(function*(E,m){return H_((0,B.m9)(E),m)})).apply(this,arguments)}function z_(E,m){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,f.Z)(function*(E,m){return Mn(E,"POST","/v1/accounts:signInWithCustomToken",Vt(E,m))})).apply(this,arguments)}function Du(E,m){return xd.apply(this,arguments)}function xd(){return(xd=(0,f.Z)(function*(E,m){const _=Mt(E),I=yield z_(_,{token:m,returnSecureToken:!0}),M=yield Bi._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Fl{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ue._fromServerResponse(m,_):Ze(m,"internal-error")}}class Ue extends Fl{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ue(_)}}function _n(E,m,_){var I;ne((null===(I=_.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),ne(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ne(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(ne(_.android.packageName.length>0,E,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function m0(E,m,_){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E),M={requestType:"PASSWORD_RESET",email:m};_&&_n(I,M,_),yield bd(I,M)})).apply(this,arguments)}function Br(E,m,_){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,f.Z)(function*(E,m,_){yield jn((0,B.m9)(E),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Vl(E,m){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(E,m){yield vu((0,B.m9)(E),{oobCode:m})})).apply(this,arguments)}function Pd(E,m){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,f.Z)(function*(E,m){const _=(0,B.m9)(E),I=yield jn(_,{oobCode:m}),M=I.requestType;switch(ne(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(I.mfaInfo,_,"internal-error");default:ne(I.email,_,"internal-error")}let F=null;return I.mfaInfo&&(F=Fl._fromServerResponse(Mt(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function G_(E,m){return kd.apply(this,arguments)}function kd(){return(kd=(0,f.Z)(function*(E,m){const{data:_}=yield Pd((0,B.m9)(E),m);return _.email})).apply(this,arguments)}function _0(E,m,_){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(E,m,_){const I=Mt(E),M=yield xi(I,{returnSecureToken:!0,email:m,password:_}),F=yield Bi._fromIdTokenResponse(I,"signIn",M);return yield I._updateCurrentUser(F.user),F})).apply(this,arguments)}function kr(E,m,_){return bu((0,B.m9)(E),Ip.credential(m,_))}function ms(E,m,_){return Su.apply(this,arguments)}function Su(){return(Su=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E),M={requestType:"EMAIL_SIGNIN",email:m};ne(_.handleCodeInApp,I,"argument-error"),_&&_n(I,M,_),yield hi(I,M)})).apply(this,arguments)}function Au(E,m){return"EMAIL_SIGNIN"===Bs.parseLink(m)?.operation}function fo(E,m,_){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E),M=Ip.credentialWithLink(m,_||Be());return ne(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),bu(I,M)})).apply(this,arguments)}function q_(E,m){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:createAuthUri",Vt(E,m))})).apply(this,arguments)}function y0(E,m){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,f.Z)(function*(E,m){const I={identifier:m,continueUri:$e()?Be():"http://localhost"},{signinMethods:M}=yield q_((0,B.m9)(E),I);return M||[]})).apply(this,arguments)}function Od(E,m){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,f.Z)(function*(E,m){const _=(0,B.m9)(E),M={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};m&&_n(_.auth,M,m);const{email:F}=yield Xi(_.auth,M);F!==E.email&&(yield E.reload())})).apply(this,arguments)}function Ld(E,m,_){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:m};_&&_n(I.auth,F,_);const{email:oe}=yield Ji(I.auth,F);oe!==E.email&&(yield E.reload())})).apply(this,arguments)}function K_(E,m){return $l.apply(this,arguments)}function $l(){return($l=(0,f.Z)(function*(E,m){return At(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Z_(E,m){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,f.Z)(function*(E,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,B.m9)(E),F={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},oe=yield mt(I,K_(I.auth,F));I.displayName=oe.displayName||null,I.photoURL=oe.photoUrl||null;const Oe=I.providerData.find(({providerId:ft})=>"password"===ft);Oe&&(Oe.displayName=I.displayName,Oe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(oe)})).apply(this,arguments)}function Y_(E,m){return Da((0,B.m9)(E),m,null)}function Mp(E,m){return Da((0,B.m9)(E),null,m)}function Da(E,m,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(E,m,_){const{auth:I}=E,F={idToken:yield E.getIdToken(),returnSecureToken:!0};m&&(F.email=m),_&&(F.password=_);const oe=yield mt(E,Ur(I,F));yield E._updateTokensIfNecessary(oe,!0)})).apply(this,arguments)}class or{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class $s extends or{constructor(m,_,I,M){super(m,_,I),this.username=M}}class ar extends or{constructor(m,_){super(m,"facebook.com",_)}}class X_ extends $s{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class J_ extends or{constructor(m,_){super(m,"google.com",_)}}class ey extends $s{constructor(m,_,I){super(m,"twitter.com",_,I)}}function ty(E){const{user:m,_tokenResponse:_}=E;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Q_(E){var m,_;if(!E)return null;const{providerId:I}=E,M=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},F=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&E?.idToken){const oe=null===(_=null===(m=tt(E.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(oe)return new or(F,"anonymous"!==oe&&"custom"!==oe?oe:null)}if(!I)return null;switch(I){case"facebook.com":return new ar(F,M);case"github.com":return new X_(F,M);case"google.com":return new J_(F,M);case"twitter.com":return new ey(F,M,E.screenName||null);case"custom":case"anonymous":return new or(F,null);default:return new or(F,I,M)}}(_)}class ji{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new ji("enroll",m,_)}static _fromMfaPendingCredential(m){return new ji("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ji._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return ji._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Hd{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Mt(m),M=_.customData._serverResponse,F=(M.mfaInfo||[]).map(Oe=>Fl._fromServerResponse(I,Oe));ne(M.mfaPendingCredential,I,"internal-error");const oe=ji._fromMfaPendingCredential(M.mfaPendingCredential);return new Hd(oe,F,function(){var Oe=(0,f.Z)(function*(ft){const Lt=yield ft._process(I,oe);delete M.mfaInfo,delete M.mfaPendingCredential;const hn=Object.assign(Object.assign({},M),{idToken:Lt.idToken,refreshToken:Lt.refreshToken});switch(_.operationType){case"signIn":const Pn=yield Bi._fromIdTokenResponse(I,_.operationType,hn);return yield I._updateCurrentUser(Pn.user),Pn;case"reauthenticate":return ne(_.user,I,"internal-error"),Bi._forOperation(_.user,_.operationType,hn);default:Ze(I,"internal-error")}});return function(ft){return Oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,f.Z)(function*(){return _.signInResolver(m)})()}}function ny(E,m){var _;const I=(0,B.m9)(E),M=m;return ne(m.customData.operationType,I,"argument-error"),ne(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Hd._fromError(I,M)}function Ru(E,m){return At(E,"POST","/v2/accounts/mfaEnrollment:start",Vt(E,m))}class zl{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Fl._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new zl(m)}getSession(){var m=this;return(0,f.Z)(function*(){return ji._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,f.Z)(function*(){const M=m,F=yield I.getSession(),oe=yield mt(I.user,M._process(I.user.auth,F,_));return yield I.user._updateTokensIfNecessary(oe),I.user.reload()})()}unenroll(m){var _=this;return(0,f.Z)(function*(){var I;const M="string"==typeof m?m:m.uid,F=yield _.user.getIdToken(),oe=yield mt(_.user,function Wl(E,m){return At(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(E,m))}(_.user.auth,{idToken:F,mfaEnrollmentId:M}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Oe})=>Oe!==M),yield _.user._updateTokensIfNecessary(oe);try{yield _.user.reload()}catch(Oe){if("auth/user-token-expired"!==(null===(I=Oe)||void 0===I?void 0:I.code))throw Oe}})()}}const ry=new WeakMap;function zd(E){const m=(0,B.m9)(E);return ry.has(m)||ry.set(m,zl._fromUser(m)),ry.get(m)}const js="__sak";class Gd{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(js,"1"),this.storage.removeItem(js),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Go=(()=>{class E extends Gd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qd(){const E=(0,B.z$)();return N(E)||Me(E)}()&&function qr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=rn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),F=this.localCache[I];M!==F&&_(I,F,M)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Oe,ft,Lt)=>{this.notifyListeners(Oe,Lt)});const M=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(M);if(_.newValue!==Oe)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!I)return}const F=()=>{const Oe=this.storage.getItem(M);!I&&this.localCache[M]===Oe||this.notifyListeners(M,Oe)},oe=this.storage.getItem(M);!function $t(){return(0,B.w1)()&&10===document.documentMode}()||oe===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const F of Array.from(M))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var M=()=>super._set,F=this;return(0,f.Z)(function*(){yield M().call(F,_,I),F.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,M=this;return(0,f.Z)(function*(){const F=yield I().call(M,_);return M.localCache[_]=JSON.stringify(F),F})()}_remove(_){var I=()=>super._remove,M=this;return(0,f.Z)(function*(){yield I().call(M,_),delete M.localCache[_]})()}}return E.type="LOCAL",E})(),po=(()=>{class E extends Gd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return E.type="SESSION",E})();let Gl=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(F=>F.isListeningto(_));if(I)return I;const M=new E(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,f.Z)(function*(){const M=_,{eventId:F,eventType:oe,data:Oe}=M.data,ft=I.handlersMap[oe];if(!ft?.size)return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:oe});const Lt=Array.from(ft).map(function(){var Pn=(0,f.Z)(function*(ri){return ri(M.origin,Oe)});return function(ri){return Pn.apply(this,arguments)}}()),hn=yield function Kd(E){return Promise.all(E.map(function(){var m=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(Lt);M.ports[0].postMessage({status:"done",eventId:F,eventType:oe,response:hn})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Sa(E="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return E+_}class oy{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var M=this;return(0,f.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let oe,Oe;return new Promise((ft,Lt)=>{const hn=Sa("",20);F.port1.start();const Pn=setTimeout(()=>{Lt(new Error("unsupported_event"))},I);Oe={messageChannel:F,onMessage(ri){const Wi=ri;if(Wi.data.eventId===hn)switch(Wi.data.status){case"ack":clearTimeout(Pn),oe=setTimeout(()=>{Lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(oe),ft(Wi.data.response);break;default:clearTimeout(Pn),clearTimeout(oe),Lt(new Error("invalid_response"))}}},M.handlers.add(Oe),F.port1.addEventListener("message",Oe.onMessage),M.target.postMessage({eventType:m,eventId:hn,data:_},[F.port2])}).finally(()=>{Oe&&M.removeMessageHandler(Oe)})})()}}function Or(){return window}function ns(){return typeof Or().WorkerGlobalScope<"u"&&"function"==typeof Or().importScripts}function qo(){return(qo=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Nu="firebaseLocalStorageDb",ku="firebaseLocalStorage",Kl="fbase_key";class Ko{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Zl(E,m){return E.transaction([ku],m?"readwrite":"readonly").objectStore(ku)}function kp(){const E=indexedDB.open(Nu,1);return new Promise((m,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(ku,{keyPath:Kl})}catch(M){_(M)}}),E.addEventListener("success",(0,f.Z)(function*(){const I=E.result;I.objectStoreNames.contains(ku)?m(I):(I.close(),yield function Pp(){const E=indexedDB.deleteDatabase(Nu);return new Ko(E).toPromise()}(),m(yield kp()))}))})}function Ou(E,m,_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(E,m,_){const I=Zl(E,!0).put({[Kl]:m,value:_});return new Ko(I).toPromise()})).apply(this,arguments)}function Yl(){return(Yl=(0,f.Z)(function*(E,m){const _=Zl(E,!1).get(m),I=yield new Ko(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Op(E,m){const _=Zl(E,!0).delete(m);return new Ko(_).toPromise()}const Ql=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield kp()),_.db})()}_withRetries(_){var I=this;return(0,f.Z)(function*(){let M=0;for(;;)try{const F=yield I._openDb();return yield _(F)}catch(F){if(M++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return ns()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=Gl._getInstance(function ql(){return ns()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(M,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(M,F){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var I,M;if(_.activeServiceWorker=yield function ay(){return qo.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new oy(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(I=F[0])||void 0===I?void 0:I.fulfilled)&&(null===(M=F[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Zd(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield kp();return yield Ou(_,js,"1"),yield Op(_,js),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var M=this;return(0,f.Z)(function*(){return M._withPendingWrite((0,f.Z)(function*(){return yield M._withRetries(F=>Ou(F,_,I)),M.localCache[_]=I,M.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,f.Z)(function*(){const M=yield I._withRetries(F=>function uy(E,m){return Yl.apply(this,arguments)}(F,_));return I.localCache[_]=M,M})()}_remove(_){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(M=>Op(M,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const I=yield _._withRetries(oe=>{const Oe=Zl(oe,!1).getAll();return new Ko(Oe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:oe,value:Oe}of I)F.add(oe),JSON.stringify(_.localCache[oe])!==JSON.stringify(Oe)&&(_.notifyListeners(oe,Oe),M.push(oe));for(const oe of Object.keys(_.localCache))_.localCache[oe]&&!F.has(oe)&&(_.notifyListeners(oe,null),M.push(oe));return M})()}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const F of Array.from(M))F(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function ly(E,m){return At(E,"POST","/v2/accounts/mfaSignIn:start",Vt(E,m))}function Zo(){return(Zo=(0,f.Z)(function*(E){return(yield At(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Aa(E){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=m,I.onerror=M=>{const F=Fe("internal-error");F.customData=M,_(F)},I.type="text/javascript",I.charset="UTF-8",function Lu(){var E,m;return null!==(m=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==m?m:document}().appendChild(I)})}function Yd(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Vp=1e12;class v0{constructor(m){this.auth=m,this.counter=Vp,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new Qn(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||Vp;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Vp))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,f.Z)(function*(){var I;return null===(I=_._widgets.get(m||Vp))||void 0===I||I.execute(),""})()}}class Qn{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;ne(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function E0(E){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cy=Yd("rcb"),jD=new Ke(3e4,6e4);class WD{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Or().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return ne(function zD(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Or().grecaptcha):new Promise((I,M)=>{const F=Or().setTimeout(()=>{M(Fe(m,"network-request-failed"))},jD.get());Or()[cy]=()=>{Or().clearTimeout(F),delete Or()[cy];const Oe=Or().grecaptcha;if(!Oe)return void M(Fe(m,"internal-error"));const ft=Oe.render;Oe.render=(Lt,hn)=>{const Pn=ft(Lt,hn);return this.counter++,Pn},this.hostLanguage=_,I(Oe)},Aa(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:cy,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),M(Fe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Or().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class GD{load(m){return(0,f.Z)(function*(){return new v0(m)})()}clearedOneInstance(){}}const Uu="recaptcha",qD={theme:"light",type:"image"};class w0{constructor(m,_=Object.assign({},qD),I){this.parameters=_,this.type=Uu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mt(I),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;ne(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GD:new WD,this.validateStartingState()}verify(){var m=this;return(0,f.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(F=>{const oe=Oe=>{!Oe||(m.tokenChangeListeners.delete(oe),F(Oe))};m.tokenChangeListeners.add(oe),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=Or()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,f.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,f.Z)(function*(){ne($e()&&!ns(),m.auth,"internal-error"),yield function $r(){let E=null;return new Promise(m=>{"complete"!==document.readyState?(E=()=>m(),window.addEventListener("load",E)):m()}).catch(m=>{throw E&&window.removeEventListener("load",E),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Jl(E){return Zo.apply(this,arguments)}(m.auth);ne(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Un{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Hn._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function _s(E,m,_){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(E,m,_){const I=Mt(E),M=yield ni(I,m,(0,B.m9)(_));return new Un(M,F=>bu(I,F))})).apply(this,arguments)}function ys(E,m,_){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E);yield co(!1,I,"phone");const M=yield ni(I.auth,m,(0,B.m9)(_));return new Un(M,F=>Xt(I,F))})).apply(this,arguments)}function Ws(E,m,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E),M=yield ni(I.auth,m,(0,B.m9)(_));return new Un(M,F=>g0(I,F))})).apply(this,arguments)}function ni(E,m,_){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,f.Z)(function*(E,m,_){var I;const M=yield _.verify();try{let F;if(ne("string"==typeof M,E,"argument-error"),ne(_.type===Uu,E,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const oe=F.session;if("phoneNumber"in F)return ne("enroll"===oe.type,E,"internal-error"),(yield Ru(E,{idToken:oe.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ne("signin"===oe.type,E,"internal-error");const Oe=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return ne(Oe,E,"missing-multi-factor-info"),(yield ly(E,{mfaPendingCredential:oe.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:oe}=yield wp(E,{phoneNumber:F.phoneNumber,recaptchaToken:M});return oe}}finally{_._reset()}})).apply(this,arguments)}function Up(E,m){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,f.Z)(function*(E,m){yield Dp((0,B.m9)(E),m)})).apply(this,arguments)}let dy=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Mt(_)}verifyPhoneNumber(_,I){return ni(this.auth,_,(0,B.m9)(I))}static credential(_,I){return Hn._fromVerification(_,I)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:M}=_;return I&&M?Hn._fromTokenResponse(I,M):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Xo(E,m){return m?Q(m):(ne(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Bp extends Vn{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return lo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return lo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return lo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Ma(E){return W_(E.auth,new Bp(E),E.bypassAuthState)}function Tt(E){const{auth:m,user:_}=E;return ne(_,m,"internal-error"),H_(_,new Bp(E),E.bypassAuthState)}function Xd(E){return mo.apply(this,arguments)}function mo(){return(mo=(0,f.Z)(function*(E){const{auth:m,user:_}=E;return ne(_,m,"internal-error"),Dp(_,new Bp(E),E.bypassAuthState)})).apply(this,arguments)}class $p{constructor(m,_,I,M,F=!1){this.auth=m,this.resolver=I,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,f.Z)(function*(I,M){m.pendingPromise={resolve:I,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(I,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:F,tenantId:oe,error:Oe,type:ft}=m;if(Oe)return void _.reject(Oe);const Lt={auth:_.auth,requestUri:I,sessionId:M,tenantId:oe||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(ft)(Lt))}catch(hn){_.reject(hn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ma;case"linkViaPopup":case"linkViaRedirect":return Xd;case"reauthViaPopup":case"reauthViaRedirect":return Tt;default:Ze(this.auth,"internal-error")}}resolve(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jd=new Ke(2e3,1e4);function jr(E,m,_){return eh.apply(this,arguments)}function eh(){return(eh=(0,f.Z)(function*(E,m,_){const I=Mt(E);be(E,m,ti);const M=Xo(I,_);return new Bu(I,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function jp(E,m,_){return th.apply(this,arguments)}function th(){return(th=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E);be(I.auth,m,ti);const M=Xo(I.auth,_);return new Bu(I.auth,"reauthViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}function Hp(E,m,_){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E);be(I.auth,m,ti);const M=Xo(I.auth,_);return new Bu(I.auth,"linkViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}let Bu=(()=>{class E extends $p{constructor(_,I,M,F,oe){super(_,I,F,oe),this.provider=M,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const I=yield _.execute();return ne(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,f.Z)(function*(){we(1===_.filter.length,"Popup operations only handle one event");const I=Sa();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Fe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,M;this.pollId=null!==(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Jd.get())};_()}}return E.currentPopupAction=null,E})();const _o=new Map;class xa extends $p{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,f.Z)(function*(){let I=_o.get(_.auth._key());if(!I){try{const F=(yield function nh(E,m){return yo.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(F)}catch(M){I=()=>Promise.reject(M)}_o.set(_.auth._key(),I)}return _.bypassAuthState||_o.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const M=yield I.auth._redirectUserForId(m.eventId);if(M)return I.user=M,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function yo(){return(yo=(0,f.Z)(function*(E,m){const _=Eo(m),I=vo(E);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(_));return yield I._remove(_),M})).apply(this,arguments)}function ea(E,m){return vs.apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(E,m){return vo(E)._set(Eo(m),"true")})).apply(this,arguments)}function Wp(){_o.clear()}function Hr(E,m){_o.set(E._key(),m)}function vo(E){return Q(E._redirectPersistence)}function Eo(E){return $("pendingRedirect",E.config.apiKey,E.name)}function mr(E,m,_){return function nr(E,m,_){return wo.apply(this,arguments)}(E,m,_)}function wo(){return(wo=(0,f.Z)(function*(E,m,_){const I=Mt(E);be(E,m,ti);const M=Xo(I,_);return yield ea(M,I),M._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function _i(E,m,_){return function Wr(E,m,_){return Es.apply(this,arguments)}(E,m,_)}function Es(){return(Es=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E);be(I.auth,m,ti);const M=Xo(I.auth,_);yield ea(M,I.auth);const F=yield Na(I);return M._openRedirect(I.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function zp(E,m,_){return function hy(E,m,_){return rs.apply(this,arguments)}(E,m,_)}function rs(){return(rs=(0,f.Z)(function*(E,m,_){const I=(0,B.m9)(E);be(I.auth,m,ti);const M=Xo(I.auth,_);yield co(!1,I,m.providerId),yield ea(M,I.auth);const F=yield Na(I);return M._openRedirect(I.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function zs(E,m){return _r.apply(this,arguments)}function _r(){return(_r=(0,f.Z)(function*(E,m){return yield Mt(E)._initializationPromise,is(E,m,!1)})).apply(this,arguments)}function is(E,m){return ta.apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(E,m,_=!1){const I=Mt(E),M=Xo(I,m),oe=yield new xa(I,M,_).execute();return oe&&!_&&(delete oe.user._redirectEventId,yield I._persistUserIfCurrent(oe.user),yield I._setRedirectUser(null,m)),oe})).apply(this,arguments)}function Na(E){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(E){const m=Sa(`${E.uid}:::`);return E._redirectEventId=m,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),m})).apply(this,arguments)}class $u{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function dn(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ec(E);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!ec(m)){const M=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Fe(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rh(m))}saveEventToCache(m){this.cachedEventUids.add(rh(m)),this.lastProcessedEventTime=Date.now()}}function rh(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(m=>m).join("-")}function ec({type:E,error:m}){return"unknown"===E&&"auth/no-auth-event"===m?.code}function ss(E){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(E,m={}){return At(E,"GET","/v1/projects",m)})).apply(this,arguments)}const Oa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I0=/^https?/;function Hi(){return(Hi=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:m}=yield ss(E);for(const _ of m)try{if(fy(_))return}catch{}Ze(E,"unauthorized-domain")})).apply(this,arguments)}function fy(E){const m=Be(),{protocol:_,hostname:I}=new URL(m);if(E.startsWith("chrome-extension://")){const oe=new URL(E);return""===oe.hostname&&""===I?"chrome-extension:"===_&&E.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&oe.hostname===I}if(!I0.test(_))return!1;if(Oa.test(E))return I===E;const M=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const qp=new Ke(3e4,6e4);function ih(){const E=Or().___jsl;if(E?.H)for(const m of Object.keys(E.H))if(E.H[m].r=E.H[m].r||[],E.H[m].L=E.H[m].L||[],E.H[m].r=[...E.H[m].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let ur=null;function Gs(E){return ur=ur||function C0(E){return new Promise((m,_)=>{var I,M,F;function oe(){ih(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ih(),_(Fe(E,"network-request-failed"))},timeout:qp.get()})}if(null!==(M=null===(I=Or().gapi)||void 0===I?void 0:I.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(F=Or().gapi)||void 0===F||!F.load){const Oe=Yd("iframefcb");return Or()[Oe]=()=>{gapi.load?oe():_(Fe(E,"network-request-failed"))},Aa(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(ft=>_(ft))}oe()}}).catch(m=>{throw ur=null,m})}(E),ur}const sh=new Ke(5e3,15e3),oh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},py=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ah(E){const m=E.config;ne(m.authDomain,E,"auth-domain-config-required");const _=m.emulator?cn(m,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:m.apiKey,appName:E.name,v:L.SDK_VERSION},M=py.get(E.config.apiHost);M&&(I.eid=M);const F=E._getFrameworks();return F.length&&(I.fw=F.join(",")),`${_}?${(0,B.xO)(I).slice(1)}`}function tc(){return tc=(0,f.Z)(function*(E){const m=yield Gs(E),_=Or().gapi;return ne(_,E,"internal-error"),m.open({where:document.body,url:ah(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oh,dontclear:!0},I=>new Promise(function(){var M=(0,f.Z)(function*(F,oe){yield I.restyle({setHideOnLeave:!1});const Oe=Fe(E,"network-request-failed"),ft=Or().setTimeout(()=>{oe(Oe)},sh.get());function Lt(){Or().clearTimeout(ft),F(I)}I.ping(Lt).then(Lt,()=>{oe(Oe)})});return function(F,oe){return M.apply(this,arguments)}}()))}),tc.apply(this,arguments)}const ju={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hu{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fa(E,m,_,I,M,F){ne(E.config.authDomain,E,"auth-domain-config-required"),ne(E.config.apiKey,E,"invalid-api-key");const oe={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:I,v:L.SDK_VERSION,eventId:M};if(m instanceof ti){m.setDefaultLanguage(E.languageCode),oe.providerId=m.providerId||"",(0,B.xb)(m.getCustomParameters())||(oe.customParameters=JSON.stringify(m.getCustomParameters()));for(const[ft,Lt]of Object.entries(F||{}))oe[ft]=Lt}if(m instanceof Ia){const ft=m.getScopes().filter(Lt=>""!==Lt);ft.length>0&&(oe.scopes=ft.join(","))}E.tenantId&&(oe.tid=E.tenantId);const Oe=oe;for(const ft of Object.keys(Oe))void 0===Oe[ft]&&delete Oe[ft];return`${function Qp({config:E}){return E.emulator?cn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,B.xO)(Oe).slice(1)}`}const La="webStorageSupport",lh=class Wu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=po,this._completeRedirectFn=is,this._overrideRedirectResult=Hr}_openPopup(m,_,I,M){var F=this;return(0,f.Z)(function*(){var oe;we(null===(oe=F.eventManagers[m._key()])||void 0===oe?void 0:oe.manager,"_initialize() not called before _openPopup()");const Oe=Fa(m,_,I,Be(),M);return function rc(E,m,_,I=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),oe=Math.max((window.screen.availWidth-I)/2,0).toString();let Oe="";const ft=Object.assign(Object.assign({},ju),{width:I.toString(),height:M.toString(),top:F,left:oe}),Lt=(0,B.z$)().toLowerCase();_&&(Oe=H(Lt)?"_blank":_),S(Lt)&&(m=m||"http://localhost",ft.scrollbars="yes");const hn=Object.entries(ft).reduce((ri,[Wi,sc])=>`${ri}${Wi}=${sc},`,"");if(function ln(E=(0,B.z$)()){var m;return Me(E)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Lt)&&"_self"!==Oe)return function Ks(E,m){const _=document.createElement("a");_.href=E,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",Oe),new Hu(null);const Pn=window.open(m||"",Oe,hn);ne(Pn,E,"popup-blocked");try{Pn.focus()}catch{}return new Hu(Pn)}(m,Oe,Sa())})()}_openRedirect(m,_,I,M){var F=this;return(0,f.Z)(function*(){return yield F._originValidation(m),function Np(E){Or().location.href=E}(Fa(m,_,I,Be(),M)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:F}=this.eventManagers[_];return M?Promise.resolve(M):(we(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,f.Z)(function*(){const I=yield function Zp(E){return tc.apply(this,arguments)}(m),M=new $u(m);return I.register("authEvent",F=>(ne(F?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=I,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(La,{type:La},M=>{var F;const oe=null===(F=M?.[0])||void 0===F?void 0:F[La];void 0!==oe&&_(!!oe),Ze(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Gp(E){return Hi.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return rn()||N()||Me()}};class ch extends class ic{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return ce("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new ch(m)}_finalizeEnroll(m,_,I){return function Wd(E,m){return At(E,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(E,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Xl(E,m){return At(E,"POST","/v2/accounts/mfaSignIn:finalize",Vt(E,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ws=(()=>{class E{constructor(){}static assertion(_){return ch._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var Zs="@firebase/auth",dh="0.20.11";class gy{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{var M;m((null===(M=I)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function D0(E){(0,L._registerComponent)(new ve.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:F,authDomain:oe}=I.options;return((Oe,ft)=>{ne(F&&!F.includes(":"),"invalid-api-key",{appName:Oe.name}),ne(!oe?.includes(":"),"argument-error",{appName:Oe.name});const Lt={apiKey:F,authDomain:oe,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$n(E)},hn=new Os(Oe,ft,Lt);return function ae(E,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(Q);m?.errorMap&&E._updateErrorMap(m.errorMap),E._initializeWithPersistence(I,m?.popupRedirectResolver)}(hn,_),hn})(I,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new ve.wA("auth-internal",m=>{const _=Mt(m.getProvider("auth").getImmediate());return new gy(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Zs,dh,function T0(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,L.registerVersion)(Zs,dh,"esm2017")}("Browser")},2090:(Et,Re,k)=>{k.d(Re,{$s:()=>dt,BH:()=>Ft,DV:()=>Fn,G6:()=>be,GJ:()=>Ir,L:()=>de,LL:()=>pn,P0:()=>$e,Pz:()=>nn,Sg:()=>Ke,UG:()=>Te,UI:()=>it,US:()=>ve,Wl:()=>Zn,Yr:()=>xe,ZB:()=>z,ZR:()=>Rn,aH:()=>pt,b$:()=>he,cI:()=>At,dS:()=>xt,eu:()=>ne,g5:()=>L,gK:()=>Ln,gQ:()=>qt,h$:()=>ue,hl:()=>qe,hu:()=>B,jU:()=>Je,m9:()=>un,ne:()=>an,p$:()=>G,pd:()=>Zt,r3:()=>xn,ru:()=>Ee,tV:()=>me,uI:()=>Pe,ug:()=>Jn,vZ:()=>K,w1:()=>Ze,w9:()=>Gn,xO:()=>rt,xb:()=>pr,z$:()=>Ne,zI:()=>ce,zd:()=>Rt});const B=function(W,$){if(!W)throw L($)},L=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ee=function(W){const $=[];let P=0;for(let x=0;x<W.length;x++){let S=W.charCodeAt(x);S<128?$[P++]=S:S<2048?($[P++]=S>>6|192,$[P++]=63&S|128):55296==(64512&S)&&x+1<W.length&&56320==(64512&W.charCodeAt(x+1))?(S=65536+((1023&S)<<10)+(1023&W.charCodeAt(++x)),$[P++]=S>>18|240,$[P++]=S>>12&63|128,$[P++]=S>>6&63|128,$[P++]=63&S|128):($[P++]=S>>12|224,$[P++]=S>>6&63|128,$[P++]=63&S|128)}return $},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,$){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,x=[];for(let S=0;S<W.length;S+=3){const N=W[S],H=S+1<W.length,fe=H?W[S+1]:0,Le=S+2<W.length,ze=Le?W[S+2]:0;let _t=(15&fe)<<2|ze>>6,ln=63&ze;Le||(ln=64,H||(_t=64)),x.push(P[N>>2],P[(3&N)<<4|fe>>4],P[_t],P[ln])}return x.join("")},encodeString(W,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(W):this.encodeByteArray(ee(W),$)},decodeString(W,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(W):function(W){const $=[];let P=0,x=0;for(;P<W.length;){const S=W[P++];if(S<128)$[x++]=String.fromCharCode(S);else if(S>191&&S<224){const N=W[P++];$[x++]=String.fromCharCode((31&S)<<6|63&N)}else if(S>239&&S<365){const Le=((7&S)<<18|(63&W[P++])<<12|(63&W[P++])<<6|63&W[P++])-65536;$[x++]=String.fromCharCode(55296+(Le>>10)),$[x++]=String.fromCharCode(56320+(1023&Le))}else{const N=W[P++],H=W[P++];$[x++]=String.fromCharCode((15&S)<<12|(63&N)<<6|63&H)}}return $.join("")}(this.decodeStringToByteArray(W,$))},decodeStringToByteArray(W,$){this.init_();const P=$?this.charToByteMapWebSafe_:this.charToByteMap_,x=[];for(let S=0;S<W.length;){const N=P[W.charAt(S++)],fe=S<W.length?P[W.charAt(S)]:0;++S;const ze=S<W.length?P[W.charAt(S)]:64;++S;const Me=S<W.length?P[W.charAt(S)]:64;if(++S,null==N||null==fe||null==ze||null==Me)throw Error();x.push(N<<2|fe>>4),64!==ze&&(x.push(fe<<4&240|ze>>2),64!==Me&&x.push(ze<<6&192|Me))}return x},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},ue=function(W){const $=ee(W);return ve.encodeByteArray($,!0)},de=function(W){return ue(W).replace(/\./g,"")},me=function(W){try{return ve.decodeString(W,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function G(W){return z(void 0,W)}function z(W,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return $}for(const P in $)!$.hasOwnProperty(P)||!Z(P)||(W[P]=z(W[P],$[P]));return W}function Z(W){return"__proto__"!==W}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function Te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Je(){return"object"==typeof self&&self.self===self}function Ee(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const W=Ne();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function xe(){return!1}function be(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function ne(){return new Promise((W,$)=>{try{let P=!0;const x="validate-browser-context-for-indexeddb-analytics-module",S=self.indexedDB.open(x);S.onsuccess=()=>{S.result.close(),P||self.indexedDB.deleteDatabase(x),W(!0)},S.onupgradeneeded=()=>{P=!1},S.onerror=()=>{var N;$((null===(N=S.error)||void 0===N?void 0:N.message)||"")}}catch(P){$(P)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ae=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=W&&me(W[1]);return $&&JSON.parse($)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},$e=W=>{const $=(W=>{var $,P;return null===(P=null===($=ae())||void 0===$?void 0:$.emulatorHosts)||void 0===P?void 0:P[W]})(W);if(!$)return;const P=$.lastIndexOf(":");if(P<=0||P+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const x=parseInt($.substring(P+1),10);return"["===$[0]?[$.substring(1,P-1),x]:[$.substring(0,P),x]},pt=()=>{var W;return null===(W=ae())||void 0===W?void 0:W.config},nn=W=>{var $;return null===($=ae())||void 0===$?void 0:$[`_${W}`]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,P)=>{this.resolve=$,this.reject=P})}wrapCallback($){return(P,x)=>{P?this.reject(P):this.resolve(x),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(P):$(P,x))}}}function Ke(W,$){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const x=$||"demo-project",S=W.iat||0,N=W.sub||W.user_id;if(!N)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const H=Object.assign({iss:`https://securetoken.google.com/${x}`,aud:x,iat:S,exp:S+3600,auth_time:S,sub:N,user_id:N,firebase:{sign_in_provider:"custom",identities:{}}},W);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(H)),""].join(".")}class Rn extends Error{constructor($,P,x){super(P),this.code=$,this.customData=x,this.name="FirebaseError",Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pn.prototype.create)}}class pn{constructor($,P,x){this.service=$,this.serviceName=P,this.errors=x}create($,...P){const x=P[0]||{},S=`${this.service}/${$}`,N=this.errors[$],H=N?function Dt(W,$){return W.replace(Vt,(P,x)=>{const S=$[x];return null!=S?String(S):`<${x}?>`})}(N,x):"Error";return new Rn(S,`${this.serviceName}: ${H} (${S}).`,x)}}const Vt=/\{\$([^}]+)}/g;function At(W){return JSON.parse(W)}function Zn(W){return JSON.stringify(W)}const wr=function(W){let $={},P={},x={},S="";try{const N=W.split(".");$=At(me(N[0])||""),P=At(me(N[1])||""),S=N[2],x=P.d||{},delete P.d}catch{}return{header:$,claims:P,data:x,signature:S}},Gn=function(W){const P=wr(W).claims;return!!P&&"object"==typeof P&&P.hasOwnProperty("iat")},Ir=function(W){const $=wr(W).claims;return"object"==typeof $&&!0===$.admin};function xn(W,$){return Object.prototype.hasOwnProperty.call(W,$)}function Fn(W,$){if(Object.prototype.hasOwnProperty.call(W,$))return W[$]}function pr(W){for(const $ in W)if(Object.prototype.hasOwnProperty.call(W,$))return!1;return!0}function it(W,$,P){const x={};for(const S in W)Object.prototype.hasOwnProperty.call(W,S)&&(x[S]=$.call(P,W[S],S,W));return x}function K(W,$){if(W===$)return!0;const P=Object.keys(W),x=Object.keys($);for(const S of P){if(!x.includes(S))return!1;const N=W[S],H=$[S];if(ke(N)&&ke(H)){if(!K(N,H))return!1}else if(N!==H)return!1}for(const S of x)if(!P.includes(S))return!1;return!0}function ke(W){return null!==W&&"object"==typeof W}function rt(W){const $=[];for(const[P,x]of Object.entries(W))Array.isArray(x)?x.forEach(S=>{$.push(encodeURIComponent(P)+"="+encodeURIComponent(S))}):$.push(encodeURIComponent(P)+"="+encodeURIComponent(x));return $.length?"&"+$.join("&"):""}function Rt(W){const $={};return W.replace(/^\?/,"").split("&").forEach(x=>{if(x){const[S,N]=x.split("=");$[decodeURIComponent(S)]=decodeURIComponent(N)}}),$}function Zt(W){const $=W.indexOf("?");if(!$)return"";const P=W.indexOf("#",$);return W.substring($,P>0?P:void 0)}class qt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,P){P||(P=0);const x=this.W_;if("string"==typeof $)for(let Me=0;Me<16;Me++)x[Me]=$.charCodeAt(P)<<24|$.charCodeAt(P+1)<<16|$.charCodeAt(P+2)<<8|$.charCodeAt(P+3),P+=4;else for(let Me=0;Me<16;Me++)x[Me]=$[P]<<24|$[P+1]<<16|$[P+2]<<8|$[P+3],P+=4;for(let Me=16;Me<80;Me++){const _t=x[Me-3]^x[Me-8]^x[Me-14]^x[Me-16];x[Me]=4294967295&(_t<<1|_t>>>31)}let ze,ge,S=this.chain_[0],N=this.chain_[1],H=this.chain_[2],fe=this.chain_[3],Le=this.chain_[4];for(let Me=0;Me<80;Me++){Me<40?Me<20?(ze=fe^N&(H^fe),ge=1518500249):(ze=N^H^fe,ge=1859775393):Me<60?(ze=N&H|fe&(N|H),ge=2400959708):(ze=N^H^fe,ge=3395469782);const _t=(S<<5|S>>>27)+ze+Le+ge+x[Me]&4294967295;Le=fe,fe=H,H=4294967295&(N<<30|N>>>2),N=S,S=_t}this.chain_[0]=this.chain_[0]+S&4294967295,this.chain_[1]=this.chain_[1]+N&4294967295,this.chain_[2]=this.chain_[2]+H&4294967295,this.chain_[3]=this.chain_[3]+fe&4294967295,this.chain_[4]=this.chain_[4]+Le&4294967295}update($,P){if(null==$)return;void 0===P&&(P=$.length);const x=P-this.blockSize;let S=0;const N=this.buf_;let H=this.inbuf_;for(;S<P;){if(0===H)for(;S<=x;)this.compress_($,S),S+=this.blockSize;if("string"==typeof $){for(;S<P;)if(N[H]=$.charCodeAt(S),++H,++S,H===this.blockSize){this.compress_(N),H=0;break}}else for(;S<P;)if(N[H]=$[S],++H,++S,H===this.blockSize){this.compress_(N),H=0;break}}this.inbuf_=H,this.total_+=P}digest(){const $=[];let P=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let S=this.blockSize-1;S>=56;S--)this.buf_[S]=255&P,P/=256;this.compress_(this.buf_);let x=0;for(let S=0;S<5;S++)for(let N=24;N>=0;N-=8)$[x]=this.chain_[S]>>N&255,++x;return $}}function an(W,$){const P=new Wt(W,$);return P.subscribe.bind(P)}class Wt{constructor($,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{$(this)}).catch(x=>{this.error(x)})}next($){this.forEachObserver(P=>{P.next($)})}error($){this.forEachObserver(P=>{P.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,P,x){let S;if(void 0===$&&void 0===P&&void 0===x)throw new Error("Missing Observer.");S=function nt(W,$){if("object"!=typeof W||null===W)return!1;for(const P of $)if(P in W&&"function"==typeof W[P])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:P,complete:x},void 0===S.next&&(S.next=mt),void 0===S.error&&(S.error=mt),void 0===S.complete&&(S.complete=mt);const N=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?S.error(this.finalError):S.complete()}catch{}}),this.observers.push(S),N}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,$)}sendOne($,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{P(this.observers[$])}catch(x){typeof console<"u"&&console.error&&console.error(x)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mt(){}function Ln(W,$){return`${W} failed: ${$} argument `}const xt=function(W){const $=[];let P=0;for(let x=0;x<W.length;x++){let S=W.charCodeAt(x);if(S>=55296&&S<=56319){const N=S-55296;x++,B(x<W.length,"Surrogate pair missing trail surrogate."),S=65536+(N<<10)+(W.charCodeAt(x)-56320)}S<128?$[P++]=S:S<2048?($[P++]=S>>6|192,$[P++]=63&S|128):S<65536?($[P++]=S>>12|224,$[P++]=S>>6&63|128,$[P++]=63&S|128):($[P++]=S>>18|240,$[P++]=S>>12&63|128,$[P++]=S>>6&63|128,$[P++]=63&S|128)}return $},Jn=function(W){let $=0;for(let P=0;P<W.length;P++){const x=W.charCodeAt(P);x<128?$++:x<2048?$+=2:x>=55296&&x<=56319?($+=4,P++):$+=3}return $};function dt(W,$=1e3,P=2){const x=$*Math.pow(P,W),S=Math.round(.5*x*(Math.random()-.5)*2);return Math.min(144e5,x+S)}function un(W){return W&&W._delegate?W._delegate:W}},5223:(Et,Re,k)=>{var f=k(4650);let B=null;function L(){return B}const ue=new f.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function me(){return(0,f.LFG)(z)}()},providedIn:"platform"}),n})();const G=new f.OlP("Location Initialized");let z=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ne(){return new z((0,f.LFG)(ue))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(ct)},providedIn:"root"}),n})();const he=new f.OlP("appBaseHref");let ct=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Je(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Je(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ze=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Te(qe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Pe,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function xe(){return new Fe((0,f.LFG)(Ee))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}let Dr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Pr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Pr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class bd{constructor(){this.$implicit=null,this.ngIf=null}}function Pr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let U_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Ho="browser";function ba(n){return"server"===n}let Tp=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new j_((0,f.LFG)(ue),window)}),n})();class j_{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function mi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Iu(this.window.history)||Iu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Iu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Da extends class Mp extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ie(n){B||(B=n)}(new Da)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Q_(){return Wo=Wo||document.querySelector("base"),Wo?Wo.getAttribute("href"):null}();return null==t?null:function $s(n){or=or||document.createElement("a"),or.setAttribute("href",n);const e=or.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ur(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let or,Wo=null;const ar=new f.OlP("TRANSITION_ID"),J_=[{provide:f.ip1,useFactory:function X_(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[ar,ue,f.zs3],multi:!0}];let ty=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Bd=new f.OlP("EventManagerPlugins");let jl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Bd),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Mu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Hl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),zo=(()=>{class n extends Hl{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach($d),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($d))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function $d(n){L().remove(n)}const jd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rp=/%COMP%/g;function Wl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Wl(n,i,t):(i=i.replace(Rp,n),t.push(i))}return t}function zl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let zd=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new js(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new xp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new iy(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Wl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jl),f.LFG(zo),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class js{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(jd[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=jd[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=jd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zl(r)):this.eventManager.addEventListener(e,t,zl(r))}}function xu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class xp extends js{constructor(e,t,r,i){super(e),this.component=r;const a=Wl(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ru(n){return"_ngcontent-%COMP%".replace(Rp,n)}(i+"-"+r.id),this.hostAttr=function Wd(n){return"_nghost-%COMP%".replace(Rp,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class iy extends js{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Wl(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Go=(()=>{class n extends Mu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const sy=["alt","control","meta","shift"],po={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kd={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Gl=(()=>{class n extends Mu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),sy.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),l+=y+".")}),l+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=l,p}static matchEventFullKeyCode(t,r){let i=po[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),sy.forEach(l=>{l!==i&&(0,Kd[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Nu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Ho},{provide:f.g9A,useValue:function ay(){Da.makeCurrent()},multi:!0},{provide:ue,useFactory:function Zd(){return(0,f.RDi)(document),document},deps:[]}]),Pu=new f.OlP(""),ku=[{provide:f.rWj,useClass:class ey{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(p){l=l||p,a--,0==a&&r(l)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Kl=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function qo(){return new f.qLn},deps:[]},{provide:Bd,useClass:Go,multi:!0,deps:[ue,f.R0b,f.Lbi]},{provide:Bd,useClass:Gl,multi:!0,deps:[ue]},{provide:zd,useClass:zd,deps:[jl,zo,f.AFp]},{provide:f.FYo,useExisting:zd},{provide:Hl,useExisting:zo},{provide:zo,useClass:zo,deps:[ue]},{provide:jl,useClass:jl,deps:[Bd,f.R0b]},{provide:class Cu{},useClass:ty,deps:[]},[]];let Ko=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:ar,useExisting:f.AFp},J_]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pu,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Kl,...ku],imports:[U_,f.hGG]}),n})(),Hs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ou(){return new Hs((0,f.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Un=k(8996),_s=k(7669);function vt(...n){const e=(0,_s.yG)(n);return(0,Un.D)(n,e)}var ys=k(7579);class er extends ys.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Yo=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ni=k(9751);const{isArray:Qo}=Array,{getPrototypeOf:Up,prototype:Qd,keys:dy}=Object;function Xo(n){if(1===n.length){const e=n[0];if(Qo(e))return{args:e,keys:null};if(function Bp(n){return n&&"object"==typeof n&&Up(n)===Qd}(e)){const t=dy(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ma=k(4671),Tt=k(4004);const{isArray:Xd}=Array;function $p(n){return(0,Tt.U)(e=>function mo(n,e){return Xd(e)?n(...e):n(e)}(n,e))}function Jd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var jr=k(5403),eh=k(9672);function jp(...n){const e=(0,_s.yG)(n),t=(0,_s.jO)(n),{args:r,keys:i}=Xo(n);if(0===r.length)return(0,Un.D)([],e);const a=new ni.y(function th(n,e,t=Ma.y){return r=>{Hp(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let p=0;p<i;p++)Hp(e,()=>{const y=(0,Un.D)(n[p],e);let C=!1;y.subscribe((0,jr.x)(r,T=>{a[p]=T,C||(C=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Jd(i,l):Ma.y));return t?a.pipe($p(t)):a}function Hp(n,e,t){n?(0,eh.f)(t,n,e):e()}var Jo=k(8189);function Ra(...n){return function Bu(){return(0,Jo.J)(1)}()((0,Un.D)(n,(0,_s.yG)(n)))}var _o=k(8421);function xa(n){return new ni.y(e=>{(0,_o.Xf)(n()).subscribe(e)})}var nh=k(9635),yo=k(576);function ea(n,e){const t=(0,yo.m)(n)?n:()=>n,r=i=>i.error(t());return new ni.y(e?i=>e.schedule(r,0,i):r)}var vs=k(515),Wp=k(727),Hr=k(4482);function vo(){return(0,Hr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Eo extends ni.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Wp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Wp.w0.EMPTY)}return e}refCount(){return vo()(this)}}function mr(n,e){return(0,Hr.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,jr.x)(r,p=>{i?.unsubscribe();let y=0;const C=a++;(0,_o.Xf)(n(p,C)).subscribe(i=(0,jr.x)(r,T=>r.next(e?e(p,T,C,y++):T),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function nr(n){return n<=0?()=>vs.E:(0,Hr.e)((e,t)=>{let r=0;e.subscribe((0,jr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wo(...n){const e=(0,_s.yG)(n);return(0,Hr.e)((t,r)=>{(e?Ra(n,t,e):Ra(n,t)).subscribe(r)})}function _i(n,e){return(0,Hr.e)((t,r)=>{let i=0;t.subscribe((0,jr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Wr=k(5577);function Es(n){return(0,Hr.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function zp(n=hy){return(0,Hr.e)((e,t)=>{let r=!1;e.subscribe((0,jr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hy(){return new Yo}function rs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?_i((i,a)=>n(i,a,r)):Ma.y,nr(1),t?Es(e):zp(()=>new Yo))}function zs(n,e){return(0,yo.m)(e)?(0,Wr.z)(n,e,1):(0,Wr.z)(n,1)}var _r=k(8505);function is(n){return(0,Hr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,jr.x)(t,void 0,void 0,l=>{a=(0,_o.Xf)(n(l,is(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ta(n,e,t,r,i){return(a,l)=>{let d=t,p=e,y=0;a.subscribe((0,jr.x)(l,C=>{const T=y++;p=d?n(p,C,T):(d=!0,C),r&&l.next(p)},i&&(()=>{d&&l.next(p),l.complete()})))}}function Na(n,e){return(0,Hr.e)(ta(n,e,arguments.length>=2,!0))}function Pa(n){return n<=0?()=>vs.E:(0,Hr.e)((e,t)=>{let r=[];e.subscribe((0,jr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ka(n,e){const t=arguments.length>=2;return r=>r.pipe(n?_i((i,a)=>n(i,a,r)):Ma.y,Pa(1),t?Es(e):zp(()=>new Yo))}function ec(n){return(0,Hr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const dn="primary",ss=Symbol("RouteTitle");class na{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Oa(n){return new na(n)}function I0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!fy(n[i],e[i]))return!1;return!0}function fy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function qp(n){return Array.prototype.concat.apply([],n)}function ih(n){return n.length>0?n[n.length-1]:null}function ur(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gs(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Un.D)(Promise.resolve(n)):vt(n)}const b0={exact:function Zp(n,e,t){if(!Ks(n.segments,e.segments)||!qs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Zp(n.children[r],e.children[r],t))return!1;return!0},subset:ju},oh={exact:function ah(n,e){return Hi(n,e)},subset:function tc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fy(n[t],e[t]))},ignored:()=>!0};function py(n,e,t){return b0[t.paths](n.root,e.root,t.matrixParams)&&oh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ju(n,e,t){return nc(n,e,e.segments,t)}function nc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ks(i,t)||e.hasChildren()||!qs(i,t,r))}if(n.segments.length===t.length){if(!Ks(n.segments,t)||!qs(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ju(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ks(n.segments,i)&&qs(n.segments,i,r)&&n.children[dn])&&nc(n.children[dn],e,a,r)}}function qs(n,e,t){return e.every((r,i)=>oh[t](n[i].parameters,r.parameters))}class ra{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oa(this.queryParams)),this._queryParamMap}toString(){return Qp.serialize(this)}}class gn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ur(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return La(this)}}class Hu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Oa(this.parameters)),this._parameterMap}toString(){return gy(this)}}function Ks(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let uh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Fa},providedIn:"root"}),n})();class Fa{parse(e){const t=new m(e);return new ra(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Wu(e.root,!0)}`,r=function D0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ic(t)}=${ic(i)}`).join("&"):`${ic(t)}=${ic(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ch(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qp=new Fa;function La(n){return n.segments.map(e=>gy(e)).join("/")}function Wu(n,e){if(!n.hasChildren())return La(n);if(e){const t=n.children[dn]?Wu(n.children[dn],!1):"",r=[];return ur(n.children,(i,a)=>{a!==dn&&r.push(`${a}:${Wu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Yp(n,e){let t=[];return ur(n.children,(r,i)=>{i===dn&&(t=t.concat(e(r,i)))}),ur(n.children,(r,i)=>{i!==dn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===dn?[Wu(n.children[dn],!1)]:[`${i}:${Wu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dn]?`${La(n)}/${t[0]}`:`${La(n)}/(${t.join("//")})`}}function lh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ic(n){return lh(n).replace(/%3B/gi,";")}function ws(n){return lh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zs(n){return decodeURIComponent(n)}function dh(n){return Zs(n.replace(/\+/g,"%20"))}function gy(n){return`${ws(n.path)}${function T0(n){return Object.keys(n).map(e=>`;${ws(e)}=${ws(n[e])}`).join("")}(n.parameters)}`}const S0=/^[^\/()?;=#]+/;function hh(n){const e=n.match(S0);return e?e[0]:""}const fh=/^[^=?&#]+/,A0=/^[^&#]+/;class m{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gn([],{}):new gn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dn]=new gn(e,t)),r}parseSegment(){const e=hh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new Hu(Zs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=hh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=hh(this.remaining);i&&(r=i,this.capture(r))}e[Zs(t)]=Zs(r)}parseQueryParam(e){const t=function my(n){const e=n.match(fh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function E(n){const e=n.match(A0);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=dh(t),a=dh(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=dn);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[dn]:new gn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function _(n){return n.segments.length>0?new gn([],{[dn]:n}):n}function I(n){const e={};for(const r of Object.keys(n.children)){const a=I(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function M(n){if(1===n.numberOfChildren&&n.children[dn]){const e=n.children[dn];return new gn(n.segments.concat(e.segments),e.children)}return n}(new gn(n.segments,e))}function F(n){return n instanceof ra}function hn(n,e,t,r,i){if(0===t.length)return Wi(e.root,e.root,e.root,r,i);const a=function ac(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new oc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return ur(a.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new oc(t,e,r)}(t);return a.toRoot()?Wi(e.root,e.root,new gn([],{}),r,i):function l(p){const y=function ph(n,e,t,r){if(n.isAbsolute)return new ia(e.root,!0,0);if(-1===r)return new ia(t,t===e.root,0);return function uc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new ia(r,!1,i-a)}(t,r+(Pn(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,p),C=y.processChildren?Io(y.segmentGroup,y.index,a.commands):Gu(y.segmentGroup,y.index,a.commands);return Wi(e.root,y.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Pn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ri(n){return"object"==typeof n&&null!=n&&n.outlets}function Wi(n,e,t,r,i){let l,a={};r&&ur(r,(p,y)=>{a[y]=Array.isArray(p)?p.map(C=>`${C}`):`${p}`}),l=n===e?t:sc(n,e,t);const d=_(I(l));return new ra(d,a,i)}function sc(n,e,t){const r={};return ur(n.children,(i,a)=>{r[a]=i===e?t:sc(i,e,t)}),new gn(n.segments,r)}class oc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pn(r[0]))throw new f.vHH(4003,!1);const i=r.find(ri);if(i&&i!==ih(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ia{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Gu(n,e,t){if(n||(n=new gn([],{})),0===n.segments.length&&n.hasChildren())return Io(n,e,t);const r=function _y(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(ri(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Jp(p,y,l))return a;r+=2}else{if(!Jp(p,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new gn(n.segments.slice(0,r.pathIndex),{});return a.children[dn]=new gn(n.segments.slice(r.pathIndex),n.children),Io(a,0,i)}return r.match&&0===i.length?new gn(n.segments,{}):r.match&&!n.hasChildren()?rr(n,e,t):r.match?Io(n,0,i):rr(n,e,t)}function Io(n,e,t){if(0===t.length)return new gn(n.segments,{});{const r=function zu(n){return ri(n[0])?n[0].outlets:{[dn]:n}}(t),i={};return ur(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Gu(n.children[l],e,a))}),ur(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new gn(n.segments,i)}}function rr(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(ri(a)){const p=yy(a.outlets);return new gn(r,p)}if(0===i&&Pn(t[0])){r.push(new Hu(n.segments[e].path,M0(t[0]))),i++;continue}const l=ri(a)?a.outlets[dn]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&Pn(d)?(r.push(new Hu(l,M0(d))),i+=2):(r.push(new Hu(l,{})),i++)}return new gn(r,{})}function yy(n){const e={};return ur(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rr(new gn([],{}),0,t))}),e}function M0(n){const e={};return ur(n,(t,r)=>e[r]=`${t}`),e}function Jp(n,e,t){return n==t.path&&Hi(e,t.parameters)}class Co{constructor(e,t){this.id=e,this.url=t}}class vy extends Co{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qu extends Co{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class eg extends Co{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class R0 extends Co{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class KD extends Co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hk extends Co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fk extends Co{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gh extends Co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ey extends Co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class N0{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class P0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wy{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class O0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=mh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=mh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ng(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ng(e,this._root).map(t=>t.value)}}function mh(n,e){if(n===e.value)return e;for(const t of e.children){const r=mh(n,t);if(r)return r}return null}function ng(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ng(n,t);if(r.length)return r.unshift(e),r}return[]}class bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Is(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class F0 extends O0{constructor(e,t){super(e),this.snapshot=t,_h(this,e)}toString(){return this.snapshot.toString()}}function rg(n,e){const t=function ig(n,e){const l=new To([],{},{},"",{},dn,e,null,n.root,-1,{});return new Iy("",new bo(l,[]))}(n,e),r=new er([new Hu("",{})]),i=new er({}),a=new er({}),l=new er({}),d=new er(""),p=new Ku(r,i,l,d,a,dn,e,t.root);return p.snapshot=t.root,new F0(new bo(p,[]),t)}class Ku{constructor(e,t,r,i,a,l,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,Tt.U)(y=>y[ss]))??vt(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>Oa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>Oa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function og(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class To{constructor(e,t,r,i,a,l,d,p,y,C,T,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.[ss],this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._correctedLastPathIndex=A??C,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Oa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Oa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Iy extends O0{constructor(e,t){super(t),this.url=e,_h(this,t)}toString(){return L0(this._root)}}function _h(n,e){e.value._routerState=n,e.children.forEach(t=>_h(n,t))}function L0(n){const e=n.children.length>0?` { ${n.children.map(L0).join(", ")} } `:"";return`${n.value}${e}`}function Cy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hi(e.params,t.params)||n.params.next(t.params),function Gp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ag(n,e){const t=Hi(n.params,e.params)&&function rc(n,e){return Ks(n,e)&&n.every((t,r)=>Hi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ag(n.parent,e.parent))}function yh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function YD(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return yh(n,r,i);return yh(n,r)})}(n,e,t);return new bo(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>yh(n,d)),l}}const r=function QD(n){return new Ku(new er(n.url),new er(n.params),new er(n.queryParams),new er(n.fragment),new er(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>yh(n,a));return new bo(r,i)}}const by="ngNavigationCancelingError";function ug(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=F(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=V0(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function V0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[by]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ty(n){return U0(n)&&F(n.url)}function U0(n){return n&&n[by]}class B0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new lg,this.attachRef=null}}let lg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new B0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cg=!1;let Zu=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||dn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,cg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,cg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,cg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,cg);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new XD(t,d,i.injector);if(r&&function cc(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(l,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(lg),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class XD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ku?this.route:e===lg?this.childContexts:this.parent.get(e,t)}}let Va=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Zu],encapsulation:2}),n})();function $0(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ay(n){const e=n.children&&n.children.map(Ay),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dn&&(t.component=Va),t}function Cs(n){return n.outlet||dn}function dg(n,e){const t=n.filter(r=>Cs(r)===e);return t.push(...n.filter(r=>Cs(r)!==e)),t}function hg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class My{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Is(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),ur(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Is(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Is(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Is(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new wy(a.value.snapshot))}),e.children.length&&this.forwardEvent(new ZD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Cy(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Cy(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=hg(i.snapshot),p=d?.get(f._Vd)??null;l.attachRef=null,l.route=i,l.resolver=p,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class eS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ry{constructor(e,t){this.component=e,this.route=t}}function yk(n,e,t){const r=n._root;return Eh(r,e?e._root:null,t,[r.value])}function vh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Eh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Is(e);return n.children.forEach(l=>{(function W0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const p=function xy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ks(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ks(n.url,e.url)||!Hi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ag(n,e)||!Hi(n.queryParams,e.queryParams);default:return!ag(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new eS(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Eh(n,e,a.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Ry(d.outlet.component,l))}else l&&dc(e,d,i),i.canActivateChecks.push(new eS(r)),Eh(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),ur(a,(l,d)=>dc(l,t.getContext(d),i)),i}function dc(n,e,t){const r=Is(n),i=n.value;ur(r,(a,l)=>{dc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Ry(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function hc(n){return"function"==typeof n}function fg(n){return n instanceof Yo||"EmptyError"===n?.name}const pg=Symbol("INITIAL_VALUE");function fc(){return mr(n=>jp(n.map(e=>e.pipe(nr(1),wo(pg)))).pipe((0,Tt.U)(e=>{for(const t of e)if(!0!==t){if(t===pg)return pg;if(!1===t||t instanceof ra)return t}return!0}),_i(e=>e!==pg),nr(1)))}function yi(n){return(0,nh.z)((0,_r.b)(e=>{if(F(e))throw ug(0,e)}),(0,Tt.U)(e=>!0===e))}const gg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mg(n,e,t,r,i){const a=ii(n,e,t);return a.matched?function Oy(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?vt(i.map(l=>{const d=vh(l,n);return Gs(function nS(n){return n&&hc(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(fc(),yi()):vt(!0)}(r=$0(e,r),e,t).pipe((0,Tt.U)(l=>!0===l?a:{...gg})):vt(a)}function ii(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||I0)(t,n,e);if(!i)return{...gg};const a={};ur(i.posParams,(d,p)=>{a[p]=d.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ua(n,e,t,r,i="corrected"){if(t.length>0&&function hS(n,e,t){return t.some(r=>_g(n,e,r)&&Cs(r)!==dn)}(n,t,r)){const l=new gn(e,function dS(n,e,t,r){const i={};i[dn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Cs(a)!==dn){const l=new gn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Cs(a)]=l}return i}(n,e,r,new gn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function K0(n,e,t){return t.some(r=>_g(n,e,r))}(n,t,r)){const l=new gn(n.segments,function q0(n,e,t,r,i,a){const l={};for(const d of r)if(_g(n,t,d)&&!i[Cs(d)]){const p=new gn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Cs(d)]=p}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new gn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function _g(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Fy(n,e,t,r){return!!(Cs(n)===r||r!==dn&&_g(e,t,n))&&("**"===n.path||ii(e,n,t).matched)}function Z0(n,e,t){return 0===e.length&&!n.children[t]}const Ih=!1;class yg{constructor(e){this.segmentGroup=e||null}}class Y0{constructor(e){this.urlTree=e}}function Ch(n){return ea(new yg(n))}function Q0(n){return ea(new Y0(n))}class pS{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Ua(this.urlTree.root,[],[],this.config).segmentGroup,t=new gn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,dn).pipe((0,Tt.U)(a=>this.createUrlTree(I(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(is(a=>{if(a instanceof Y0)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof yg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,dn).pipe((0,Tt.U)(i=>this.createUrlTree(I(i),e.queryParams,e.fragment))).pipe(is(i=>{throw i instanceof yg?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,Ih)}createUrlTree(e,t,r){const i=_(e);return new ra(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(a=>new gn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Un.D)(i).pipe(zs(a=>{const l=r.children[a],d=dg(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,Tt.U)(p=>({segment:p,outlet:a})))}),Na((a,l)=>(a[l.outlet]=l.segment,a),{}),ka())}expandSegment(e,t,r,i,a,l){return(0,Un.D)(r).pipe(zs(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(is(y=>{if(y instanceof yg)return vt(null);throw y}))),rs(d=>!!d),is((d,p)=>{if(fg(d))return Z0(t,i,a)?vt(new gn([],{})):Ch(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return Fy(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Ch(t):Ch(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Q0(a):this.lineralizeSegments(r,a).pipe((0,Wr.z)(l=>{const d=new gn(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:C}=ii(t,i,a);if(!d)return Ch(t);const T=this.applyRedirectCommands(p,i.redirectTo,C);return i.redirectTo.startsWith("/")?Q0(T):this.lineralizeSegments(i,T).pipe((0,Wr.z)(A=>this.expandSegment(e,t,r,A.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=$0(r,e),r.loadChildren?(r._loadedRoutes?vt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Tt.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new gn(i,{})))):vt(new gn(i,{}))):mg(t,r,i,e).pipe(mr(({matched:l,consumedSegments:d,remainingSegments:p})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Wr.z)(C=>{const T=C.injector??e,A=C.routes,{segmentGroup:O,slicedSegments:U}=Ua(t,d,p,A),Y=new gn(O.segments,O.children);if(0===U.length&&Y.hasChildren())return this.expandChildren(T,A,Y).pipe((0,Tt.U)(lt=>new gn(d,lt)));if(0===A.length&&0===U.length)return vt(new gn(d,{}));const re=Cs(r)===a;return this.expandSegment(T,Y,A,U,re?dn:a,!0).pipe((0,Tt.U)(et=>new gn(d.concat(et.segments),et.children)))})):Ch(t)))}getChildConfig(e,t,r){return t.children?vt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?vt({routes:t._loadedRoutes,injector:t._loadedInjector}):function cS(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?vt(!0):vt(i.map(l=>{const d=vh(l,n);return Gs(function Ny(n){return n&&hc(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(fc(),yi())}(e,t,r).pipe((0,Wr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,_r.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function pc(n){return ea(V0(Ih,3))}())):vt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return vt(r);if(i.numberOfChildren>1||!i.children[dn])return ea(new f.vHH(4e3,Ih));i=i.children[dn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ra(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ur(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return ur(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,r,i)}),new gn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,Ih);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class wk{}class Do{constructor(e,t,r,i,a,l,d,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const e=Ua(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,dn).pipe((0,Tt.U)(t=>{if(null===t)return null;const r=new To([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new bo(r,t),a=new Iy(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=sg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Un.D)(Object.keys(r.children)).pipe(zs(i=>{const a=r.children[i],l=dg(t,i);return this.processSegmentGroup(e,l,a,i)}),Na((i,a)=>i&&a?(i.push(...a),i):null),function $u(n,e=!1){return(0,Hr.e)((t,r)=>{let i=0;t.subscribe((0,jr.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),Es(null),ka(),(0,Tt.U)(i=>{if(null===i)return null;const a=By(i);return function Vy(n){n.sort((e,t)=>e.value.outlet===dn?-1:t.value.outlet===dn?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Un.D)(t).pipe(zs(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),rs(l=>!!l),is(l=>{if(fg(l))return Z0(r,i,a)?vt([]):vt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Fy(t,r,i,a))return vt(null);let l;if("**"===t.path){const d=i.length>0?ih(i).parameters:{},p=J0(r)+i.length;l=vt({snapshot:new To(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vg(t),Cs(t),t.component??t._loadedComponent??null,t,gc(r),p,Eg(t),p),consumedSegments:[],remainingSegments:[]})}else l=mg(r,t,i,e).pipe((0,Tt.U)(({matched:d,consumedSegments:p,remainingSegments:y,parameters:C})=>{if(!d)return null;const T=J0(r)+p.length;return{snapshot:new To(p,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vg(t),Cs(t),t.component??t._loadedComponent??null,t,gc(r),T,Eg(t),T),consumedSegments:p,remainingSegments:y}}));return l.pipe(mr(d=>{if(null===d)return vt(null);const{snapshot:p,consumedSegments:y,remainingSegments:C}=d;e=t._injector??e;const T=t._loadedInjector??e,A=function Uy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:O,slicedSegments:U}=Ua(r,y,C,A.filter(re=>void 0===re.redirectTo),this.relativeLinkResolution);if(0===U.length&&O.hasChildren())return this.processChildren(T,A,O).pipe((0,Tt.U)(re=>null===re?null:[new bo(p,re)]));if(0===A.length&&0===U.length)return vt([new bo(p,[])]);const Y=Cs(t)===a;return this.processSegment(T,A,O,U,Y?dn:a).pipe((0,Tt.U)(re=>null===re?null:[new bo(p,re)]))}))}}function mS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function By(n){const e=[],t=new Set;for(const r of n){if(!mS(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=By(r.children);e.push(new bo(r.value,i))}return e.filter(r=>!t.has(r))}function gc(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function J0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function vg(n){return n.data||{}}function Eg(n){return n.resolve||{}}function wg(n){return"string"==typeof n.title||null===n.title}function jy(n){return mr(e=>{const t=n(e);return t?(0,Un.D)(t).pipe((0,Tt.U)(()=>e)):vt(e)})}let rI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===dn);return r}getResolvedTitleForRoute(t){return t.data[ss]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(iI)},providedIn:"root"}),n})(),iI=(()=>{class n extends rI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Hs))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class vS{}class sI extends class ES{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bh=new f.OlP("",{providedIn:"root",factory:()=>({})}),Wy=new f.OlP("ROUTES");let zy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return vt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gs(t.loadComponent()).pipe((0,_r.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),ec(()=>{this.componentLoaders.delete(t)})),i=new Eo(r,()=>new ys.x).pipe(vo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return vt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Tt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,C=!1;Array.isArray(d)?y=d:(p=d.create(t).injector,y=qp(p.get(Wy,[],f.XFs.Self|f.XFs.Optional)));return{routes:y.map(Ay),injector:p}}),ec(()=>{this.childrenLoaders.delete(r)})),l=new Eo(a,()=>new ys.x).pipe(vo());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Gs(t()).pipe((0,Wr.z)(r=>r instanceof f.YKP||Array.isArray(r)?vt(r):(0,Un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oI{}class aI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function uI(n){throw n}function lI(n,e,t){return e.parse("/")}const wS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function cI(){const n=(0,f.f3M)(uh),e=(0,f.f3M)(lg),t=(0,f.f3M)(Fe),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),a=(0,f.f3M)(Wy,{optional:!0})??[],l=(0,f.f3M)(bh,{optional:!0})??{},d=(0,f.f3M)(iI),p=(0,f.f3M)(rI,{optional:!0}),y=(0,f.f3M)(oI,{optional:!0}),C=(0,f.f3M)(vS,{optional:!0}),T=new Kr(null,n,e,t,r,i,qp(a));return y&&(T.urlHandlingStrategy=y),C&&(T.routeReuseStrategy=C),T.titleStrategy=p??d,function Cg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,T),T}let Kr=(()=>{class n{constructor(t,r,i,a,l,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ys.x,this.errorHandler=uI,this.malformedUriErrorHandler=lI,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>vt(void 0),this.urlHandlingStrategy=new aI,this.routeReuseStrategy=new sI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(zy),this.configLoader.onLoadEndListener=A=>this.triggerEvent(new N0(A)),this.configLoader.onLoadStartListener=A=>this.triggerEvent(new x0(A)),this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const T=l.get(f.R0b);this.isNgZoneEnabled=T instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function Kp(){return new ra(new gn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rg(this.currentUrlTree,this.rootComponentType),this.transitions=new er({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(_i(i=>0!==i.id),(0,Tt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),mr(i=>{let a=!1,l=!1;return vt(i).pipe((0,_r.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mr(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Gy(d.source)&&(this.browserUrlTree=d.extractedUrl),vt(d).pipe(mr(T=>{const A=this.transitions.getValue();return r.next(new vy(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),A!==this.transitions.getValue()?vs.E:Promise.resolve(T)}),function gS(n,e,t,r){return mr(i=>function sa(n,e,t,r,i){return new pS(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Tt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_r.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function tI(n,e,t,r,i,a){return(0,Wr.z)(l=>function Ik(n,e,t,r,i,a,l="emptyOnly",d="legacy"){return new Do(n,e,t,r,i,l,d,a).recognize().pipe(mr(p=>null===p?function X0(n){return new ni.y(e=>e.error(n))}(new wk):vt(p)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,Tt.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_r.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(O,T)}this.browserUrlTree=T.urlAfterRedirects}const A=new KD(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(A)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:A,extractedUrl:O,source:U,restoredState:Y,extras:re}=d,Ge=new vy(A,this.serializeUrl(O),U,Y);r.next(Ge);const et=rg(O,this.rootComponentType).snapshot;return vt(i={...d,targetSnapshot:et,urlAfterRedirects:O,extras:{...re,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),vs.E}),(0,_r.b)(d=>{const p=new hk(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,Tt.U)(d=>i={...d,guards:yk(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function iS(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?vt({...t,guardsResult:!0}):function sS(n,e,t,r){return(0,Un.D)(n).pipe((0,Wr.z)(i=>function lS(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?vt(a.map(d=>{const p=hg(e)??i,y=vh(d,p);return Gs(function wh(n){return n&&hc(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(rs())})).pipe(fc()):vt(!0)}(i.component,i.route,t,e,r)),rs(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Wr.z)(d=>d&&function z0(n){return"boolean"==typeof n}(d)?function ky(n,e,t,r){return(0,Un.D)(e).pipe(zs(i=>Ra(function aS(n,e){return null!==n&&e&&e(new P0(n)),vt(!0)}(i.route.parent,r),function oS(n,e){return null!==n&&e&&e(new k0(n)),vt(!0)}(i.route,r),function G0(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function vk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>xa(()=>vt(l.guards.map(p=>{const y=hg(l.node)??t,C=vh(p,y);return Gs(function Py(n){return n&&hc(n.canActivateChild)}(C)?C.canActivateChild(r,n):y.runInContext(()=>C(r,n))).pipe(rs())})).pipe(fc())));return vt(a).pipe(fc())}(n,i.path,t),function uS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const i=r.map(a=>xa(()=>{const l=hg(e)??t,d=vh(a,l);return Gs(function tS(n){return n&&hc(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(rs())}));return vt(i).pipe(fc())}(n,i.route,t))),rs(i=>!0!==i,!0))}(r,a,n,e):vt(d)),(0,Tt.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,_r.b)(d=>{if(i.guardsResult=d.guardsResult,F(d.guardsResult))throw ug(0,d.guardsResult);const p=new fk(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),_i(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),jy(d=>{if(d.guards.canActivateChecks.length)return vt(d).pipe((0,_r.b)(p=>{const y=new gh(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),mr(p=>{let y=!1;return vt(p).pipe(function Ck(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let a=0;return(0,Un.D)(i).pipe(zs(l=>function mc(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!wg(i)&&(a[ss]=i.title),function $y(n,e,t,r){const i=function nI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return vt({});const a={};return(0,Un.D)(i).pipe((0,Wr.z)(l=>function yS(n,e,t,r){const i=hg(e)??r,a=vh(n,i);return Gs(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(rs(),(0,_r.b)(d=>{a[l]=d}))),Pa(1),function rh(n){return(0,Tt.U)(()=>n)}(a),is(l=>fg(l)?vs.E:ea(l)))}(a,n,e,r).pipe((0,Tt.U)(l=>(n._resolvedData=l,n.data=sg(n,t).resolve,i&&wg(i)&&(n.data[ss]=i.title),null)))}(l.route,r,n,e)),(0,_r.b)(()=>a++),Pa(1),(0,Wr.z)(l=>a===i.length?vt(t):vs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_r.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,_r.b)(p=>{const y=new Ey(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),jy(d=>{const p=y=>{const C=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,_r.b)(T=>{y.component=T}),(0,Tt.U)(()=>{})));for(const T of y.children)C.push(...p(T));return C};return jp(p(d.targetSnapshot.root)).pipe(Es(),nr(1))}),jy(()=>this.afterPreactivation()),(0,Tt.U)(d=>{const p=function lc(n,e,t){const r=yh(n,e._root,t?t._root:void 0);return new F0(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:p}}),(0,_r.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new My(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,_r.b)({next(){a=!0},complete(){a=!0}}),ec(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),is(d=>{if(l=!0,U0(d)){Ty(d)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new eg(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(p),Ty(d)){const y=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Gy(i.source)};this.scheduleNavigation(y,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new R0(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return vs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Ay),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:p}=r,y=i||this.routerState.root,C=p?this.currentUrlTree.fragment:l;let T=null;switch(d){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),hn(y,this.currentUrlTree,t,T,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=F(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function dI(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...wS}:!1===r?{...Tk}:r,F(t))return py(this.currentUrlTree,t,i);const a=this.parseUrl(t);return py(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new qu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let d,p,y;l?(d=l.resolve,p=l.reject,y=l.promise):y=new Promise((A,O)=>{d=A,p=O});const C=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:C,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new eg(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return cI()},providedIn:"root"}),n})();function Gy(n){return"imperative"!==n}let Yu=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ys.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Kr),f.Y36(Ku),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class qy{}let Ky=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(_i(t=>t instanceof qu),zs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,d=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,Un.D)(i).pipe((0,Jo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):vt(null);const a=i.pipe((0,Wr.z)(l=>null===l?vt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Un.D)([a,l]).pipe((0,Jo.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Kr),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(qy),f.LFG(zy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qu=new f.OlP("");let fI=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof tg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new tg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Xu(n,e){return{\u0275kind:n,\u0275providers:e}}function Dh(n){return[{provide:Wy,multi:!0,useValue:n}]}function bS(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Kr),i=n.get(Zy);1===n.get(Yy)&&r.initialNavigation(),n.get(bs,null,f.XFs.Optional)?.setUpPreloading(),n.get(Qu,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const Zy=new f.OlP("",{factory:()=>new ys.x}),Yy=new f.OlP("",{providedIn:"root",factory:()=>1});const bs=new f.OlP("");function SS(n){return Xu(0,[{provide:bs,useExisting:Ky},{provide:qy,useExisting:n}])}const mI=new f.OlP("ROUTER_FORROOT_GUARD"),MS=[Fe,{provide:uh,useClass:Fa},{provide:Kr,useFactory:cI},lg,{provide:Ku,useFactory:function pI(n){return n.routerState.root},deps:[Kr]},zy];function _I(){return new f.PXZ("Router",Kr)}let yI=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[MS,[],Dh(t),{provide:mI,useFactory:vI,deps:[[Kr,new f.FiY,new f.tp0]]},{provide:bh,useValue:r||{}},r?.useHash?{provide:Ee,useClass:Ze}:{provide:Ee,useClass:ct},{provide:Qu,useFactory:()=>{const n=(0,f.f3M)(Kr),e=(0,f.f3M)(Tp),t=(0,f.f3M)(bh);return t.scrollOffset&&e.setOffset(t.scrollOffset),new fI(n,e,t)}},r?.preloadingStrategy?SS(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:_I},r?.initialNavigation?EI(r):[],[{provide:Qy,useFactory:bS},{provide:f.tb,multi:!0,useExisting:Qy}]]}}static forChild(t){return{ngModule:n,providers:[Dh(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(mI,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Va]}),n})();function vI(n){return"guarded"}function EI(n){return["disabled"===n.initialNavigation?Xu(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Kr);return()=>{e.setUpLocationChangeListener()}}},{provide:Yy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Xu(2,[{provide:Yy,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(G,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(Kr),d=e.get(Zy);(function i(a){e.get(Kr).events.pipe(_i(d=>d instanceof qu||d instanceof eg||d instanceof R0),(0,Tt.U)(d=>d instanceof qu||d instanceof eg&&(0===d.code||1===d.code)&&null),_i(d=>null!==d),nr(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||d.closed?vt(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const Qy=new f.OlP("");let wI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-error"]],decls:2,vars:0,consts:[["src","assets/error.png","alt","lionel richie error image"]],template:function(t,r){1&t&&(f.TgZ(0,"div"),f._UZ(1,"img",0),f.qZA())},styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:600px;height:100%}img[_ngcontent-%COMP%]{height:400px;width:400px}@media screen and (max-width: 425px){img[_ngcontent-%COMP%]{height:300px;width:300px}}"]}),n})(),Xy=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ju=(()=>{class n extends Xy{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Ao=new f.OlP("NgValueAccessor"),II={provide:Ao,useExisting:(0,f.Gpc)(()=>tl),multi:!0},kS=new f.OlP("CompositionEventMode");let tl=(()=>{class n extends Xy{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function el(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(kS,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([II]),f.qOj]}),n})();function Ba(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function OS(n){return null!=n&&"number"==typeof n.length}const Ni=new f.OlP("NgValidators"),nl=new f.OlP("NgAsyncValidators"),FS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _c{static min(e){return function LS(n){return e=>{if(Ba(e.value)||Ba(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function CI(n){return e=>{if(Ba(e.value)||Ba(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function rl(n){return Ba(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function bI(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function tv(n){return Ba(n.value)||FS.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Sh(n){return e=>Ba(e.value)||!OS(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function TI(n){return e=>OS(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function nv(n){if(!n)return Ag;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ba(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return rv(e)}static composeAsync(e){return Rg(e)}}function Ag(n){return null}function DI(n){return null!=n}function SI(n){return(0,f.QGY)(n)?(0,Un.D)(n):n}function AI(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function MI(n,e){return e.map(t=>t(n))}function xI(n){return n.map(e=>function RI(n){return!n.validate}(e)?e:t=>e.validate(t))}function rv(n){if(!n)return null;const e=n.filter(DI);return 0==e.length?null:function(t){return AI(MI(t,e))}}function Mg(n){return null!=n?rv(xI(n)):null}function Rg(n){if(!n)return null;const e=n.filter(DI);return 0==e.length?null:function(t){return function PS(...n){const e=(0,_s.jO)(n),{args:t,keys:r}=Xo(n),i=new ni.y(a=>{const{length:l}=t;if(!l)return void a.complete();const d=new Array(l);let p=l,y=l;for(let C=0;C<l;C++){let T=!1;(0,_o.Xf)(t[C]).subscribe((0,jr.x)(a,A=>{T||(T=!0,y--),d[C]=A},()=>p--,void 0,()=>{(!p||!T)&&(y||a.next(r?Jd(r,d):d),a.complete())}))}});return e?i.pipe($p(e)):i}(MI(t,e).map(SI)).pipe((0,Tt.U)(AI))}}function NI(n){return null!=n?Rg(xI(n)):null}function xg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PI(n){return n._rawValidators}function VS(n){return n._rawAsyncValidators}function $a(n){return n?Array.isArray(n)?n:[n]:[]}function Ah(n,e){return Array.isArray(n)?n.includes(e):n===e}function iv(n,e){const t=$a(e);return $a(n).forEach(i=>{Ah(t,i)||t.push(i)}),t}function Mh(n,e){return $a(e).filter(t=>!Ah(n,t))}class Ts{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Mg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=NI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vi extends Ts{get formDirective(){return null}get path(){return null}}class ja extends Ts{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ng{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Pg=(()=>{class n extends Ng{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ja,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),Rh=(()=>{class n extends Ng{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(vi,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const vc="VALID",Fg="INVALID",Wa="PENDING",Lg="DISABLED";function UI(n){return(ov(n)?n.validators:n)||null}function $S(n){return Array.isArray(n)?Mg(n):n||null}function BI(n,e){return(ov(e)?e.asyncValidators:n)||null}function jS(n){return Array.isArray(n)?NI(n):n||null}function ov(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function HS(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function WS(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class av{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$S(this._rawValidators),this._composedAsyncValidatorFn=jS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vc}get invalid(){return this.status===Fg}get pending(){return this.status==Wa}get disabled(){return this.status===Lg}get enabled(){return this.status!==Lg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$S(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jS(e)}addValidators(e){this.setValidators(iv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mh(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mh(e,this._rawAsyncValidators))}hasValidator(e){return Ah(this._rawValidators,e)}hasAsyncValidator(e){return Ah(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vc||this.status===Wa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lg:vc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wa,this._hasOwnPendingAsyncValidator=!0;const t=SI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Lg:this.errors?Fg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wa)?Wa:this._anyControlsHaveStatus(Fg)?Fg:vc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ov(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Nh extends av{constructor(e,t,r){super(UI(t),BI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){WS(this,0,e),Object.keys(e).forEach(r=>{HS(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class jI extends Nh{}function wc(n,e){Ug(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function GS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&WI(n,e)})}(n,e),function qS(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function HI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&WI(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function za(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ic(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Bg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Vg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ug(n,e){const t=PI(n);null!==e.validator?n.setValidators(xg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=VS(n);null!==e.asyncValidator?n.setAsyncValidators(xg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Vg(e._rawValidators,i),Vg(e._rawAsyncValidators,i)}function Bg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=PI(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=VS(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Vg(e._rawValidators,r),Vg(e._rawAsyncValidators,r),t}function WI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function cv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZI(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const si=class extends av{constructor(e=null,t,r){super(UI(t),BI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ov(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ZI(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ZI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let zg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const JS={provide:Ao,useExisting:(0,f.Gpc)(()=>Oh),multi:!0};let Oh=(()=>{class n extends Ju{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([JS]),f.qOj]}),n})(),fv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const pv=new f.OlP("NgModelWithFormControlWarning"),eC={provide:vi,useExisting:(0,f.Gpc)(()=>Fh)};let Fh=(()=>{class n extends vi{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wc(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ic(t.control||null,t,!1),function qI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Hg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ic(r||null,t),(n=>n instanceof si)(i)&&(wc(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ph(n,e){Ug(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Cc(n,e){return Bg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ug(this.form,this),this._oldForm&&Bg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ni,10),f.Y36(nl,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([eC]),f.qOj,f.TTD]}),n})();const qg={provide:ja,useExisting:(0,f.Gpc)(()=>Tc)};let Tc=(()=>{class n extends ja{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function kh(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===tl?t=a:function GI(n){return Object.getPrototypeOf(n.constructor)===Ju}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function jg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Ec(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(vi,13),f.Y36(Ni,10),f.Y36(nl,10),f.Y36(Ao,10),f.Y36(pv,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([qg]),f.qOj,f.TTD]}),n})(),lA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[fv]}),n})(),fC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:pv,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[lA]}),n})();class Uh extends av{constructor(e,t,r){super(UI(t),BI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){WS(this,0,e),e.forEach((r,i)=>{HS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Ac(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let pC=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return Ac(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new Nh(i,a)}record(t,r=null){const i=this._reduceControls(t);return new jI(i,r)}control(t,r,i){let a={};return this.useNonNullable?(Ac(r)?a=r:(a.validators=r,a.asyncValidators=i),new si(t,{...a,nonNullable:!0})):new si(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new Uh(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof si||t instanceof av?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:fC}),n})();var gt=k(5119),Pi=k(5867);class ir{constructor(e){return e}}class Ds{constructor(){return(0,Pi.C6)()}}const Bh=new f.OlP("angularfire2._apps"),Mc={provide:ir,useFactory:function Ss(n){return n&&1===n.length?n[0]:new ir((0,Pi.Mq)())},deps:[[new f.FiY,Bh]]},Rc={provide:Ds,deps:[[new f.FiY,Bh]]};function xc(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ir(r)}}let Nc=(()=>{class n{constructor(t){(0,Pi.KN)("angularfire",gt.q4.full,"core"),(0,Pi.KN)("angularfire",gt.q4.full,"app"),(0,Pi.KN)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Mc,Rc]}),n})();function Pc(n,...e){return{ngModule:Nc,providers:[{provide:Bh,useFactory:xc(n),multi:!0,deps:[f.R0b,f.zs3,gt.HU,...e]}]}}const kc=(0,gt.u3)(Pi.ZF,!0);k(8247);var J=k(2090),tr=k(9681),Qs=k(1877),Ga=k(4859);class Wh{constructor(){return(0,gt.vb)("auth")}}var ye=k(5861);const As=new Map,Xs={activated:!1,tokenObservers:[]},bC={initialized:!1,enabled:!1};function Zr(n){return As.get(n)||Xs}function Ms(n,e){As.set(n,e)}function Jg(){return bC}class $A{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new J.BH,yield function SC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new J.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ai=new J.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Rv(n){if(!Zr(n).activated)throw ai.create("use-before-activation",{appName:n.name})}function Kh(n,e){return nm.apply(this,arguments)}function nm(){return(nm=(0,ye.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const O=yield l.getHeartbeatsHeader();O&&(a["X-Firebase-Client"]=O)}const d={method:"POST",body:JSON.stringify(e),headers:a};let p,y;try{p=yield fetch(n,d)}catch(O){throw ai.create("fetch-network-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}if(200!==p.status)throw ai.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(O){throw ai.create("fetch-parse-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}const C=y.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw ai.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(C[1]),A=Date.now();return{token:y.token,expireTimeMillis:A+T,issuedAtTimeMillis:A}})).apply(this,arguments)}function xC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Oc="firebase-app-check-store";let rm=null;function kC(){return rm||(rm=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(ai.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Oc,{keyPath:"compositeKey"})}}catch(r){e(ai.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),rm)}function Nv(){return(Nv=(0,ye.Z)(function*(n,e){const r=(yield kC()).transaction(Oc,"readwrite"),a=r.objectStore(Oc).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=p=>{l()},r.onerror=p=>{var y;d(ai.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Zh=new Qs.Yd("@firebase/app-check");function Ov(n,e){return(0,J.hl)()?function HA(n,e){return function OC(n,e){return Nv.apply(this,arguments)}(function LC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Zh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VC(){return Jg().enabled}function Lv(){return im.apply(this,arguments)}function im(){return(im=(0,ye.Z)(function*(){const n=Jg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const BC={error:"UNKNOWN_ERROR"};function $C(n){return J.US.encodeString(JSON.stringify(n),!1)}function Yh(n){return sm.apply(this,arguments)}function sm(){return(sm=(0,ye.Z)(function*(n,e=!1){const t=n.app;Rv(t);const r=Zr(t);let a,i=r.token;if(i&&!Fc(i)&&(Ms(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Fc(p)?i=p:yield Ov(t,void 0))}if(!e&&i&&Fc(i))return{token:i.token};let d,l=!1;if(VC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Kh(xC(t,yield Lv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield Ov(t,p),Ms(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Zh.warn(p.message):Zh.error(p),a=p}return i?a?d=Fc(i)?{token:i.token,internalError:a}:HC(a):(d={token:i.token},Ms(t,Object.assign(Object.assign({},r),{token:i})),yield Ov(t,i)):d=HC(a),l&&qa(t,d),d})).apply(this,arguments)}function am(n,e){const t=Zr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ms(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Vv(n){const{app:e}=n,t=Zr(e);let r=t.tokenRefresher;r||(r=function jC(n){const{app:e}=n;return new $A((0,ye.Z)(function*(){let r;if(r=Zr(e).token?yield Yh(n,!0):yield Yh(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ms(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qa(n,e){const t=Zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Fc(n){return n.expireTimeMillis-Date.now()>0}function HC(n){return{token:$C(BC),error:n}}class Lc{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Zr(this.app);for(const t of e)am(this.app,t.next);return Promise.resolve()}}const ZC="app-check-internal";!function XA(){(0,tr._registerComponent)(new Ga.wA("app-check",n=>function dO(n,e){return new Lc(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZC).initialize()})),(0,tr._registerComponent)(new Ga.wA(ZC,n=>function Uv(n){return{getToken:e=>Yh(n,e),addTokenListener:e=>function om(n,e,t,r){const{app:i}=n,a=Zr(i),l={next:t,error:r,type:e};if(Ms(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Fc(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),Vv(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Vv(n))}(n,"INTERNAL",e),removeTokenListener:e=>am(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,tr.registerVersion)("@firebase/app-check","0.5.16")}();class Ka{constructor(){return(0,gt.vb)("app-check")}}typeof window<"u"&&window;var kt,wO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Za={},XC=XC||{},en=wO||self;function al(){}function fm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ul="closure_uid_"+(1e9*Math.random()>>>0),sM=0;function oM(n,e,t){return n.call.apply(n.bind,arguments)}function aM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ei(n,e,t){return(Ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oM:aM).apply(null,arguments)}function pm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ui(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Ya(){this.s=this.s,this.o=this.o}Ya.prototype.s=!1,Ya.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function JC(n){Object.prototype.hasOwnProperty.call(n,ul)&&n[ul]||(n[ul]=++sM)}(this)},Ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Uc=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function zv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(fm(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function wi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}wi.prototype.h=function(){this.defaultPrevented=!0};var eb=function(){if(!en.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{en.addEventListener("test",al,e),en.removeEventListener("test",al,e)}catch{}return n}();function gm(n){return/^[\s\xa0]*$/.test(n)}var qv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Kv(n,e){return n<e?-1:n>e?1:0}function Bc(){var n=en.navigator;return n&&(n=n.userAgent)?n:""}function Ro(n){return-1!=Bc().indexOf(n)}function mm(n){return mm[" "](n),n}mm[" "]=al;var _m,n,lM=Ro("Opera"),$c=Ro("Trident")||Ro("MSIE"),nb=Ro("Edge"),ef=nb||$c,rb=Ro("Gecko")&&!(-1!=Bc().toLowerCase().indexOf("webkit")&&!Ro("Edge"))&&!(Ro("Trident")||Ro("MSIE"))&&!Ro("Edge"),ib=-1!=Bc().toLowerCase().indexOf("webkit")&&!Ro("Edge");function sb(){var n=en.document;return n?n.documentMode:void 0}e:{var Zv="",Yv=(n=Bc(),rb?/rv:([^\);]+)(\)|;)/.exec(n):nb?/Edge\/([\d\.]+)/.exec(n):$c?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ib?/WebKit\/(\S+)/.exec(n):lM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yv&&(Zv=Yv?Yv[1]:""),$c){var Qv=sb();if(null!=Qv&&Qv>parseFloat(Zv)){_m=String(Qv);break e}}_m=Zv}var cM={};var ob=en.document&&$c&&(sb()||parseInt(_m,10))||void 0;function tf(n,e){if(wi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rb){e:{try{mm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:hM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&tf.X.h.call(this)}}ui(tf,wi);var hM={2:"touch",3:"pen",4:"mouse"};tf.prototype.h=function(){tf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var jc="closure_listenable_"+(1e6*Math.random()|0),fM=0;function pM(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++fM,this.ba=this.ea=!1}function ym(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function nf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vm(n){const e={};for(const t in n)e[t]=n[t];return e}const eE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Em(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<eE.length;a++)t=eE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function wm(n){this.src=n,this.g={},this.h=0}function tE(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Uc(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(ym(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rf(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}wm.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=rf(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new pM(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var nE="closure_lm_"+(1e6*Math.random()|0),Im={};function ll(n,e,t,r,i){if(r&&r.once)return mM(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)ll(n,e[a],t,r,i);return null}return t=af(t),n&&n[jc]?n.N(e,t,Jh(r)?!!r.capture:!!r,i):rE(n,e,t,!1,r,i)}function rE(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Jh(i)?!!i.capture:!!i,d=oE(n);if(d||(n[nE]=d=new wm(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function gM(){const e=sE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)eb||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ab(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function mM(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)mM(n,e[a],t,r,i);return null}return t=af(t),n&&n[jc]?n.O(e,t,Jh(r)?!!r.capture:!!r,i):rE(n,e,t,!0,r,i)}function iE(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)iE(n,e[a],t,r,i);else r=Jh(r)?!!r.capture:!!r,t=af(t),n&&n[jc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rf(a=n.g[e],t,r,i))&&(ym(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=oE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rf(e,t,r,i)),(t=-1<n?e[n]:null)&&sf(t))}function sf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[jc])tE(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ab(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=oE(e))?(tE(t,n),0==t.h&&(t.src=null,e[nE]=null)):ym(n)}}}function ab(n){return n in Im?Im[n]:Im[n]="on"+n}function sE(n,e){if(n.ba)n=!0;else{e=new tf(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&sf(n),n=t.call(r,e)}return n}function oE(n){return(n=n[nE])instanceof wm?n:null}var Cm="__closure_events_fn_"+(1e9*Math.random()>>>0);function af(n){return"function"==typeof n?n:(n[Cm]||(n[Cm]=function(e){return n.handleEvent(e)}),n[Cm])}function Yr(){Ya.call(this),this.i=new wm(this),this.P=this,this.I=null}function li(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wi(e,n);else if(e instanceof wi)e.target=e.target||n;else{var i=e;Em(e=new wi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=uf(l,r,!0,e)&&i}if(i=uf(l=e.g=n,r,!0,e)&&i,i=uf(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=uf(l=e.g=t[a],r,!1,e)&&i}function uf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var d=l.listener,p=l.ha||l.src;l.ea&&tE(n.i,l),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}ui(Yr,Ya),Yr.prototype[jc]=!0,Yr.prototype.removeEventListener=function(n,e,t,r){iE(this,n,e,t,r)},Yr.prototype.M=function(){if(Yr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ym(t[r]);delete n.g[e],n.h--}}this.I=null},Yr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var bm=en.JSON.stringify;function _M(){var n=IM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Tm,ub=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new vM,n=>n.reset());class vM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lb(n){en.setTimeout(()=>{throw n},0)}function EM(n,e){Tm||function wM(){var n=en.Promise.resolve(void 0);Tm=function(){n.then(IO)}}(),aE||(Tm(),aE=!0),IM.add(n,e)}var aE=!1,IM=new class yM{constructor(){this.h=this.g=null}add(e,t){const r=ub.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function IO(){for(var n;n=_M();){try{n.h.call(n.g)}catch(t){lb(t)}var e=ub;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}aE=!1}function Dm(n,e){Yr.call(this),this.h=n||1,this.g=e||en,this.j=Ei(this.lb,this),this.l=Date.now()}function uE(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function lE(n,e,t){if("function"==typeof n)t&&(n=Ei(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ei(n.handleEvent,n)}return 2147483647<Number(e)?-1:en.setTimeout(n,e||0)}function cb(n){n.g=lE(()=>{n.g=null,n.i&&(n.i=!1,cb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ui(Dm,Yr),(kt=Dm.prototype).ca=!1,kt.R=null,kt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),li(this,"tick"),this.ca&&(uE(this),this.start()))}},kt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kt.M=function(){Dm.X.M.call(this),uE(this),delete this.g};class CM extends Ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cb(this)}M(){super.M(),this.g&&(en.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lf(n){Ya.call(this),this.h=n,this.g={}}ui(lf,Ya);var db=[];function hb(n,e,t,r){Array.isArray(t)||(t&&(db[0]=t.toString()),t=db);for(var i=0;i<t.length;i++){var a=ll(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function fb(n){nf(n.g,function(e,t){this.g.hasOwnProperty(t)&&sf(e)},n),n.g={}}function Sm(){this.g=!0}function xo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return bm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}lf.prototype.M=function(){lf.X.M.call(this),fb(this)},lf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sm.prototype.Aa=function(){this.g=!1},Sm.prototype.info=function(){};var Qa={},cE=null;function cf(){return cE=cE||new Yr}function mb(n){wi.call(this,Qa.Pa,n)}function df(n){const e=cf();li(e,new mb(e))}function DM(n,e){wi.call(this,Qa.STAT_EVENT,n),this.stat=e}function ki(n){const e=cf();li(e,new DM(e,n))}function _b(n,e){wi.call(this,Qa.Qa,n),this.size=e}function hf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return en.setTimeout(function(){n()},e)}Qa.Pa="serverreachability",ui(mb,wi),Qa.STAT_EVENT="statevent",ui(DM,wi),Qa.Qa="timingevent",ui(_b,wi);var Am={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},yb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function cl(){}function Mm(){}cl.prototype.h=null;var dl,Gi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function dE(){wi.call(this,"d")}function ff(){wi.call(this,"c")}function Rm(){}function pf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new lf(this),this.O=xm,this.T=new Dm(n=ef?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Eb}function Eb(){this.i=null,this.g="",this.h=!1}ui(dE,wi),ui(ff,wi),ui(Rm,cl),Rm.prototype.g=function(){return new XMLHttpRequest},Rm.prototype.i=function(){return{}},dl=new Rm;var xm=45e3,Hc={},Nm={};function hE(n,e,t){n.K=1,n.v=_f(No(e)),n.s=t,n.P=!0,fE(n,null)}function fE(n,e){n.F=Date.now(),gf(n),n.A=No(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),yE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Eb,n.g=PE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new CM(Ei(n.La,n,n.g),n.N)),hb(n.S,n.g,"readystatechange",n.ib),e=n.H?vm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),df(),function bM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var C=y[0];y=y[1];var T=C.split("_");l=2<=T.length&&"type"==T[1]?l+(C+"=")+y+"&":l+(C+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function pE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Pm(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=wb(n,t),i==Nm){4==e&&(n.o=4,ki(14),r=!1),xo(n.j,n.m,null,"[Incomplete Response]");break}if(i==Hc){n.o=4,ki(15),xo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xo(n.j,n.m,i,null),km(n,i)}pE(n)&&i!=Nm&&i!=Hc&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ob(e),e.K=!0,ki(11))):(xo(n.j,n.m,t,"[Invalid Chunked Response]"),aa(n),hl(n))}function wb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Nm:(t=Number(e.substring(t,r)),isNaN(t)?Hc:(r+=1)+t>e.length?Nm:(e=e.substr(r,t),n.C=r+t,e))}function gf(n){n.V=Date.now()+n.O,Ib(n,n.O)}function Ib(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hf(Ei(n.gb,n),e)}function gE(n){n.B&&(en.clearTimeout(n.B),n.B=null)}function hl(n){0==n.l.G||n.I||BM(n.l,n)}function aa(n){gE(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,uE(n.T),fb(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function km(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||EE(t.h,n)))if(!n.J&&EE(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;xE(t),Tf(t)}kb(t),ki(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=hf(Ei(t.cb,t),6e3));if(1>=Mb(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Zc(t,11)}else if((n.J||t.g==n)&&xE(t),!gm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const C=y[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const T=y[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(t.J=r=1.5*A,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const U=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var a=r.h;a.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(wE(a,a.h),a.h=null))}if(r.D){const Y=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;Y&&(r.za=Y,lr(r.F,r.D,Y))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Sf(r,r.H?r.ka:null,r.V),l.J){Fm(r.h,l);var d=l,p=r.J;p&&d.setTimeout(p),d.B&&(gE(d),gf(d)),r.g=l}else VM(r);0<t.i.length&&Bm(t)}else"stop"!=y[0]&&"close"!=y[0]||Zc(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Zc(t,7):Um(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}df()}catch{}}function Cb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function _E(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(fm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function mE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(fm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(kt=pf.prototype).setTimeout=function(n){this.O=n},kt.ib=function(n){n=n.target;const e=this.L;e&&3==ua(n)?e.l():this.La(n)},kt.La=function(n){try{if(n==this.g)e:{const C=ua(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||ef||this.g&&(this.h.h||this.g.fa()||Nb(this.g)))){this.I||4!=C||7==e||df(),gE(this);var t=this.g.aa();this.Y=t;t:if(pE(this)){var r=Nb(this.g);n="";var i=r.length,a=4==ua(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){aa(this),hl(this);var l="";break t}this.h.i=new en.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function TM(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gm(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,ki(12),aa(this),hl(this);break e}xo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,km(this,t)}this.P?(Pm(this,C,l),ef&&this.i&&3==C&&(hb(this.S,this.T,"tick",this.hb),this.T.start())):(xo(this.j,this.m,l,null),km(this,l)),4==C&&aa(this),this.i&&!this.I&&(4==C?BM(this.l,this):(this.i=!1,gf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ki(12)):(this.o=0,ki(13)),aa(this),hl(this)}}}catch{}},kt.hb=function(){if(this.g){var n=ua(this.g),e=this.g.fa();this.C<e.length&&(gE(this),Pm(this,n,e),this.i&&4!=n&&gf(this))}},kt.cancel=function(){this.I=!0,aa(this)},kt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function pb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(df(),ki(17)),aa(this),this.o=2,hl(this)):Ib(this,this.V-n)};var bb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fl){this.h=void 0!==e?e:n.h,Wc(this,n.j),this.s=n.s,this.g=n.g,mf(this,n.m),this.l=n.l,e=n.i;var t=new vf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Tb(this,t),this.o=n.o}else n&&(t=String(n).match(bb))?(this.h=!!e,Wc(this,t[1]||"",!0),this.s=yf(t[2]||""),this.g=yf(t[3]||"",!0),mf(this,t[4]),this.l=yf(t[5]||"",!0),Tb(this,t[6]||"",!0),this.o=yf(t[7]||"")):(this.h=!!e,this.i=new vf(null,this.h))}function No(n){return new fl(n)}function Wc(n,e,t){n.j=t?yf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Tb(n,e,t){e instanceof vf?(n.i=e,function Ef(n,e){e&&!n.j&&(Xa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(MM(this,r),yE(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=zc(e,Oi)),n.i=new vf(e,n.h))}function lr(n,e,t){n.i.set(e,t)}function _f(n){return lr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Db),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Db(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zc(e,Sb,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zc(e,Sb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(zc(t,"/"==t.charAt(0)?AM:Ab,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zc(t,Gc)),n.join("")};var Sb=/[#\/\?@]/g,Ab=/[#\?:]/g,AM=/[#\?]/g,Oi=/[#\?@]/g,Gc=/#/g;function vf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xa(n){n.g||(n.g=new Map,n.h=0,n.i&&function SM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function MM(n,e){Xa(n),e=pl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function RM(n,e){return Xa(n),e=pl(n,e),n.g.has(e)}function yE(n,e,t){MM(n,e),0<t.length&&(n.i=null,n.g.set(pl(n,e),zv(t)),n.h+=t.length)}function pl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Om(n){this.l=n||NM,n=en.PerformanceNavigationTiming?0<(n=en.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(en.g&&en.g.Ga&&en.g.Ga()&&en.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(kt=vf.prototype).add=function(n,e){Xa(this),this.i=null,n=pl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},kt.forEach=function(n,e){Xa(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},kt.oa=function(){Xa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},kt.W=function(n){Xa(this);let e=[];if("string"==typeof n)RM(this,n)&&(e=e.concat(this.g.get(pl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},kt.set=function(n,e){return Xa(this),this.i=null,RM(this,n=pl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},kt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var NM=10;function vE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Mb(n){return n.h?1:n.g?n.g.size:0}function EE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function wE(n,e){n.g?n.g.add(e):n.h=e}function Fm(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function IE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zv(n.i)}function Lm(){}function Vm(){this.g=new Lm}function CE(n,e,t){const r=t||"";try{Cb(n,function(i,a){let l=i;Jh(i)&&(l=bm(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wf(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function If(n){this.l=n.ac||null,this.j=n.jb||!1}function Cf(n,e){Yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ja,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Om.prototype.cancel=function(){if(this.i=IE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Lm.prototype.stringify=function(n){return en.JSON.stringify(n,void 0)},Lm.prototype.parse=function(n){return en.JSON.parse(n,void 0)},ui(If,cl),If.prototype.g=function(){return new Cf(this.l,this.j)},If.prototype.i=function(n){return function(){return n}}({}),ui(Cf,Yr);var Ja=0;function Rb(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function qc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gl(n)}function gl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(kt=Cf.prototype).open=function(n,e){if(this.readyState!=Ja)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gl(this)},kt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||en).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qc(this)),this.readyState=Ja},kt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gl(this)),this.g&&(this.readyState=3,gl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof en.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rb(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},kt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qc(this):gl(this),3==this.readyState&&Rb(this)}},kt.Va=function(n){this.g&&(this.response=this.responseText=n,qc(this))},kt.Ua=function(n){this.g&&(this.response=n,qc(this))},kt.ga=function(){this.g&&qc(this)},kt.setRequestHeader=function(n,e){this.v.append(n,e)},kt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},kt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var bO=en.JSON.parse;function Ar(n){Yr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=PM,this.K=this.L=!1}ui(Ar,Yr);var PM="",kM=/^https?$/i,OM=["POST","PUT"];function bE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,TE(n),bf(n)}function TE(n){n.D||(n.D=!0,li(n,"complete"),li(n,"error"))}function xb(n){if(n.h&&typeof XC<"u"&&(!n.C[1]||4!=ua(n)||2!=n.aa()))if(n.v&&4==ua(n))lE(n.Ha,0,n);else if(li(n,"readystatechange"),4==ua(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(bb)[1]||null;if(!i&&en.self&&en.self.location){var a=en.self.location.protocol;i=a.substr(0,a.length-1)}r=!kM.test(i?i.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var l=2<ua(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",TE(n)}}finally{bf(n)}}}function bf(n,e){if(n.g){DE(n);const t=n.g,r=n.C[0]?al:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch{}}}function DE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(en.clearTimeout(n.A),n.A=null)}function ua(n){return n.g?n.g.readyState:0}function Nb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case PM:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function SE(n){let e="";return nf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function AE(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=SE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):lr(n,e,t))}function Kc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ME(n){this.Ca=0,this.i=[],this.j=new Sm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Kc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Kc("baseRetryDelayMs",5e3,n),this.bb=Kc("retryDelaySeedMs",1e4,n),this.$a=Kc("forwardChannelMaxRetries",2,n),this.ta=Kc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Om(n&&n.concurrentRequestLimit),this.Fa=new Vm,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Um(n){if(Pb(n),3==n.G){var e=n.U++,t=No(n.F);lr(t,"SID",n.I),lr(t,"RID",e),lr(t,"TYPE","terminate"),$m(n,t),(e=new pf(n,n.j,e,void 0)).K=2,e.v=_f(No(t)),t=!1,en.navigator&&en.navigator.sendBeacon&&(t=en.navigator.sendBeacon(e.v.toString(),"")),!t&&en.Image&&((new Image).src=e.v,t=!0),t||(e.g=PE(e.l,null),e.g.da(e.v)),e.F=Date.now(),gf(e)}NE(n)}function Tf(n){n.g&&(Ob(n),n.g.cancel(),n.g=null)}function Pb(n){Tf(n),n.u&&(en.clearTimeout(n.u),n.u=null),xE(n),n.h.cancel(),n.m&&("number"==typeof n.m&&en.clearTimeout(n.m),n.m=null)}function Bm(n){vE(n.h)||n.m||(n.m=!0,EM(n.Ja,n),n.C=0)}function RE(n,e){var t;t=e?e.m:n.U++;const r=No(n.F);lr(r,"SID",n.I),lr(r,"RID",t),lr(r,"AID",n.T),$m(n,r),n.o&&n.s&&AE(r,n.o,n.s),t=new pf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=LM(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),wE(n.h,t),hE(t,r,e)}function $m(n,e){n.ia&&nf(n.ia,function(t,r){lr(e,r,t)}),n.l&&Cb({},function(t,r){lr(e,r,t)})}function LM(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ei(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let p=0;p<t;p++){let y=i[p].h;const C=i[p].g;if(y-=a,0>y)a=Math.max(0,i[p].h-100),d=!1;else try{CE(C,l,"req"+y+"_")}catch{r&&r(C)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function VM(n){n.g||n.u||(n.Z=1,EM(n.Ia,n),n.A=0)}function kb(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=hf(Ei(n.Ia,n),Df(n,n.A)),n.A++,0))}function Ob(n){null!=n.B&&(en.clearTimeout(n.B),n.B=null)}function UM(n){n.g=new pf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=No(n.sa);lr(e,"RID","rpc"),lr(e,"SID",n.I),lr(e,"CI",n.L?"0":"1"),lr(e,"AID",n.T),lr(e,"TYPE","xmlhttp"),$m(n,e),n.o&&n.s&&AE(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=_f(No(e)),t.s=null,t.P=!0,fE(t,n)}function xE(n){null!=n.v&&(en.clearTimeout(n.v),n.v=null)}function BM(n,e){var t=null;if(n.g==e){xE(n),Ob(n),n.g=null;var r=2}else{if(!EE(n.h,e))return;t=e.D,Fm(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;li(r=cf(),new _b(r,t)),Bm(n)}else VM(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function TO(n,e){return!(Mb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=hf(Ei(n.Ja,n,e),Df(n,n.C)),n.C++,0)))}(n,e)||2==r&&kb(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Zc(n,5);break;case 4:Zc(n,10);break;case 3:Zc(n,6);break;default:Zc(n,2)}}function Df(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Zc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ei(n.kb,n);t||(t=new fl("//www.google.com/images/cleardot.gif"),en.location&&"http"==en.location.protocol||Wc(t,"https"),_f(t)),function CO(n,e){const t=new Sm;if(en.Image){const r=new Image;r.onload=pm(wf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=pm(wf,t,r,"TestLoadImage: error",!1,e),r.onabort=pm(wf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=pm(wf,t,r,"TestLoadImage: timeout",!1,e),en.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ki(2);n.G=0,n.l&&n.l.va(e),NE(n),Pb(n)}function NE(n){if(n.G=0,n.la=[],n.l){const e=IE(n.h);(0!=e.length||0!=n.i.length)&&(Gv(n.la,e),Gv(n.la,n.i),n.h.i.length=0,zv(n.i),n.i.length=0),n.l.ua()}}function Sf(n,e,t){var r=t instanceof fl?No(t):new fl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),mf(r,r.m);else{var i=en.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new fl(null,void 0);r&&Wc(a,r),e&&(a.g=e),i&&mf(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&lr(r,t,e),lr(r,"VER",n.ma),$m(n,r),r}function PE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&n.Da&&!n.ra?new If({jb:!0}):n.ra)).Ka(n.H),e}function kE(){}function OE(){if($c&&!(10<=Number(ob)))throw Error("Environmental error: no available transport.")}function Fi(n,e){Yr.call(this),this.g=new ME(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!gm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ml(this)}function FE(n){dE.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Fb(){ff.call(this),this.status=1}function ml(n){this.g=n}(kt=Ar.prototype).Ka=function(n){this.L=n},kt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dl.g(),this.C=function vb(n){return n.h||(n.h=n.i())}(this.u?this.u:dl),this.g.onreadystatechange=Ei(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void bE(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=en.FormData&&n instanceof en.FormData,!(0<=Uc(OM,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{DE(this),0<this.B&&((this.K=function FM(n){return $c&&function dM(){return function tb(n){var e=cM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=qv(String(_m)).split("."),t=qv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Kv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Kv(0==i[2].length,0==a[2].length)||Kv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ei(this.qa,this)):this.A=lE(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){bE(this,a)}},kt.qa=function(){typeof XC<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},kt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),bf(this))},kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bf(this,!0)),Ar.X.M.call(this)},kt.Ha=function(){this.s||(this.F||this.v||this.l?xb(this):this.fb())},kt.fb=function(){xb(this)},kt.aa=function(){try{return 2<ua(this)?this.g.status:-1}catch{return-1}},kt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},kt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),bO(e)}},kt.Ea=function(){return this.m},kt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(kt=ME.prototype).ma=8,kt.G=1,kt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new pf(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=vm(a),Em(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=LM(this,i,e),lr(t=No(this.F),"RID",n),lr(t,"CVER",22),this.D&&lr(t,"X-HTTP-Session-Id",this.D),$m(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(SE(a)))+"&"+e:this.o&&AE(t,this.o,a)),wE(this.h,i),this.Ya&&lr(t,"TYPE","init"),this.O?(lr(t,"$req",e),lr(t,"SID","null"),i.Z=!0,hE(i,t,null)):hE(i,t,e),this.G=2}}else 3==this.G&&(n?RE(this,n):0==this.i.length||vE(this.h)||RE(this))},kt.Ia=function(){if(this.u=null,UM(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=hf(Ei(this.eb,this),n)}},kt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ki(10),Tf(this),UM(this))},kt.cb=function(){null!=this.v&&(this.v=null,Tf(this),kb(this),ki(19))},kt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),ki(2)):(this.j.info("Failed to ping google.com"),ki(1))},(kt=kE.prototype).xa=function(){},kt.wa=function(){},kt.va=function(){},kt.ua=function(){},kt.Ra=function(){},OE.prototype.g=function(n,e){return new Fi(n,e)},ui(Fi,Yr),Fi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;ki(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Sf(n,null,n.V),Bm(n)},Fi.prototype.close=function(){Um(this.g)},Fi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=bm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Bm(e)},Fi.prototype.M=function(){this.g.l=null,delete this.j,Um(this.g),delete this.g,Fi.X.M.call(this)},ui(FE,dE),ui(Fb,ff),ui(ml,kE),ml.prototype.xa=function(){li(this.g,"a")},ml.prototype.wa=function(n){li(this.g,new FE(n))},ml.prototype.va=function(n){li(this.g,new Fb)},ml.prototype.ua=function(){li(this.g,"b")},OE.prototype.createWebChannel=OE.prototype.g,Fi.prototype.send=Fi.prototype.u,Fi.prototype.open=Fi.prototype.m,Fi.prototype.close=Fi.prototype.close,Am.NO_ERROR=0,Am.TIMEOUT=8,Am.HTTP_ERROR=6,yb.COMPLETE="complete",Mm.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",Yr.prototype.listen=Yr.prototype.N,Ar.prototype.listenOnce=Ar.prototype.O,Ar.prototype.getLastError=Ar.prototype.Oa,Ar.prototype.getLastErrorCode=Ar.prototype.Ea,Ar.prototype.getStatus=Ar.prototype.aa,Ar.prototype.getResponseJson=Ar.prototype.Sa,Ar.prototype.getResponseText=Ar.prototype.fa,Ar.prototype.send=Ar.prototype.da,Ar.prototype.setWithCredentials=Ar.prototype.Ka;var DO=Za.createWebChannelTransport=function(){return new OE},$M=Za.getStatEventTarget=function(){return cf()},LE=Za.ErrorCode=Am,jM=Za.EventType=yb,jm=Za.Event=Qa,Lb=Za.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},SO=Za.FetchXmlHttpFactory=If,VE=Za.WebChannel=Mm,AO=Za.XhrIo=Ar;const Vb="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let Yc="9.13.0";const _l=new Qs.Yd("@firebase/firestore");function UE(){return _l.logLevel}function We(n,...e){if(_l.logLevel<=Qs.in.DEBUG){const t=e.map(BE);_l.debug(`Firestore (${Yc}): ${n}`,...t)}}function zr(n,...e){if(_l.logLevel<=Qs.in.ERROR){const t=e.map(BE);_l.error(`Firestore (${Yc}): ${n}`,...t)}}function fi(n,...e){if(_l.logLevel<=Qs.in.WARN){const t=e.map(BE);_l.warn(`Firestore (${Yc}): ${n}`,...t)}}function BE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function yt(n="Unexpected state"){const e=`FIRESTORE (${Yc}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function Kt(n,e){n||yt()}function ht(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends J.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ci.UNAUTHENTICATED))}shutdown(){}}class $b{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class HM{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,ye.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},p=y=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Kt("string"==typeof r.accessToken),new Hm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kt(null===e||"string"==typeof e),new ci(e)}}class jb{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Kt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Hb{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new jb(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zb{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,We("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Kt("string"==typeof t.token),this.A=t.token,new Wb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $E(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class la{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$E(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function tn(n,e){return n<e?-1:n>e?1:0}function eu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Po(n){return n+"\0"}class yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yr.fromMillis(Date.now())}static fromDate(e){return yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new yr(0,0))}static max(){return new Yt(new yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Af{constructor(e,t,r){void 0===t?t=0:t>e.length&&yt(),void 0===r?r=e.length-t:r>e.length-t&&yt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Af.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Af?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Sn extends Af{construct(e,t,r){return new Sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Sn(t)}static emptyPath(){return new Sn([])}}const WM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Af{construct(e,t,r){return new Mr(e,t,r)}static isValidIdentifier(e){return WM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new je(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new je(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new je(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new je(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(Sn.fromString(e))}static fromName(e){return new ut(Sn.fromString(e).popFirst(5))}static empty(){return new ut(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new Sn(e.slice()))}}class jE{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Wm(n){return n.fields.find(e=>2===e.kind)}function yl(n){return n.fields.filter(e=>2!==e.kind)}jE.UNKNOWN_ID=-1;class HE{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qc(0,qi.min())}}function zE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Yt.fromTimestamp(1e9===r?new yr(t+1,0):new yr(t,r));return new qi(i,ut.empty(),e)}function GE(n){return new qi(n.readTime,n.key,-1)}class qi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qi(Yt.min(),ut.empty(),-1)}static max(){return new qi(Yt.max(),ut.empty(),-1)}}function zm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ut.comparator(n.documentKey,e.documentKey),0!==t?t:tn(n.largestBatchId,e.largestBatchId))}const Mf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ca(n){return qE.apply(this,arguments)}function qE(){return qE=(0,ye.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==Mf)throw n;We("LocalStore","Unexpectedly lost primary lease")}),qE.apply(this,arguments)}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},p=>r(p))}),l=!0,a===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new pe((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next(C=>{l[y]=C,++d,d===a&&r(l)},C=>i(C))}})}static doWhile(e,t){return new pe((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class xf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Qr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Gm(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=KE(r.target.error);this.P.reject(new Gm(e,i))}}static open(e,t,r,i){try{return new xf(t,e.transaction(i,r))}catch(a){throw new Gm(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(We("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qb(t)}}class Js{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Js.D((0,J.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return We("SimpleDb","Removing database:",e),El(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,J.hl)())return!1;if(Js.N())return!0;const e=(0,J.z$)(),t=Js.D(e),r=0<t&&t<10,i=Js.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(We("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Gm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new je(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new je(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Gm(e,d))},a.onupgradeneeded=l=>{We("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{We("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.F(e);const p=xf.open(a.db,e,l?"readonly":"readwrite",r),y=i(p).next(C=>(p.V(),C)).catch(C=>(p.abort(C),pe.reject(C))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,C="FirebaseError"!==y.name&&d<3;if(We("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),a.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zM{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return El(this.U.delete())}}class Gm extends je{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function vl(n){return"IndexedDbTransactionError"===n.name}class qb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(We("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(We("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),El(r)}add(e){return We("SimpleDb","ADD",this.store.name,e,e),El(this.store.add(e))}get(e){return El(this.store.get(e)).next(t=>(void 0===t&&(t=null),We("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return We("SimpleDb","DELETE",this.store.name,e),El(this.store.delete(e))}count(){return We("SimpleDb","COUNT",this.store.name),El(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new pe((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){We("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=a=>{const l=KE(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,t){const r=[];return new pe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const p=new zM(d),y=t(d.primaryKey,d.value,p);if(y instanceof pe){const C=y.catch(T=>(p.done(),pe.reject(T)));r.push(C)}p.isDone?i():null===p.G?d.continue():d.continue(p.G)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function El(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=KE(r.target.error);t(i)}})}let Kb=!1;function KE(n){const e=Js.D((0,J.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kb||(Kb=!0,setTimeout(()=>{throw r},0)),r}}return n}class RO{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;We("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{We("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){vl(r)?We("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ca(r)}yield t.nt(6e4)}))}}class xO{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return pe.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return We("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>(We("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=GE(a);zm(l,r)>0&&(r=l)}),new qi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function GM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}os.at=-1;class cr{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qm(this.root,e,this.comparator,!1)}getReverseIterator(){return new qm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qm(this.root,e,this.comparator,!0)}}class qm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??pi.RED,this.left=i??pi.EMPTY,this.right=a??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new pi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return pi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const e=this.left.check();if(e!==this.right.check())throw yt();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tu(this.data.getIterator())}getIteratorFrom(e){return new tu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class tu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wl(n){return n.hasNext()?n.getNext():void 0}class Li{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new Li([])}unionWith(e){let t=new Kn(Mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Xr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xr.EMPTY_BYTE_STRING=new Xr("");const YE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ko(n){if(Kt(!!n),"string"==typeof n){let e=0;const t=YE.exec(n);if(Kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Jc(n){return"string"==typeof n?Xr.fromBase64String(n):Xr.fromUint8Array(n)}function Yb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function qM(n){const e=n.mapValue.fields.__previous_value__;return Yb(e)?qM(e):e}function Km(n){const e=ko(n.mapValue.fields.__local_write_time__.timestampValue);return new yr(e.seconds,e.nanos)}class Qb{constructor(e,t,r,i,a,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}function Nf(n){return null==n}function Pf(n){return 0===n&&1/n==-1/0}function Xb(n){return"number"==typeof n&&Number.isInteger(n)&&!Pf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const da={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kf={nullValue:"NULL_VALUE"};function ru(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yb(n)?4:Jb(n)?9007199254740991:10:yt()}function Oo(n,e){if(n===e)return!0;const t=ru(n);if(t!==ru(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Km(n).isEqual(Km(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ko(r.timestampValue),l=ko(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Jc(n.bytesValue).isEqual(Jc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return dr(r.geoPointValue.latitude)===dr(i.geoPointValue.latitude)&&dr(r.geoPointValue.longitude)===dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return dr(r.integerValue)===dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=dr(r.doubleValue),l=dr(i.doubleValue);return a===l?Pf(a)===Pf(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return eu(n.arrayValue.values||[],e.arrayValue.values||[],Oo);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(GM(a)!==GM(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!Oo(a[d],l[d])))return!1;return!0}(n,e);default:return yt()}var i}function Of(n,e){return void 0!==(n.values||[]).find(t=>Oo(t,e))}function ha(n,e){if(n===e)return 0;const t=ru(n),r=ru(e);if(t!==r)return tn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return tn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=dr(i.integerValue||i.doubleValue),d=dr(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return Zm(n.timestampValue,e.timestampValue);case 4:return Zm(Km(n),Km(e));case 5:return tn(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Jc(i),d=Jc(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let p=0;p<l.length&&p<d.length;p++){const y=tn(l[p],d[p]);if(0!==y)return y}return tn(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=tn(dr(i.latitude),dr(a.latitude));return 0!==l?l:tn(dr(i.longitude),dr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let p=0;p<l.length&&p<d.length;++p){const y=ha(l[p],d[p]);if(y)return y}return tn(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===da.mapValue&&a===da.mapValue)return 0;if(i===da.mapValue)return 1;if(a===da.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),p=a.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let C=0;C<d.length&&C<y.length;++C){const T=tn(d[C],y[C]);if(0!==T)return T;const A=ha(l[d[C]],p[y[C]]);if(0!==A)return A}return tn(d.length,y.length)}(n.mapValue,e.mapValue);default:throw yt()}}function Zm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return tn(n,e);const t=ko(n),r=ko(e),i=tn(t.seconds,r.seconds);return 0!==i?i:tn(t.nanos,r.nanos)}function Ff(n){return Ym(n)}function Ym(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ko(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Jc(n.bytesValue).toBase64():"referenceValue"in n?ut.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Ym(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${Ym(r.fields[d])}`;return a+"}"}(n.mapValue):yt();var e}function fa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function QE(n){return!!n&&"integerValue"in n}function Lf(n){return!!n&&"arrayValue"in n}function KM(n){return!!n&&"nullValue"in n}function ZM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qm(n){return!!n&&"mapValue"in n}function Vf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Jb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function NO(n){return"nullValue"in n?kf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fa(nu.empty(),ut.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:yt()}function PO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fa(nu.empty(),ut.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?da:yt()}function YM(n,e){const t=ha(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function QM(n,e){const t=ha(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vf(t)}setAll(e){let t=Mr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=Vf(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Qm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ii(Vf(this.value))}}function eT(n){const e=[];return Xc(n.fields,(t,r)=>{const i=new Mr([t]);if(Qm(r)){const a=eT(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Li(e)}class hr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new hr(e,0,Yt.min(),Yt.min(),Ii.empty(),0)}static newFoundDocument(e,t,r){return new hr(e,1,t,Yt.min(),r,0)}static newNoDocument(e,t){return new hr(e,2,t,Yt.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,Yt.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kO{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.ht=null}}function XM(n,e=null,t=[],r=[],i=null,a=null,l=null){return new kO(n,e,t,r,i,a,l)}function ed(n){const e=ht(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ff(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ff(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ff(r)).join(",")),e.ht=t}return e.ht}function Xm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Ye(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Oo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!It(n.startAt,e.startAt)&&It(n.endAt,e.endAt)}function s(n){return ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function o(n,e){return n.filters.filter(t=>t instanceof h&&t.field.isEqual(e))}function u(n,e,t){let r=kf,i=!0;for(const a of o(n,e)){let l=kf,d=!0;switch(a.op){case"<":case"<=":l=NO(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=kf}YM({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];YM({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function c(n,e,t){let r=da,i=!0;for(const a of o(n,e)){let l=da,d=!0;switch(a.op){case">=":case">":l=PO(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=da}QM({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];QM({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class h extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new g(e,t,r):"array-contains"===t?new D(e,r):"in"===t?new R(e,r):"not-in"===t?new V(e,r):"array-contains-any"===t?new q(e,r):new h(e,t,r)}static lt(e,t,r){return"in"===t?new v(e,r):new w(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ha(t,this.value)):null!==t&&ru(this.value)===ru(t)&&this.ft(ha(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class g extends h{constructor(e,t,r){super(e,t,r),this.key=ut.fromName(r.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.ft(t)}}class v extends h{constructor(e,t){super(e,"in",t),this.keys=b(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class w extends h{constructor(e,t){super(e,"not-in",t),this.keys=b(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function b(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ut.fromName(r.referenceValue))}class D extends h{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lf(t)&&Of(t.arrayValue,this.value)}}class R extends h{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Of(this.value.arrayValue,t)}}class V extends h{constructor(e,t){super(e,"not-in",t)}matches(e){if(Of(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Of(this.value.arrayValue,t)}}class q extends h{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Of(this.value.arrayValue,r))}}class se{constructor(e,t){this.position=e,this.inclusive=t}}class De{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ye(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function st(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?ut.comparator(ut.fromName(l.referenceValue),t.key):ha(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function It(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oo(n.position[t],e.position[t]))return!1;return!0}class St{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function Ve(n,e,t,r,i,a,l,d){return new St(n,e,t,r,i,a,l,d)}function Ht(n){return new St(n)}function kn(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sr(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pa(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Uf(n){return null!==n.collectionGroup}function iu(n){const e=ht(n);if(null===e._t){e._t=[];const t=pa(e),r=sr(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new De(t)),e._t.push(new De(Mr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new De(Mr.keyField(),a))}}}return e._t}function gi(n){const e=ht(n);if(!e.wt)if("F"===e.limitType)e.wt=XM(e.path,e.collectionGroup,iu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of iu(e))t.push(new De(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new se(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new se(e.startAt.position,e.startAt.inclusive):null;e.wt=XM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function td(n,e,t){return new St(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Il(n,e){return Xm(gi(n),gi(e))&&n.limitType===e.limitType}function Jm(n){return`${ed(gi(n))}|lt:${n.limitType}`}function Bf(n){return`Query(target=${function OO(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ff(r.value)}`;var r}).join(", ")}]`),Nf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ff(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ff(t)).join(",")),`Target(${e})`}(gi(n))}; limitType=${n.limitType})`}function $f(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ut.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=st(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,iu(t),r)||t.endAt&&!function(i,a,l){const d=st(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,iu(t),r)));var t,r}function e_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FO(n){return(e,t)=>{let r=!1;for(const i of iu(n)){const a=x2(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function x2(n,e,t){const r=n.field.isKeyField()?ut.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),p=l.data.field(i);return null!==d&&null!==p?ha(d,p):yt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return yt()}}function LO(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pf(e)?"-0":e}}function VO(n){return{integerValue:""+n}}function UO(n,e){return Xb(e)?VO(e):LO(n,e)}class tT{constructor(){this._=void 0}}function N2(n,e,t){return n instanceof t_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof jf?$O(n,e):n instanceof Hf?jO(n,e):function(r,i){const a=BO(r,i),l=HO(a)+HO(r.yt);return QE(a)&&QE(r.yt)?VO(l):LO(r.It,l)}(n,e)}function P2(n,e,t){return n instanceof jf?$O(n,e):n instanceof Hf?jO(n,e):t}function BO(n,e){return n instanceof n_?QE(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class t_ extends tT{}class jf extends tT{constructor(e){super(),this.elements=e}}function $O(n,e){const t=WO(e);for(const r of n.elements)t.some(i=>Oo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Hf extends tT{constructor(e){super(),this.elements=e}}function jO(n,e){let t=WO(e);for(const r of n.elements)t=t.filter(i=>!Oo(i,r));return{arrayValue:{values:t}}}class n_ extends tT{constructor(e,t){super(),this.It=e,this.yt=t}}function HO(n){return dr(n.integerValue||n.doubleValue)}function WO(n){return Lf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class XE{constructor(e,t){this.field=e,this.transform=t}}class O2{constructor(e,t){this.version=e,this.transformResults=t}}class Rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class rT{}function zO(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new i_(n.key,Rr.none()):new r_(n.key,n.data,Rr.none());{const t=n.data,r=Ii.empty();let i=new Kn(Mr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Cl(n.key,r,new Li(i.toArray()),Rr.none())}}function F2(n,e,t){n instanceof r_?function(r,i,a){const l=r.value.clone(),d=KO(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Cl?function(r,i,a){if(!nT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=KO(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(qO(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function JE(n,e,t,r){return n instanceof r_?function(i,a,l,d){if(!nT(i.precondition,a))return l;const p=i.value.clone(),y=ZO(i.fieldTransforms,d,a);return p.setAll(y),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cl?function(i,a,l,d){if(!nT(i.precondition,a))return l;const p=ZO(i.fieldTransforms,d,a),y=a.data;return y.setAll(qO(i)),y.setAll(p),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,nT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function L2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=BO(r.transform,i||null);null!=a&&(null===t&&(t=Ii.empty()),t.set(r.field,a))}return t||null}function GO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&eu(t,r,(i,a)=>function k2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof jf&&r instanceof jf||t instanceof Hf&&r instanceof Hf?eu(t.elements,r.elements,Oo):t instanceof n_&&r instanceof n_?Oo(t.yt,r.yt):t instanceof t_&&r instanceof t_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class r_ extends rT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cl extends rT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function qO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KO(n,e,t){const r=new Map;Kt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,P2(l,d,t[i]))}return r}function ZO(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,N2(a,l,e))}return r}class i_ extends rT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JM extends rT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class V2{constructor(e){this.count=e}}var di,On;function YO(n){switch(n){default:return yt();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function QO(n){if(void 0===n)return zr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case di.OK:return _e.OK;case di.CANCELLED:return _e.CANCELLED;case di.UNKNOWN:return _e.UNKNOWN;case di.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case di.INTERNAL:return _e.INTERNAL;case di.UNAVAILABLE:return _e.UNAVAILABLE;case di.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case di.NOT_FOUND:return _e.NOT_FOUND;case di.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case di.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case di.ABORTED:return _e.ABORTED;case di.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case di.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case di.DATA_LOSS:return _e.DATA_LOSS;default:return yt()}}(On=di||(di={}))[On.OK=0]="OK",On[On.CANCELLED=1]="CANCELLED",On[On.UNKNOWN=2]="UNKNOWN",On[On.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",On[On.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",On[On.NOT_FOUND=5]="NOT_FOUND",On[On.ALREADY_EXISTS=6]="ALREADY_EXISTS",On[On.PERMISSION_DENIED=7]="PERMISSION_DENIED",On[On.UNAUTHENTICATED=16]="UNAUTHENTICATED",On[On.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",On[On.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",On[On.ABORTED=10]="ABORTED",On[On.OUT_OF_RANGE=11]="OUT_OF_RANGE",On[On.UNIMPLEMENTED=12]="UNIMPLEMENTED",On[On.INTERNAL=13]="INTERNAL",On[On.UNAVAILABLE=14]="UNAVAILABLE",On[On.DATA_LOSS=15]="DATA_LOSS";class nd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Zb(this.inner)}size(){return this.innerSize}}const U2=new cr(ut.comparator);function xs(){return U2}const XO=new cr(ut.comparator);function ew(...n){let e=XO;for(const t of n)e=e.insert(t.key,t);return e}function JO(n){let e=XO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function su(){return tw()}function e1(){return tw()}function tw(){return new nd(n=>n.toString(),(n,e)=>n.isEqual(e))}const B2=new cr(ut.comparator),$2=new Kn(ut.comparator);function mn(...n){let e=$2;for(const t of n)e=e.add(t);return e}const j2=new Kn(tn);function iT(){return j2}class nw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,rw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nw(Yt.min(),i,iT(),xs(),mn())}}class rw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new rw(r,t,mn(),mn(),mn())}}class sT{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class t1{constructor(e,t){this.targetId=e,this.At=t}}class n1{constructor(e,t,r=Xr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class r1{constructor(){this.Rt=0,this.bt=o1(),this.Pt=Xr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=mn(),t=mn(),r=mn();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:yt()}}),new rw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=o1()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class H2{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=xs(),this.qt=s1(),this.Kt=new Kn(tn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:yt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(s(a))if(0===r){const l=new ut(a.path);this.jt(t,l,hr.newNoDocument(l,Yt.min()))}else Kt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&s(d.target)){const p=new ut(d.target.path);null!==this.Ut.get(p)||this.ee(l,p)||this.jt(l,p,hr.newNoDocument(p,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=mn();this.qt.forEach((a,l)=>{let d=!0;l.forEachWhile(p=>{const y=this.Xt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new nw(e,t,this.Kt,this.Ut,r);return this.Ut=xs(),this.qt=s1(),this.Kt=new Kn(tn),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new r1,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Kn(tn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||We("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new r1),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function s1(){return new cr(ut.comparator)}function o1(){return new cr(ut.comparator)}const W2={asc:"ASCENDING",desc:"DESCENDING"},z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class G2{constructor(e,t){this.databaseId=e,this.gt=t}}function iw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a1(n,e){return n.gt?e.toBase64():e.toUint8Array()}function q2(n,e){return iw(n,e.toTimestamp())}function Ci(n){return Kt(!!n),Yt.fromTimestamp(function(e){const t=ko(e);return new yr(t.seconds,t.nanos)}(n))}function eR(n,e){return(t=n,new Sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function u1(n){const e=Sn.fromString(n);return Kt(m1(e)),e}function sw(n,e){return eR(n.databaseId,e.path)}function ou(n,e){const t=u1(e);if(t.get(1)!==n.databaseId.projectId)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ut(c1(t))}function tR(n,e){return eR(n.databaseId,e)}function l1(n){const e=u1(n);return 4===e.length?Sn.emptyPath():c1(e)}function ow(n){return new Sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function c1(n){return Kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function d1(n,e,t){return{name:sw(n,e),fields:t.value.mapValue.fields}}function h1(n,e,t){const r=ou(n,e.name),i=Ci(e.updateTime),a=new Ii({mapValue:{fields:e.fields}}),l=hr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function aw(n,e){let t;if(e instanceof r_)t={update:d1(n,e.key,e.value)};else if(e instanceof i_)t={delete:sw(n,e.key)};else if(e instanceof Cl)t={update:d1(n,e.key,e.data),updateMask:n$(e.fieldMask)};else{if(!(e instanceof JM))return yt();t={verify:sw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof t_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof jf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof n_)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw yt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:q2(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:yt()),t;var i}function nR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Rr.updateTime(Ci(i.updateTime)):void 0!==i.exists?Rr.exists(i.exists):Rr.none():Rr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(Kt("REQUEST_TIME"===l.setToServerValue),d=new t_):"appendMissingElements"in l?d=new jf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Hf(l.removeAllFromArray.values||[]):"increment"in l?d=new n_(a,l.increment):yt();const p=Mr.fromServerFormat(l.fieldPath);return new XE(p,d)}(n,i)):[];var i;if(e.update){const i=ou(n,e.update.name),a=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Li((e.updateMask.fieldPaths||[]).map(y=>Mr.fromServerFormat(y)));return new Cl(i,a,l,t,r)}return new r_(i,a,t,r)}if(e.delete){const i=ou(n,e.delete);return new i_(i,t)}if(e.verify){const i=ou(n,e.verify);return new JM(i,t)}return yt()}function f1(n,e){return{documents:[tR(n,e.path)]}}function rR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(C=>function(T){if("=="===T.op){if(ZM(T.value))return{unaryFilter:{field:s_(T.field),op:"IS_NAN"}};if(KM(T.value))return{unaryFilter:{field:s_(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(ZM(T.value))return{unaryFilter:{field:s_(T.field),op:"IS_NOT_NAN"}};if(KM(T.value))return{unaryFilter:{field:s_(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:s_(T.field),op:J2(T.op),value:T.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(y=>{return{field:s_((C=y).field),direction:X2(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(y=e.limit,n.gt||Nf(y)?y:{value:y});var y,d,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function p1(n){let e=l1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Kt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=g1(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new De(o_((T=C).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(C){let T;return T="object"==typeof C?C.value:C,Nf(T)?null:T}(t.limit));let p=null;var C;t.startAt&&(p=new se((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new se(C.values||[],!C.before)}(t.endAt)),Ve(e,i,l,a,d,"F",p,y)}function g1(n){return n?void 0!==n.unaryFilter?[t$(n)]:void 0!==n.fieldFilter?[e$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>g1(e)).reduce((e,t)=>e.concat(t)):yt():[]}function X2(n){return W2[n]}function J2(n){return z2[n]}function s_(n){return{fieldPath:n.canonicalString()}}function o_(n){return Mr.fromServerFormat(n.fieldPath)}function e$(n){return h.create(o_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(n.fieldFilter.op),n.fieldFilter.value)}function t$(n){switch(n.unaryFilter.op){case"IS_NAN":const e=o_(n.unaryFilter.field);return h.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=o_(n.unaryFilter.field);return h.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=o_(n.unaryFilter.field);return h.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=o_(n.unaryFilter.field);return h.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}function n$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function m1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function as(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_1(e)),e=r$(n.get(t),e);return _1(e)}function r$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function _1(n){return n+"\x01\x01"}function au(n){const e=n.length;if(Kt(e>=2),2===e)return Kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Sn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&yt(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:yt()}a=l+2}return new Sn(r)}const y1=["userId","batchId"];function oT(n,e){return[n,as(e)]}function v1(n,e,t){return[n,as(e),t]}const i$={},s$=["prefixPath","collectionGroup","readTime","documentId"],o$=["prefixPath","collectionGroup","documentId"],a$=["collectionGroup","readTime","prefixPath","documentId"],u$=["canonicalId","targetId"],l$=["targetId","path"],c$=["path","targetId"],d$=["collectionId","parent"],h$=["indexId","uid"],f$=["uid","sequenceNumber"],p$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g$=["indexId","uid","orderedDocumentKey"],m$=["userId","collectionPath","documentId"],_$=["userId","collectionPath","largestBatchId"],y$=["userId","collectionGroup","largestBatchId"],E1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],v$=[...E1,"documentOverlays"],w1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],I1=w1,E$=[...I1,"indexConfiguration","indexState","indexEntries"];class iR extends Rf{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function bi(n,e){const t=ht(n);return Js.M(t.ie,e)}class sR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&F2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=JE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=JE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=e1();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const p=zO(l,d);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(Yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(t,r)=>GO(t,r))&&eu(this.baseMutations,e.baseMutations,(t,r)=>GO(t,r))}}class oR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Kt(e.mutations.length===r.length);let i=B2;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new oR(e,t,r,i)}}class aR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rd{constructor(e,t,r,i,a=Yt.min(),l=Yt.min(),d=Xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new rd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class C1{constructor(e){this.re=e}}function b1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:aT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sw(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:iw(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Wf(e.version)};else{if(!e.isUnknownDocument())return yt();r.unknownDocument={path:t.path.toArray(),version:Wf(e.version)}}var i,a;return r}function aT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Wf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zf(n){const e=new yr(n.seconds,n.nanoseconds);return Yt.fromTimestamp(e)}function Gf(n,e){const t=(e.baseMutations||[]).map(a=>nR(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>nR(n.re,a)),i=yr.fromMillis(e.localWriteTimeMs);return new sR(e.batchId,i,t,r)}function uw(n){const e=zf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zf(n.lastLimboFreeSnapshotVersion):Yt.min();let r;var i;return void 0!==n.query.documents?(Kt(1===(i=n.query).documents.length),r=gi(Ht(l1(i.documents[0])))):r=gi(p1(n.query)),new rd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Xr.fromBase64String(n.resumeToken))}function T1(n,e){const t=Wf(e.snapshotVersion),r=Wf(e.lastLimboFreeSnapshotVersion);let i;i=s(e.target)?f1(n.re,e.target):rR(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ed(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uR(n){const e=p1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?td(e,e.limit,"L"):e}function lR(n,e){return new aR(e.largestBatchId,nR(n.re,e.overlayMutation))}function D1(n,e){const t=e.path.lastSegment();return[n,as(e.path.popLast()),t]}function S1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Wf(r.readTime),documentKey:as(r.documentKey.path),largestBatchId:r.largestBatchId}}class I${getBundleMetadata(e,t){return A1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:zf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return A1(e).put({bundleId:(r=t).id,createTime:Wf(Ci(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return M1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:uR(i.bundledQuery),readTime:zf(i.readTime)};var i})}saveNamedQuery(e,t){return M1(e).put({name:(r=t).name,readTime:Wf(Ci(r.readTime)),bundledQuery:r.bundledQuery});var r}}function A1(n){return bi(n,"bundles")}function M1(n){return bi(n,"namedQueries")}class uT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new uT(e,t.uid||"")}getOverlay(e,t){return lw(e).get(D1(this.userId,t)).next(r=>r?lR(this.It,r):null)}getOverlays(e,t){const r=su();return pe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new aR(t,l);i.push(this.ue(e,d))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(as(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(lw(e).Y("collectionPathOverlayIndex",d))}),pe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=su(),a=as(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return lw(e).W("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const y=lR(this.It,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=su();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lw(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,y,C)=>{const T=lR(this.It,y);a.size()<i||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):C.done()}).next(()=>a)}ue(e,t){return lw(e).put(function(r,i,a){const[l,d,p]=D1(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:aw(r.re,a.mutation)}}(this.It,this.userId,t))}}function lw(n){return bi(n,"documentOverlays")}class qf{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Pf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Jc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Jb(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):yt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),ut.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function C$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function R1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=C$(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}qf.Te=new qf;class b${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=R1(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=R1(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class T${constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class D${constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class cw{constructor(){this.Be=new b$,this.Le=new T$(this.Be),this.Ue=new D$(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Kf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Kf(this.indexId,this.documentKey,this.arrayValue,r)}}function Zf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=x1(n.arrayValue,e.arrayValue),0!==t?t:(t=x1(n.directionalValue,e.directionalValue),0!==t?t:ut.comparator(n.documentKey,e.documentKey)))}function x1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class S${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Wm(e);if(void 0!==t&&!this.ze(t))return!1;const r=yl(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class A${constructor(){this.Ye=new cR}addToCollectionParentIndex(e,t){return this.Ye.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(qi.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class cR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kn(Sn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kn(Sn.comparator)).toArray()}}const lT=new Uint8Array(0);class M${constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new cR,this.Ze=new nd(r=>ed(r),(r,i)=>Xm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:as(i)};return N1(e).put(a)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Po(t),""],!1,!0);return N1(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(au(l.parent))}return r})}addFieldIndex(e,t){const r=cT(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=hw(e);return a.next(d=>{l.put(S1(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=cT(e),i=hw(e),a=dw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=dw(e);let i=!0;const a=new Map;return pe.forEach(this.tn(t),l=>this.en(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=mn();const d=[];return pe.forEach(a,(p,y)=>{var C;We("IndexedDbIndexManager",`Using index ${C=p,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(lt=>`${lt.fieldPath}:${lt.kind}`).join(",")}`} to execute ${ed(t)}`);const T=function(lt,ot){const Ot=Wm(ot);if(void 0===Ot)return null;for(const Ut of o(lt,Ot.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(y,p),A=function(lt,ot){const Ot=new Map;for(const Ut of yl(ot))for(const En of o(lt,Ut.fieldPath))switch(En.op){case"==":case"in":Ot.set(Ut.fieldPath.canonicalString(),En.value);break;case"not-in":case"!=":return Ot.set(Ut.fieldPath.canonicalString(),En.value),Array.from(Ot.values())}return null}(y,p),O=function(lt,ot){const Ot=[];let Ut=!0;for(const En of yl(ot)){const ei=0===En.kind?u(lt,En.fieldPath,lt.startAt):c(lt,En.fieldPath,lt.startAt);Ot.push(ei.value),Ut&&(Ut=ei.inclusive)}return new se(Ot,Ut)}(y,p),U=function(lt,ot){const Ot=[];let Ut=!0;for(const En of yl(ot)){const ei=0===En.kind?c(lt,En.fieldPath,lt.endAt):u(lt,En.fieldPath,lt.endAt);Ot.push(ei.value),Ut&&(Ut=ei.inclusive)}return new se(Ot,Ut)}(y,p),Y=this.nn(p,y,O),re=this.nn(p,y,U),Ge=this.sn(p,y,A),et=this.rn(p.indexId,T,Y,O.inclusive,re,U.inclusive,Ge);return pe.forEach(et,lt=>r.J(lt,t.limit).next(ot=>{ot.forEach(Ot=>{const Ut=ut.fromSegments(Ot.documentKey);l.has(Ut)||(l=l.add(Ut),d.push(Ut))})}))}).next(()=>d)}return pe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,d){const p=(null!=t?t.length:1)*Math.max(r.length,a.length),y=p/(null!=t?t.length:1),C=[];for(let T=0;T<p;++T){const A=t?this.on(t[T/y]):lT,O=this.un(e,A,r[T%y],i),U=this.cn(e,A,a[T%y],l),Y=d.map(re=>this.un(e,A,re,!0));C.push(...this.createRange(O,U,Y))}return C}un(e,t,r,i){const a=new Kf(e,ut.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Kf(e,ut.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new S$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;return pe.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let d=new Kn(Mr.comparator),p=!1;for(const y of l.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?p=!0:d=d.add(C.field))}for(const y of l.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new cw;for(const i of yl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);qf.Te.ce(a,l)}return r.$e()}on(e){const t=new cw;return qf.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new cw;return qf.Te.ce(fa(this.databaseId,t),r.qe(function(i){const a=yl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new cw);let a=0;for(const l of yl(e)){const d=r[a++];for(const p of i)if(this.ln(t,l.fieldPath)&&Lf(d))i=this.fn(i,l,d);else{const y=p.qe(l.kind);qf.Te.ce(d,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const p=new cw;p.seed(d.$e()),qf.Te.ce(l,p.qe(t.kind)),a.push(p)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof h&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=cT(e),i=hw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return pe.forEach(a,d=>i.get([d.indexId,this.uid]).next(p=>{l.push(function(y,C){const T=C?new Qc(C.sequenceNumber,new qi(zf(C.readTime),new ut(au(C.documentKey)),C.largestBatchId)):Qc.empty(),A=y.fields.map(([O,U])=>new HE(Mr.fromServerFormat(O),U));return new jE(y.indexId,y.collectionGroup,A,T)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:tn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=cT(e),a=hw(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>pe.forEach(d,p=>a.put(S1(p.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?pe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),pe.forEach(d,p=>this.wn(e,i,p).next(y=>{const C=this.mn(a,p);return y.isEqual(C)?pe.resolve():this.gn(e,a,p,y,C)}))))})}yn(e,t,r,i){return dw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return dw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=dw(e);let a=new Kn(Zf);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,d)=>{a=a.add(new Kf(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}mn(e,t){let r=new Kn(Zf);const i=this.an(t,e);if(null==i)return r;const a=Wm(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Lf(l))for(const d of l.arrayValue.values||[])r=r.add(new Kf(t.indexId,e.key,this.on(d),i))}else r=r.add(new Kf(t.indexId,e.key,lT,i));return r}gn(e,t,r,i,a){We("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,y,C,T){const A=d.getIterator(),O=p.getIterator();let U=wl(A),Y=wl(O);for(;U||Y;){let re=!1,Ge=!1;if(U&&Y){const et=y(U,Y);et<0?Ge=!0:et>0&&(re=!0)}else null!=U?Ge=!0:re=!0;re?(C(Y),Y=wl(O)):Ge?(T(U),U=wl(A)):(U=wl(A),Y=wl(O))}}(i,a,Zf,d=>{l.push(this.yn(e,t,r,d))},d=>{l.push(this.pn(e,t,r,d))}),pe.waitFor(l)}_n(e){let t=1;return hw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>Zf(l,d)).filter((l,d,p)=>!d||0!==Zf(l,p[d-1]));const i=[];i.push(e);for(const l of r){const d=Zf(l,e),p=Zf(l,t);if(0===d)i[0]=e.Ke();else if(d>0&&p<0)i.push(l),i.push(l.Ke());else if(p>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,lT,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,lT,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(P1)}getMinOffset(e,t){return pe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||yt())).next(P1)}}function N1(n){return bi(n,"collectionParents")}function dw(n){return bi(n,"indexEntries")}function cT(n){return bi(n,"indexConfiguration")}function hw(n){return bi(n,"indexState")}function P1(n){Kt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;zm(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qi(e.readTime,e.documentKey,t)}const k1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ns(e,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function O1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=r.Z({range:l},(C,T,A)=>(d++,A.delete()));a.push(p.next(()=>{Kt(1===d)}));const y=[];for(const C of t.mutations){const T=v1(e,C.key.path,t.batchId);a.push(i.delete(T)),y.push(C.key)}return pe.waitFor(a).next(()=>y)}function dT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw yt();e=n.noDocument}return JSON.stringify(e).length}Ns.DEFAULT_COLLECTION_PERCENTILE=10,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ns.DEFAULT=new Ns(41943040,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ns.DISABLED=new Ns(-1,0,0);class hT{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Kt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new hT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return id(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=a_(e),l=id(e);return l.add({}).next(d=>{Kt("number"==typeof d);const p=new sR(d,t,r,i),y=function(A,O,U){const Y=U.baseMutations.map(Ge=>aw(A.re,Ge)),re=U.mutations.map(Ge=>aw(A.re,Ge));return{userId:O,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:Y,mutations:re}}(this.It,this.userId,p),C=[];let T=new Kn((A,O)=>tn(A.canonicalString(),O.canonicalString()));for(const A of i){const O=v1(this.userId,A.key.path,d);T=T.add(A.key.path.popLast()),C.push(l.put(y)),C.push(a.put(O,i$))}return T.forEach(A=>{C.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),pe.waitFor(C).next(()=>p)})}lookupMutationBatch(e,t){return id(e).get(t).next(r=>r?(Kt(r.userId===this.userId),Gf(this.It,r)):null)}Tn(e,t){return this.In[t]?pe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return id(e).Z({index:"userMutationsIndex",range:i},(l,d,p)=>{d.userId===this.userId&&(Kt(d.batchId>=r),a=Gf(this.It,d)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return id(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return id(e).W("userMutationsIndex",t).next(r=>r.map(i=>Gf(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=oT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return a_(e).Z({range:i},(l,d,p)=>{const[y,C,T]=l,A=au(C);if(y===this.userId&&t.path.isEqual(A))return id(e).get(T).next(O=>{if(!O)throw yt();Kt(O.userId===this.userId),a.push(Gf(this.It,O))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(tn);const i=[];return t.forEach(a=>{const l=oT(this.userId,a.path),d=IDBKeyRange.lowerBound(l),p=a_(e).Z({range:d},(y,C,T)=>{const[A,O,U]=y,Y=au(O);A===this.userId&&a.path.isEqual(Y)?r=r.add(U):T.done()});i.push(p)}),pe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=oT(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Kn(tn);return a_(e).Z({range:l},(p,y,C)=>{const[T,A,O]=p,U=au(A);T===this.userId&&r.isPrefixOf(U)?U.length===i&&(d=d.add(O)):C.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(id(e).get(a).next(l=>{if(null===l)throw yt();Kt(l.userId===this.userId),r.push(Gf(this.It,l))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return O1(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return a_(e).Z({range:r},(a,l,d)=>{if(a[0]===this.userId){const p=au(a[1]);i.push(p)}else d.done()}).next(()=>{Kt(0===i.length)})})}containsKey(e,t){return F1(e,this.userId,t)}Rn(e){return L1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function F1(n,e,t){const r=oT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return a_(n).Z({range:a,X:!0},(d,p,y)=>{const[C,T,A]=d;C===e&&T===i&&(l=!0),y.done()}).next(()=>l)}function id(n){return bi(n,"mutations")}function a_(n){return bi(n,"documentMutations")}function L1(n){return bi(n,"mutationQueues")}class Yf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Yf(0)}static vn(){return new Yf(-1)}}class R${constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Yf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Yt.fromTimestamp(new yr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>u_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Kt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return u_(e).Z((l,d)=>{const p=uw(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,a.push(this.removeTargetData(e,p)))}).next(()=>pe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return u_(e).Z((r,i)=>{const a=uw(i);t(a)})}Vn(e){return V1(e).get("targetGlobalKey").next(t=>(Kt(null!==t),t))}Sn(e,t){return V1(e).put("targetGlobalKey",t)}Dn(e,t){return u_(e).put(T1(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ed(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return u_(e).Z({range:i,index:"queryTargetsIndex"},(l,d,p)=>{const y=uw(d);Xm(t,y.target)&&(a=y,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=sd(e);return t.forEach(l=>{const d=as(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=sd(e);return pe.forEach(t,a=>{const l=as(a.path);return pe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=sd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=sd(e);let a=mn();return i.Z({range:r,X:!0},(l,d,p)=>{const y=au(l[1]),C=new ut(y);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=as(t.path),i=IDBKeyRange.bound([r],[Po(r)],!1,!0);let a=0;return sd(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,d],p,y)=>{0!==l&&(a++,y.done())}).next(()=>a>0)}se(e,t){return u_(e).get(t).next(r=>r?uw(r):null)}}function u_(n){return bi(n,"targets")}function V1(n){return bi(n,"targetGlobal")}function sd(n){return bi(n,"targetDocuments")}function U1([n,e],[t,r]){const i=tn(n,t);return 0===i?tn(e,r):i}class x${constructor(e){this.xn=e,this.buffer=new Kn(U1),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();U1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class N${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;We("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){vl(r)?We("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ca(r)}yield t.Fn(3e5)}))}}class P${constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(os.at);const r=new x$(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(k1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k1):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,d,p,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),UE()<=Qs.in.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(p-d)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class k${constructor(e,t){this.db=e,this.garbageCollector=new P$(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return fT(e,r)}removeReference(e,t,r){return fT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fT(e,t)}Gn(e,t){return function(r,i){let a=!1;return L1(r).tt(l=>F1(r,l,i).next(d=>(d&&(a=!0),pe.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,d)=>{if(d<=t){const p=this.Gn(e,l).next(y=>{if(!y)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Yt.min()),sd(e).delete([0,as(l.path)])))});i.push(p)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fT(e,t)}Kn(e,t){const r=sd(e);let i,a=os.at;return r.Z({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:y})=>{0===l?(a!==os.at&&t(new ut(au(i)),a),a=y,i=p):a=os.at}).next(()=>{a!==os.at&&t(new ut(au(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fT(n,e){return sd(n).put((r=n.currentSequenceNumber,{targetId:0,path:as(e.path),sequenceNumber:r}));var r}class B1{constructor(){this.changes=new nd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class O${constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qf(e).put(r)}removeEntry(e,t,r){return Qf(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],aT(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=hr.newInvalidDocument(t);return Qf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fw(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:hr.newInvalidDocument(t)};return Qf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(fw(t))},(i,a)=>{r={document:this.jn(t,a),size:dT(a)}}).next(()=>r)}getEntries(e,t){let r=xs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=xs(),i=new cr(ut.comparator);return this.zn(e,t,(a,l)=>{const d=this.jn(a,l);r=r.insert(a,d),i=i.insert(a,dT(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return pe.resolve();let i=new Kn(W1);t.forEach(p=>i=i.add(p));const a=IDBKeyRange.bound(fw(i.first()),fw(i.last())),l=i.getIterator();let d=l.getNext();return Qf(e).Z({index:"documentKeyIndex",range:a},(p,y,C)=>{const T=ut.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&W1(d,T)<0;)r(d,null),d=l.getNext();d&&d.isEqual(T)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?C.j(fw(d)):C.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),aT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qf(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=xs();for(const p of l){const y=this.jn(ut.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=xs();const l=H1(t,r),d=H1(t,qi.max());return Qf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,y,C)=>{const T=this.jn(ut.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(T.key,T),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new F$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return j1(e).get("remoteDocumentGlobalKey").next(t=>(Kt(!!t),t))}Qn(e,t){return j1(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function w$(n,e){let t;if(e.document)t=h1(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ut.fromSegments(e.noDocument.path),i=zf(e.noDocument.readTime);t=hr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return yt();{const r=ut.fromSegments(e.unknownDocument.path),i=zf(e.unknownDocument.version);t=hr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new yr(r[0],r[1]);return Yt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Yt.min()))return r}return hr.newInvalidDocument(e)}}function $1(n){return new O$(n)}class F$ extends B1{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new nd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kn((a,l)=>tn(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const p=b1(this.Yn.It,l);i=i.add(a.path.popLast()),r+=dT(p)-d.size,t.push(this.Yn.addEntry(e,a,p))}else if(r-=d.size,this.trackRemovals){const p=b1(this.Yn.It,l.convertToNoDocument(Yt.min()));t.push(this.Yn.addEntry(e,a,p))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function j1(n){return bi(n,"remoteDocumentGlobal")}function Qf(n){return bi(n,"remoteDocumentsV14")}function fw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function H1(n,e){const t=e.documentKey.path.toArray();return[n,aT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function W1(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=tn(t[a],r[a]),i)return i;return i=tn(t.length,r.length),i||(i=tn(t[t.length-2],r[r.length-2]),i||tn(t[t.length-1],r[r.length-1]))}class L${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class z1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&JE(r.mutation,i,Li.empty(),yr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mn()){const i=su();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=ew();return a.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=su();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let a=xs();const l=tw(),d=tw();return t.forEach((p,y)=>{const C=r.get(y.key);i.has(y.key)&&(void 0===C||C.mutation instanceof Cl)?a=a.insert(y.key,y):void 0!==C&&(l.set(y.key,C.mutation.getFieldMask()),JE(C.mutation,y,C.mutation.getFieldMask(),yr.now()))}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,C)=>l.set(y,C)),t.forEach((y,C)=>{var T;return d.set(y,new L$(C,null!==(T=l.get(y))&&void 0!==T?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=tw();let i=new cr((l,d)=>l-d),a=mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let C=r.get(p)||Li.empty();C=d.applyToLocalView(y,C),r.set(p,C);const T=(i.get(d.batchId)||mn()).add(p);i=i.insert(d.batchId,T)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,C=p.value,T=e1();C.forEach(A=>{if(!a.has(A)){const O=zO(t.get(A),r.get(A));null!==O&&T.set(A,O),a=a.add(A)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,T))}return pe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ut.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Uf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):pe.resolve(su());let d=-1,p=a;return l.next(y=>pe.forEach(y,(C,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(C)?pe.resolve():this.getBaseDocument(e,C,T).next(A=>{p=p.insert(C,A)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,mn())).next(C=>({batchId:d,changes:JO(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(r=>{let i=ew();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=ew();return this.indexManager.getCollectionParents(e,i).next(l=>pe.forEach(l,d=>{const p=(y=t,C=d.child(i),new St(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((C,T)=>{a=a.insert(C,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,hr.newInvalidDocument(y)))});let l=ew();return i.forEach((d,p)=>{const y=a.get(d);void 0!==y&&JE(y.mutation,p,Li.empty(),yr.now()),$f(t,p)&&(l=l.insert(d,p))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):pe.resolve(hr.newInvalidDocument(t))}}class V${constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return pe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ci(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:uR(r.bundledQuery),readTime:Ci(r.readTime)}),pe.resolve();var r}}class U${constructor(){this.overlays=new cr(ut.comparator),this.es=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=su();return pe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=su(),a=t.length+1,l=new ut(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new cr((y,C)=>y-C);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=a.get(y.largestBatchId);null===C&&(C=su(),a=a.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const d=su(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>d.set(y,C)),!(d.size()>=i)););return pe.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new aR(t,r));let a=this.es.get(t);void 0===a&&(a=mn(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class dR{constructor(){this.ns=new Kn(Ti.ss),this.rs=new Kn(Ti.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ti(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ut(new Sn([])),r=new Ti(t,e),i=new Ti(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ut(new Sn([])),r=new Ti(t,e),i=new Ti(t,e+1);let a=mn();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ti(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ut.comparator(e.key,t.key)||tn(e._s,t._s)}static os(e,t){return tn(e._s,t._s)||ut.comparator(e.key,t.key)}}class B${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Kn(Ti.ss)}checkEmpty(e){return pe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new sR(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.gs=this.gs.add(new Ti(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return pe.resolve(l)}lookupMutationBatch(e,t){return pe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return pe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const d=this.ys(l._s);a.push(d)}),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn(tn);return t.forEach(i=>{const a=new Ti(i,0),l=new Ti(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],d=>{r=r.add(d._s)})}),pe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ut.isDocumentKey(a)||(a=a.child(""));const l=new Ti(new ut(a),0);let d=new Kn(tn);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p._s)),!0)},l),pe.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Kt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return pe.forEach(t.mutations,i=>{const a=new Ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ti(t,0),i=this.gs.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $${constructor(e){this.Es=e,this.docs=new cr(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=xs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():hr.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=xs();const a=new ut(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||zm(GE(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){yt()}As(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new j$(this)}getSize(e){return pe.resolve(this.size)}}class j$ extends B1{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class H${constructor(e){this.persistence=e,this.Rs=new nd(t=>ed(t),Xm),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new dR,this.targetCount=0,this.vs=Yf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),pe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Yf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Dn(t),pe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),pe.waitFor(a).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.Ps.containsKey(t))}}class G1{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new os(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new H$(this),this.indexManager=new A$,this.remoteDocumentCache=new $$(r=>this.referenceDelegate.xs(r)),this.It=new C1(t),this.Ns=new V$(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new B$(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){We("MemoryPersistence","Starting transaction:",e);const i=new W$(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return pe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class W$ extends Rf{constructor(e){super(),this.currentSequenceNumber=e}}class pT{constructor(e){this.persistence=e,this.Fs=new dR,this.$s=null}static Bs(e){return new pT(e)}get Ls(){if(this.$s)return this.$s;throw yt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Ls,r=>{const i=ut.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Yt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return pe.or([()=>pe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class z${constructor(e){this.It=e}$(e,t,r,i){const a=new xf("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y1,{unique:!0}),d.createObjectStore("documentMutations"),q1(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),q1(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,p){return p.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",y1,{unique:!0});const C=p.store("mutations"),T=y.map(A=>C.put(A));return pe.waitFor(T)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:m$});p.createIndex("collectionPathOverlayIndex",_$,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",y$,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:s$});p.createIndex("documentKeyIndex",o$),p.createIndex("collectionGroupIndex",a$)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:h$}).createIndex("sequenceNumberIndex",f$,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:p$}).createIndex("documentKeyIndex",g$,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=dT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>pe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>pe.forEach(d,p=>{Kt(p.userId===a.userId);const y=Gf(this.It,p);return O1(e,a.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,d)=>{const p=new Sn(l),y=[0,as(p)];a.push(t.get(y).next(C=>C?pe.resolve():t.put({targetId:0,path:as(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:d$});const r=t.store("collectionParents"),i=new cR,a=l=>{if(i.add(l)){const d=l.lastSegment(),p=l.popLast();return r.put({collectionId:d,parent:as(p)})}};return t.store("remoteDocuments").Z({X:!0},(l,d)=>{const p=new Sn(l);return a(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,d,p],y)=>{const C=au(d);return a(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=uw(i),l=T1(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const d=t.store("remoteDocumentsV14"),p=(y=l,y.document?new ut(Sn.fromString(y.document.name).popFirst(5)):y.noDocument?ut.fromSegments(y.noDocument.path):y.unknownDocument?ut.fromSegments(y.unknownDocument.path):yt()).path.toArray();var y;const C={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(C))}).next(()=>pe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=$1(this.It),a=new G1(pT.Bs,this.It.re);return r.W().next(l=>{const d=new Map;return l.forEach(p=>{var y;let C=null!==(y=d.get(p.userId))&&void 0!==y?y:mn();Gf(this.It,p).keys().forEach(T=>C=C.add(T)),d.set(p.userId,C)}),pe.forEach(d,(p,y)=>{const C=new ci(y),T=uT.oe(this.It,C),A=a.getIndexManager(C),O=hT.oe(C,this.It,A,a.referenceDelegate);return new z1(i,O,T,A).recalculateAndSaveOverlaysForDocumentKeys(new iR(t,os.at),p).next()})})}}function q1(n){n.createObjectStore("targetDocuments",{keyPath:l$}).createIndex("documentTargetsIndex",c$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u$,{unique:!0}),n.createObjectStore("targetGlobal")}const hR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fR{constructor(e,t,r,i,a,l,d,p,y,C,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=d,this.Js=y,this.Ys=C,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=A=>Promise.resolve(),!fR.C())throw new je(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k$(this,i),this.ii=t+"main",this.It=new C1(p),this.ri=new Js(this.ii,this.Xs,new z$(this.It)),this.Cs=new R$(this.referenceDelegate,this.It),this.remoteDocumentCache=$1(this.It),this.Ns=new I$,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new je(_e.FAILED_PRECONDITION,hR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new os(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(vl(e))return We("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return We("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return pw(e).get("owner").next(t=>pe.resolve(this.mi(t)))}gi(e){return gT(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=bi(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),d=a.filter(p=>-1===l.indexOf(p));return pe.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?pe.resolve(!0):pw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new je(_e.FAILED_PRECONDITION,hR);return!1}}return!(!this.networkEnabled||!this.inForeground)||gT(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&We("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new iR(t,os.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>gT(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return hT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new M$(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return uT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){We("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?E$:14===l?I1:13===l?w1:12===l?v$:11===l?E1:void yt();var l;let d;return this.ri.runTransaction(e,i,a,p=>(d=new iR(p,this.Ss?this.Ss.next():os.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new je(_e.FAILED_PRECONDITION,Mf);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return pw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new je(_e.FAILED_PRECONDITION,hR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pw(e).put("owner",t)}static C(){return Js.C()}_i(e){const t=pw(e);return t.get("owner").next(r=>this.mi(r)?(We("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,J.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return We("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pw(n){return bi(n,"owner")}function gT(n){return bi(n,"clientMetadata")}function pR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=mn(),i=mn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new gR(e,t.fromCache,r,i)}}class K1{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(kn(t))return pe.resolve(null);let r=gi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=td(t,null,"F"),r=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=mn(...a);return this.Ni.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Fi(t,d);return this.$i(t,y,l,p.readTime)?this.ki(e,td(t,null,"F")):this.Bi(e,y,t,p)}))})))}Oi(e,t,r,i){return kn(t)||i.isEqual(Yt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(UE()<=Qs.in.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bf(t)),this.Bi(e,l,t,zE(i,-1)))})}Fi(e,t){let r=new Kn(FO(e));return t.forEach((i,a)=>{$f(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return UE()<=Qs.in.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",Bf(t)),this.Ni.getDocumentsMatchingQuery(e,t,qi.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class G${constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new cr(tn),this.qi=new nd(a=>ed(a),Xm),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new z1(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Z1(n,e,t,r){return new G$(n,e,t,r)}function Y1(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,ye.Z)(function*(n,e){const t=ht(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let p=mn();for(const y of i){l.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of a){d.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ji:y,removedBatchIds:l,addedBatchIds:d}))})})}),mR.apply(this,arguments)}function q$(n,e){const t=ht(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,d,p,y){const C=p.batch,T=C.keys();let A=pe.resolve();return T.forEach(O=>{A=A.next(()=>y.getEntry(d,O)).next(U=>{const Y=p.docVersions.get(O);Kt(null!==Y),U.version.compareTo(Y)<0&&(C.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),y.addEntry(U)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(d,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=mn();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Q1(n){const e=ht(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function K$(n,e){const t=ht(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((C,T)=>{const A=i.get(T);if(!A)return;d.push(t.Cs.removeMatchingKeys(a,C.removedDocuments,T).next(()=>t.Cs.addMatchingKeys(a,C.addedDocuments,T)));let O=A.withSequenceNumber(a.currentSequenceNumber);var U,Y,re;e.targetMismatches.has(T)?O=O.withResumeToken(Xr.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):C.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(C.resumeToken,r)),i=i.insert(T,O),Y=O,re=C,(0===(U=A).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(a,O))});let p=xs(),y=mn();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),d.push(X1(a,l,e.documentUpdates).next(C=>{p=C.Wi,y=C.zi})),!r.isEqual(Yt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(a).next(T=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(C)}return pe.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(t.Ui=i,a))}function X1(n,e,t){let r=mn(),i=mn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=xs();return t.forEach((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Yt.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):We("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Wi:l,zi:i}})}function Z$(n,e){const t=ht(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l_(n,e){const t=ht(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,pe.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new rd(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function c_(n,e,t){return _R.apply(this,arguments)}function _R(){return _R=(0,ye.Z)(function*(n,e,t){const r=ht(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!vl(l))throw l;We("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),_R.apply(this,arguments)}function mT(n,e,t){const r=ht(n);let i=Yt.min(),a=mn();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,p,y){const C=ht(d),T=C.qi.get(y);return void 0!==T?pe.resolve(C.Ui.get(T)):C.Cs.getTargetData(p,y)}(r,l,gi(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{a=p})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Yt.min(),t?a:mn())).next(d=>(tF(r,e_(e),d),{documents:d,Hi:a})))}function J1(n,e){const t=ht(n),r=ht(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function eF(n,e){const t=ht(n),r=t.Ki.get(e)||Yt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,zE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(tF(t,e,i),i))}function tF(n,e,t){let r=n.Ki.get(e)||Yt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function yR(){return yR=(0,ye.Z)(function*(n,e,t,r){const i=ht(n);let a=mn(),l=xs();for(const y of t){const C=e.Ji(y.metadata.name);y.document&&(a=a.add(C));const T=e.Yi(y);T.setReadTime(e.Xi(y.metadata.readTime)),l=l.insert(C,T)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield l_(i,(y=r,gi(Ht(Sn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>X1(y,d,l).next(C=>(d.apply(y),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Cs.addMatchingKeys(y,a,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,C.Wi,C.zi)).next(()=>C.Wi)))}),yR.apply(this,arguments)}function Q$(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,ye.Z)(function*(n,e,t=mn()){const r=yield l_(n,gi(uR(e.bundledQuery))),i=ht(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ci(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const d=r.withResumeToken(Xr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(a,d).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),vR.apply(this,arguments)}function nF(n,e){return`firestore_clients_${n}_${e}`}function rF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ER(n,e){return`firestore_targets_${n}_${e}`}class _T{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new je(i.error.code,i.error.message))),l?new _T(e,t,i.state,a):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new je(r.error.code,r.error.message))),a?new gw(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=iT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=Xb(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new yT(e,a):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wR(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class IR{constructor(){this.activeTargetIds=iT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CR{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new cr(tn),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=nF(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new IR),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(nF(e.persistenceKey,i));if(a){const l=yT.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ER(this.persistenceKey,e));if(r){const i=gw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ER(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return We("SharedClientState","READ",e,t),t}setItem(e,t){We("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){We("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(We("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=os.at;if(null!=a)try{const d=JSON.parse(a);Kt("number"==typeof d),l=d}catch(d){zr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==os.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new _T(this.currentUser,e,t,r),a=rF(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=rF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=ER(this.persistenceKey,e),a=new gw(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return yT.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return _T.Zi(new ci(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return gw.Zi(i,t)}yr(e){return wR.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);We("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],d=[];return a.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{a.has(p)||d.push(p)}),this.syncEngine.Br(l,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=iT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class iF{constructor(){this.Lr=new IR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new IR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class X${qr(e){}shutdown(){}}class sF{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){We("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){We("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const J$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ej{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class tj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);We("RestConnection","Sending: ",l,r);const d={};return this.lo(d,i,a),this.fo(e,l,d,r).then(p=>(We("RestConnection","Received: ",p),p),p=>{throw fi("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${J$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const d=new AO;d.setWithCredentials(!0),d.listenOnce(jM.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case LE.NO_ERROR:const y=d.getResponseJson();We("Connection","XHR received:",JSON.stringify(y)),a(y);break;case LE.TIMEOUT:We("Connection",'RPC "'+e+'" timed out'),l(new je(_e.DEADLINE_EXCEEDED,"Request time out"));break;case LE.HTTP_ERROR:const C=d.getStatus();if(We("Connection",'RPC "'+e+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const T=d.getResponseJson().error;if(T&&T.status&&T.message){const A=function(O){const U=O.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(U)>=0?U:_e.UNKNOWN}(T.status);l(new je(A,T.message))}else l(new je(_e.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new je(_e.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{We("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=DO(),l=$M(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new SO({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");We("Connection","Creating WebChannel: "+p,d);const y=a.createWebChannel(p,d);let C=!1,T=!1;const A=new ej({Hr:U=>{T?We("Connection","Not sending because WebChannel is closed:",U):(C||(We("Connection","Opening WebChannel transport."),y.open(),C=!0),We("Connection","WebChannel sending:",U),y.send(U))},Jr:()=>y.close()}),O=(U,Y,re)=>{U.listen(Y,Ge=>{try{re(Ge)}catch(et){setTimeout(()=>{throw et},0)}})};return O(y,VE.EventType.OPEN,()=>{T||We("Connection","WebChannel transport opened.")}),O(y,VE.EventType.CLOSE,()=>{T||(T=!0,We("Connection","WebChannel transport closed"),A.io())}),O(y,VE.EventType.ERROR,U=>{T||(T=!0,fi("Connection","WebChannel transport errored:",U),A.io(new je(_e.UNAVAILABLE,"The operation could not be completed")))}),O(y,VE.EventType.MESSAGE,U=>{var Y;if(!T){const re=U.data[0];Kt(!!re);const Ge=re,et=Ge.error||(null===(Y=Ge[0])||void 0===Y?void 0:Y.error);if(et){We("Connection","WebChannel received error:",et);const lt=et.status;let ot=function(Ut){const En=di[Ut];if(void 0!==En)return QO(En)}(lt),Ot=et.message;void 0===ot&&(ot=_e.INTERNAL,Ot="Unknown error status: "+lt+" with message "+et.message),T=!0,A.io(new je(ot,Ot)),y.close()}else We("Connection","WebChannel received:",re),A.ro(re)}}),O(l,jm.STAT_EVENT,U=>{U.stat===Lb.PROXY?We("Connection","Detected buffering proxy"):U.stat===Lb.NOPROXY&&We("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.so()},0),A}}function oF(){return typeof window<"u"?window:null}function vT(){return typeof document<"u"?document:null}function mw(n){return new G2(n,!0)}class bR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&We("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class aF{constructor(e,t,r,i,a,l,d,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new bR(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new je(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return We("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(We("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nj extends aF{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Z2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:yt(),i=e.targetChange.targetIds||[],a=function(p,y){return p.gt?(Kt(void 0===y||"string"==typeof y),Xr.fromBase64String(y||"")):(Kt(void 0===y||y instanceof Uint8Array),Xr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(p){const y=void 0===p.code?_e.UNKNOWN:QO(p.code);return new je(y,p.message||"")}(l);t=new n1(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=ou(n,r.document.name),a=Ci(r.document.updateTime),l=new Ii({mapValue:{fields:r.document.fields}}),d=hr.newFoundDocument(i,a,l);t=new sT(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=ou(n,r.document),a=r.readTime?Ci(r.readTime):Yt.min(),l=hr.newNoDocument(i,a);t=new sT([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ou(n,r.document);t=new sT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return yt();{const r=e.filter,a=new V2(r.count||0);t=new t1(r.targetId,a)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Yt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Yt.min():a.readTime?Ci(a.readTime):Yt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=ow(this.It),t.addTarget=function(i,a){let l;const d=a.target;return l=s(d)?{documents:f1(i,d)}:{query:rR(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=a1(i,a.resumeToken):a.snapshotVersion.compareTo(Yt.min())>0&&(l.readTime=iw(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Q2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=ow(this.It),t.removeTarget=e,this.Bo(t)}}class rj extends aF{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Y2(n,e){return n&&n.length>0?(Kt(void 0!==e),n.map(t=>function(r,i){let a=Ci(r.updateTime?r.updateTime:i);return a.isEqual(Yt.min())&&(a=Ci(i)),new O2(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.Zo(r,t)}return Kt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ow(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>aw(this.It,r))};this.Bo(t)}}class ij extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new je(_e.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new je(_e.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class oj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(zr(t),this.ou=!1):We("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class aj{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(d=>{r.enqueueAndForget((0,ye.Z)(function*(){var p;bl(l)&&(We("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,ye.Z)(function*(y){const C=ht(y);C._u.add(4),yield d_(C),C.gu.set("Unknown"),C._u.delete(4),yield _w(C)}),function(y){return p.apply(this,arguments)})(l))}))}),this.gu=new oj(r,i)}}function _w(n){return DR.apply(this,arguments)}function DR(){return DR=(0,ye.Z)(function*(n){if(bl(n))for(const e of n.wu)yield e(!0)}),DR.apply(this,arguments)}function d_(n){return SR.apply(this,arguments)}function SR(){return SR=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),SR.apply(this,arguments)}function ET(n,e){const t=ht(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),RR(t)?MR(t):f_(t).ko()&&AR(t,e))}function yw(n,e){const t=ht(n),r=f_(t);t.du.delete(e),r.ko()&&uF(t,e),0===t.du.size&&(r.ko()?r.Fo():bl(t)&&t.gu.set("Unknown"))}function AR(n,e){n.yu.Mt(e.targetId),f_(n).zo(e)}function uF(n,e){n.yu.Mt(e),f_(n).Ho(e)}function MR(n){n.yu=new H2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),f_(n).start(),n.gu.uu()}function RR(n){return bl(n)&&!f_(n).No()&&n.du.size>0}function bl(n){return 0===ht(n)._u.size}function lF(n){n.yu=void 0}function uj(n){return xR.apply(this,arguments)}function xR(){return xR=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{AR(n,e)})}),xR.apply(this,arguments)}function lj(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,ye.Z)(function*(n,e){lF(n),RR(n)?(n.gu.hu(e),MR(n)):n.gu.set("Unknown")}),NR.apply(this,arguments)}function cj(n,e,t){return PR.apply(this,arguments)}function PR(){return PR=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof n1&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.du.delete(d),i.yu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){We("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wT(n,r)}else if(e instanceof sT?n.yu.Gt(e):e instanceof t1?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Yt.min()))try{const r=yield Q1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.du.get(p);y&&i.du.set(p,y.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const p=i.du.get(d);if(!p)return;i.du.set(d,p.withResumeToken(Xr.EMPTY_BYTE_STRING,p.snapshotVersion)),uF(i,d);const y=new rd(p.target,d,1,p.sequenceNumber);AR(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){We("RemoteStore","Failed to raise snapshot:",r),yield wT(n,r)}var r}),PR.apply(this,arguments)}function wT(n,e,t){return kR.apply(this,arguments)}function kR(){return kR=(0,ye.Z)(function*(n,e,t){if(!vl(e))throw e;n._u.add(1),yield d_(n),n.gu.set("Offline"),t||(t=()=>Q1(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){We("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield _w(n)}))}),kR.apply(this,arguments)}function cF(n,e){return e().catch(t=>wT(n,t,e))}function h_(n){return OR.apply(this,arguments)}function OR(){return OR=(0,ye.Z)(function*(n){const e=ht(n),t=od(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;dj(e);)try{const i=yield Z$(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,hj(e,i)}catch(i){yield wT(e,i)}dF(e)&&hF(e)}),OR.apply(this,arguments)}function dj(n){return bl(n)&&n.fu.length<10}function hj(n,e){n.fu.push(e);const t=od(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function dF(n){return bl(n)&&!od(n).No()&&n.fu.length>0}function hF(n){od(n).start()}function fj(n){return FR.apply(this,arguments)}function FR(){return FR=(0,ye.Z)(function*(n){od(n).eu()}),FR.apply(this,arguments)}function pj(n){return LR.apply(this,arguments)}function LR(){return LR=(0,ye.Z)(function*(n){const e=od(n);for(const t of n.fu)e.Xo(t.mutations)}),LR.apply(this,arguments)}function gj(n,e,t){return VR.apply(this,arguments)}function VR(){return VR=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),i=oR.from(r,e,t);yield cF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield h_(n)}),VR.apply(this,arguments)}function mj(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,ye.Z)(function*(n,e){var t;e&&od(n).Yo&&(yield(t=(0,ye.Z)(function*(r,i){if(YO(a=i.code)&&a!==_e.ABORTED){const l=r.fu.shift();od(r).Mo(),yield cF(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield h_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),dF(n)&&hF(n)}),UR.apply(this,arguments)}function fF(n,e){return BR.apply(this,arguments)}function BR(){return BR=(0,ye.Z)(function*(n,e){const t=ht(n);t.asyncQueue.verifyOperationInProgress(),We("RemoteStore","RemoteStore received new credentials");const r=bl(t);t._u.add(3),yield d_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield _w(t)}),BR.apply(this,arguments)}function $R(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,ye.Z)(function*(n,e){const t=ht(n);e?(t._u.delete(2),yield _w(t)):e||(t._u.add(2),yield d_(t),t.gu.set("Unknown"))}),jR.apply(this,arguments)}function f_(n){return n.pu||(n.pu=function(e,t,r){const i=ht(e);return i.su(),new nj(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:uj.bind(null,n),Zr:lj.bind(null,n),Wo:cj.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Mo(),RR(n)?MR(n):n.gu.set("Unknown")):(yield n.pu.stop(),lF(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function od(n){return n.Iu||(n.Iu=function(e,t,r){const i=ht(e);return i.su(),new rj(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:fj.bind(null,n),Zr:mj.bind(null,n),tu:pj.bind(null,n),Zo:gj.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Mo(),yield h_(n)):(yield n.Iu.stop(),n.fu.length>0&&(We("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class HR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new HR(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function p_(n,e){if(zr("AsyncQueue",`${e}: ${n}`),vl(n))return new je(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class g_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ut.comparator(t.key,r.key):(t,r)=>ut.comparator(t.key,r.key),this.keyedMap=ew(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new g_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof g_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new g_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pF{constructor(){this.Tu=new cr(ut.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):yt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class m_{constructor(e,t,r,i,a,l,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new m_(e,t,g_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Il(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class _j{constructor(){this.Au=void 0,this.listeners=[]}}class yj{constructor(){this.queries=new nd(e=>Jm(e),Il),this.onlineState="Unknown",this.Ru=new Set}}function WR(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,ye.Z)(function*(n,e){const t=ht(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new _j),i)try{a.Au=yield t.onListen(r)}catch(l){const d=p_(l,`Initialization of query '${Bf(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&KR(t)}),zR.apply(this,arguments)}function GR(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,ye.Z)(function*(n,e){const t=ht(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),qR.apply(this,arguments)}function vj(n,e){const t=ht(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Pu(i)&&(r=!0);l.Au=i}}r&&KR(t)}function Ej(n,e,t){const r=ht(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function KR(n){n.Ru.forEach(e=>{e.next()})}class ZR{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new m_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=m_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class wj{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class gF{constructor(e){this.It=e}Ji(e){return ou(this.It,e)}Yi(e){return e.metadata.exists?h1(this.It,e.document,!1):hr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ci(e)}}class Ij{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mF(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Sn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new gF(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||mn()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function Y$(n,e,t,r){return yR.apply(this,arguments)}(e.localStore,new gF(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield Q$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function mF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class _F{constructor(e){this.key=e}}class yF{constructor(e){this.key=e}}class vF{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=mn(),this.mutatedKeys=mn(),this.Gu=FO(e),this.Qu=new g_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new pF,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,T)=>{const A=i.get(C),O=$f(this.query,T)?T:null,U=!!A&&this.mutatedKeys.has(A.key),Y=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let re=!1;A&&O?A.data.isEqual(O.data)?U!==Y&&(r.track({type:3,doc:O}),re=!0):this.Hu(A,O)||(r.track({type:2,doc:O}),re=!0,(p&&this.Gu(O,p)>0||y&&this.Gu(O,y)<0)&&(d=!0)):!A&&O?(r.track({type:0,doc:O}),re=!0):A&&!O&&(r.track({type:1,doc:A}),re=!0,(p||y)&&(d=!0)),re&&(O?(l=l.add(O),a=Y?a.add(C):a.delete(C)):(l=l.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Qu:l,zu:r,$i:d,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((y,C)=>function(T,A){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return O(T)-O(A)}(y.type,C.type)||this.Gu(y.doc,C.doc)),this.Ju(r);const l=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==a.length||p?{snapshot:new m_(this.query,e.Qu,i,a,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new pF,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=mn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new yF(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new _F(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=mn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return m_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Cj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bj{constructor(e){this.key=e,this.nc=!1}}class Tj{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new nd(d=>Jm(d),Il),this.rc=new Map,this.oc=new Set,this.uc=new cr(ut.comparator),this.cc=new Map,this.ac=new dR,this.hc={},this.lc=new Map,this.fc=Yf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Dj(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,ye.Z)(function*(n,e){const t=vx(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield l_(t.localStore,gi(e));t.isPrimaryClient&&ET(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield QR(t,e,r,"current"===d,l.resumeToken)}return i}),YR.apply(this,arguments)}function QR(n,e,t,r,i){return XR.apply(this,arguments)}function XR(){return XR=(0,ye.Z)(function*(n,e,t,r,i){n._c=(T,A,O)=>{return(U=(0,ye.Z)(function*(Y,re,Ge,et){let lt=re.view.Wu(Ge);lt.$i&&(lt=yield mT(Y.localStore,re.query,!1).then(({documents:Ut})=>re.view.Wu(Ut,lt)));const ot=et&&et.targetChanges.get(re.targetId),Ot=re.view.applyChanges(lt,Y.isPrimaryClient,ot);return ux(Y,re.targetId,Ot.Xu),Ot.snapshot}),function(Y,re,Ge,et){return U.apply(this,arguments)})(n,T,A,O);var U};const a=yield mT(n.localStore,e,!0),l=new vF(e,a.Hi),d=l.Wu(a.documents),p=rw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(d,n.isPrimaryClient,p);ux(n,t,y.Xu);const C=new Cj(e,t,l);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),XR.apply(this,arguments)}function Sj(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,ye.Z)(function*(n,e){const t=ht(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Il(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield c_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),yw(t.remoteStore,r.targetId),__(t,r.targetId)}).catch(ca))):(__(t,r.targetId),yield c_(t.localStore,r.targetId,!0))}),JR.apply(this,arguments)}function ex(){return ex=(0,ye.Z)(function*(n,e,t){const r=Ex(n);try{const i=yield function(a,l){const d=ht(a),p=yr.now(),y=l.reduce((A,O)=>A.add(O.key),mn());let C,T;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let O=xs(),U=mn();return d.Gi.getEntries(A,y).next(Y=>{O=Y,O.forEach((re,Ge)=>{Ge.isValidDocument()||(U=U.add(re))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,O)).next(Y=>{C=Y;const re=[];for(const Ge of l){const et=L2(Ge,C.get(Ge.key).overlayedDocument);null!=et&&re.push(new Cl(Ge.key,et,eT(et.value.mapValue),Rr.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,re,l)}).next(Y=>{T=Y;const re=Y.applyToLocalDocumentSet(C,U);return d.documentOverlayCache.saveOverlays(A,Y.batchId,re)})}).then(()=>({batchId:T.batchId,changes:JO(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let p=a.hc[a.currentUser.toKey()];p||(p=new cr(tn)),p=p.insert(l,d),a.hc[a.currentUser.toKey()]=p}(r,i.batchId,t),yield Tl(r,i.changes),yield h_(r.remoteStore)}catch(i){const a=p_(i,"Failed to persist write");t.reject(a)}}),ex.apply(this,arguments)}function EF(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,ye.Z)(function*(n,e){const t=ht(n);try{const r=yield K$(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Kt(l.nc):i.removedDocuments.size>0&&(Kt(l.nc),l.nc=!1))}),yield Tl(t,r,e)}catch(r){yield ca(r)}}),tx.apply(this,arguments)}function wF(n,e,t){const r=ht(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=ht(a);d.onlineState=l;let p=!1;d.queries.forEach((y,C)=>{for(const T of C.listeners)T.bu(l)&&(p=!0)}),p&&KR(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mj(n,e,t){return nx.apply(this,arguments)}function nx(){return nx=(0,ye.Z)(function*(n,e,t){const r=ht(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new cr(ut.comparator);l=l.insert(a,hr.newNoDocument(a,Yt.min()));const d=mn().add(a),p=new nw(Yt.min(),new Map,new Kn(tn),l,d);yield EF(r,p),r.uc=r.uc.remove(a),r.cc.delete(e),lx(r)}else yield c_(r.localStore,e,!1).then(()=>__(r,e,t)).catch(ca)}),nx.apply(this,arguments)}function Rj(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,ye.Z)(function*(n,e){const t=ht(n),r=e.batch.batchId;try{const i=yield q$(t.localStore,e);ax(t,r,null),ox(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tl(t,i)}catch(i){yield ca(i)}}),rx.apply(this,arguments)}function xj(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,ye.Z)(function*(n,e,t){const r=ht(n);try{const i=yield function(a,l){const d=ht(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,l).next(C=>(Kt(null!==C),y=C.keys(),d.mutationQueue.removeMutationBatch(p,C))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);ax(r,e,t),ox(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tl(r,i)}catch(i){yield ca(i)}}),ix.apply(this,arguments)}function sx(){return sx=(0,ye.Z)(function*(n,e){const t=ht(n);bl(t.remoteStore)||We("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=ht(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=p_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),sx.apply(this,arguments)}function ox(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function ax(n,e,t){const r=ht(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function __(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||IF(n,r)})}function IF(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(yw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),lx(n))}function ux(n,e,t){for(const r of t)r instanceof _F?(n.ac.addReference(r.key,e),Pj(n,r)):r instanceof yF?(We("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||IF(n,r.key)):yt()}function Pj(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(We("SyncEngine","New document in limbo: "+t),n.oc.add(r),lx(n))}function lx(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ut(Sn.fromString(e)),r=n.fc.next();n.cc.set(r,new bj(t)),n.uc=n.uc.insert(t,r),ET(n.remoteStore,new rd(gi(Ht(t.path)),r,2,os.at))}}function Tl(n,e,t){return cx.apply(this,arguments)}function cx(){return cx=(0,ye.Z)(function*(n,e,t){const r=ht(n),i=[],a=[],l=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,p)=>{l.push(r._c(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const C=gR.Ci(p.targetId,y);a.push(C)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(d=(0,ye.Z)(function*(p,y){const C=ht(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>pe.forEach(y,A=>pe.forEach(A.Si,O=>C.persistence.referenceDelegate.addReference(T,A.targetId,O)).next(()=>pe.forEach(A.Di,O=>C.persistence.referenceDelegate.removeReference(T,A.targetId,O)))))}catch(T){if(!vl(T))throw T;We("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const A=T.targetId;if(!T.fromCache){const O=C.Ui.get(A),Y=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);C.Ui=C.Ui.insert(A,Y)}}}),function(p,y){return d.apply(this,arguments)})(r.localStore,a))}),cx.apply(this,arguments)}function kj(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,ye.Z)(function*(n,e){const t=ht(n);if(!t.currentUser.isEqual(e)){We("SyncEngine","User change. New user:",e.toKey());const r=yield Y1(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(d=>{d.reject(new je(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tl(t,r.ji)}var i}),dx.apply(this,arguments)}function Oj(n,e){const t=ht(n),r=t.cc.get(e);if(r&&r.nc)return mn().add(r.key);{let i=mn();const a=t.rc.get(e);if(!a)return i;for(const l of a){const d=t.ic.get(l);i=i.unionWith(d.view.ju)}return i}}function Fj(n,e){return hx.apply(this,arguments)}function hx(){return hx=(0,ye.Z)(function*(n,e){const t=ht(n),r=yield mT(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&ux(t,e.targetId,i.Xu),i}),hx.apply(this,arguments)}function Lj(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,ye.Z)(function*(n,e){const t=ht(n);return eF(t.localStore,e).then(r=>Tl(t,r))}),fx.apply(this,arguments)}function Vj(n,e,t,r){return px.apply(this,arguments)}function px(){return px=(0,ye.Z)(function*(n,e,t,r){const i=ht(n),a=yield function(l,d){const p=ht(l),y=ht(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Tn(C,d).next(T=>T?p.localDocuments.getDocuments(C,T):pe.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield h_(i.remoteStore):"acknowledged"===t||"rejected"===t?(ax(i,e,r||null),ox(i,e),d=e,ht(ht(i.localStore).mutationQueue).An(d)):yt(),yield Tl(i,a)):We("SyncEngine","Cannot apply mutation batch with id: "+e)}),px.apply(this,arguments)}function gx(){return gx=(0,ye.Z)(function*(n,e){const t=ht(n);if(vx(t),Ex(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield CF(t,r.toArray());t.dc=!0,yield $R(t.remoteStore,!0);for(const a of i)ET(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(__(t,l),c_(t.localStore,l,!0))),yw(t.remoteStore,l)}),yield i,yield CF(t,r),function(a){const l=ht(a);l.cc.forEach((d,p)=>{yw(l.remoteStore,p)}),l.ac.fs(),l.cc=new Map,l.uc=new cr(ut.comparator)}(t),t.dc=!1,yield $R(t.remoteStore,!1)}}),gx.apply(this,arguments)}function CF(n,e,t){return mx.apply(this,arguments)}function mx(){return mx=(0,ye.Z)(function*(n,e,t){const r=ht(n),i=[],a=[];for(const l of e){let d;const p=r.rc.get(l);if(p&&0!==p.length){d=yield l_(r.localStore,gi(p[0]));for(const y of p){const C=r.ic.get(y),T=yield Fj(r,C);T.snapshot&&a.push(T.snapshot)}}else{const y=yield J1(r.localStore,l);d=yield l_(r.localStore,y),yield QR(r,bF(y),l,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(a),i}),mx.apply(this,arguments)}function bF(n){return Ve(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Bj(n){const e=ht(n);return ht(ht(e.localStore).persistence).vi()}function $j(n,e,t,r){return _x.apply(this,arguments)}function _x(){return _x=(0,ye.Z)(function*(n,e,t,r){const i=ht(n);if(i.dc)return void We("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield eF(i.localStore,e_(a[0])),d=nw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Xr.EMPTY_BYTE_STRING);yield Tl(i,l,d);break}case"rejected":yield c_(i.localStore,e,!0),__(i,e,r);break;default:yt()}}),_x.apply(this,arguments)}function jj(n,e,t){return yx.apply(this,arguments)}function yx(){return yx=(0,ye.Z)(function*(n,e,t){const r=vx(n);if(r.dc){for(const i of e){if(r.rc.has(i)){We("SyncEngine","Adding an already active target "+i);continue}const a=yield J1(r.localStore,i),l=yield l_(r.localStore,a);yield QR(r,bF(a),l.targetId,!1,l.resumeToken),ET(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield c_(r.localStore,i,!1).then(()=>{yw(r.remoteStore,i),__(r,i)}).catch(ca))}}),yx.apply(this,arguments)}function vx(n){const e=ht(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Oj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mj.bind(null,e),e.sc.Wo=vj.bind(null,e.eventManager),e.sc.wc=Ej.bind(null,e.eventManager),e}function Ex(n){const e=ht(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xj.bind(null,e),e}class TF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=mw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Z1(this.persistence,new K1,e.initialUser,this.It)}yc(e){return new G1(pT.Bs,this.It)}gc(e){return new iF}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class DF extends TF{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Ex(r.Ac.syncEngine),yield h_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Z1(this.persistence,new K1,e.initialUser,this.It)}Tc(e,t){return new N$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new xO(t,this.persistence);return new RO(e.asyncQueue,r)}yc(e){const t=pR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ns.withCacheSize(this.cacheSizeBytes):Ns.DEFAULT;return new fR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oF(),vT(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new iF}}class Wj extends DF{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof CR&&(r.sharedClientState.syncEngine={Fr:Vj.bind(null,i),$r:$j.bind(null,i),Br:jj.bind(null,i),vi:Bj.bind(null,i),Mr:Lj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,ye.Z)(function*(l){yield function Uj(n,e){return gx.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=oF();if(!CR.C(t))throw new je(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wx{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>wF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=kj.bind(null,r.syncEngine),yield $R(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yj}createDatastore(e){const t=mw(e.databaseInfo.databaseId),r=new tj(e.databaseInfo);return new ij(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>wF(this.syncEngine,d,0),l=sF.C()?new sF:new X$,new aj(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,p,y){const C=new Tj(r,i,a,l,d,p);return y&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=ht(t);We("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield d_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ix(n,e,t){if(!t)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SF(n,e,t,r){if(!0===e&&!0===r)throw new je(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AF(n){if(!ut.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MF(n){if(ut.isDocumentKey(n))throw new je(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function IT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":yt()}function An(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=IT(n);throw new je(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function RF(n,e){if(e<=0)throw new je(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const xF=new Map;class NF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new je(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,SF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new je(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Bb;switch(t.type){case"gapi":return new Hb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new je(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xF.get(e);t&&(We("ComponentProvider","Removing Datastore"),xF.delete(e),t.terminate())}(this),Promise.resolve()}}function PF(n,e,t,r={}){var i;const a=(n=An(n,vw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&fi("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=ci.MOCK_USER;else{l=(0,J.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new je(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ci(p)}n._authCredentials=new $b(new Hm(l,d))}}class br{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}}class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class uu extends Ki{constructor(e,t,r){super(e,t,Ht(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new ut(e))}withConverter(e){return new uu(this.firestore,e,this._path)}}function kF(n,e,...t){if(n=(0,J.m9)(n),Ix("collection","path",e),n instanceof vw){const r=Sn.fromString(e,...t);return MF(r),new uu(n,null,r)}{if(!(n instanceof br||n instanceof uu))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sn.fromString(e,...t));return MF(r),new uu(n.firestore,null,r)}}function Ew(n,e,...t){if(n=(0,J.m9)(n),1===arguments.length&&(e=la.R()),Ix("doc","path",e),n instanceof vw){const r=Sn.fromString(e,...t);return AF(r),new br(n,null,new ut(r))}{if(!(n instanceof br||n instanceof uu))throw new je(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sn.fromString(e,...t));return AF(r),new br(n.firestore,n instanceof uu?n.converter:null,new ut(r))}}function OF(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),(n instanceof br||n instanceof uu)&&(e instanceof br||e instanceof uu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Cx(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&Il(n._query,e._query)&&n.converter===e.converter}function FF(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class CT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Gj{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new wj(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Zj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new je(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const d=ht(a),p=ow(d.It)+"/documents",y={documents:l.map(O=>sw(d.It,O))},C=yield d._o("BatchGetDocuments",p,y,l.length),T=new Map;C.forEach(O=>{const U=function K2(n,e){return"found"in e?function(t,r){Kt(!!r.found);const i=ou(t,r.found.name),a=Ci(r.found.updateTime),l=new Ii({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Kt(!!r.missing),Kt(!!r.readTime);const i=ou(t,r.missing),a=Ci(r.readTime);return hr.newNoDocument(i,a)}(n,e):yt()}(d.It,O);T.set(U.key.toString(),U)});const A=[];return l.forEach(O=>{const U=T.get(O.toString());Kt(!!U),A.push(U)}),A}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new i_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ut.fromPath(i);e.mutations.push(new JM(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=ht(i),d=ow(l.It)+"/documents",p={writes:a.map(y=>aw(l.It,y))};yield l.ao("Commit",d,p)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yt();t=Yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new je(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Yt.min())?Rr.exists(!1):Rr.updateTime(t):Rr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yt.min()))throw new je(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rr.updateTime(t)}return Rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Yj{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new bR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ye.Z)(function*(){const t=new Zj(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Nf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!YO(t)}return!1}}class Qj{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ci.UNAUTHENTICATED,this.clientId=la.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(d){We("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(We("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=p_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function LF(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),We("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield Y1(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),bx.apply(this,arguments)}function VF(n,e){return Tx.apply(this,arguments)}function Tx(){return Tx=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Dx(n);We("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>fF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>fF(e.remoteStore,a)),n.onlineComponents=e}),Tx.apply(this,arguments)}function Dx(n){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,ye.Z)(function*(n){return n.offlineComponents||(We("FirestoreClient","Using default OfflineComponentProvider"),yield LF(n,new TF)),n.offlineComponents}),Sx.apply(this,arguments)}function bT(n){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,ye.Z)(function*(n){return n.onlineComponents||(We("FirestoreClient","Using default OnlineComponentProvider"),yield VF(n,new wx)),n.onlineComponents}),Ax.apply(this,arguments)}function UF(n){return Dx(n).then(e=>e.persistence)}function TT(n){return Dx(n).then(e=>e.localStore)}function Mx(n){return bT(n).then(e=>e.remoteStore)}function Rx(n){return bT(n).then(e=>e.syncEngine)}function y_(n){return xx.apply(this,arguments)}function xx(){return xx=(0,ye.Z)(function*(n){const e=yield bT(n),t=e.eventManager;return t.onListen=Dj.bind(null,e.syncEngine),t.onUnlisten=Sj.bind(null,e.syncEngine),t}),xx.apply(this,arguments)}function $F(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,d,p){const y=new CT({next:T=>{a.enqueueAndForget(()=>GR(i,C));const A=T.docs.has(l);!A&&T.fromCache?p.reject(new je(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&T.fromCache&&d&&"server"===d.source?p.reject(new je(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),C=new ZR(Ht(l.path),y,{includeMetadataChanges:!0,Nu:!0});return WR(i,C)}(yield y_(n),n.asyncQueue,e,t,r)})),r.promise}function jF(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,d,p){const y=new CT({next:T=>{a.enqueueAndForget(()=>GR(i,C)),T.fromCache&&"server"===d.source?p.reject(new je(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),C=new ZR(l,y,{includeMetadataChanges:!0,Nu:!0});return WR(i,C)}(yield y_(n),n.asyncQueue,e,t,r)})),r.promise}class sH{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new bR(this,"async_queue_retry"),this.Wc=()=>{const t=vT();t&&We("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=vT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=vT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Qr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!vl(t))throw t;We("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,zr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=HR.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&yt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Nx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class oH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Tr extends vw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||HF(this),this._firestoreClient.terminate()}}function uH(n,e){const t="object"==typeof n?n:(0,tr.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,tr._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,J.P0)("firestore");a&&PF(i,...a)}return i}function Jr(n){return n._firestoreClient||HF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function HF(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Qb(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new Qj(n._authCredentials,n._appCheckCredentials,n._queue,r)}function WF(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield LF(n,t),yield VF(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===_e.FAILED_PRECONDITION||l.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;fi("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function zF(n){if(n._initialized||n._terminated)throw new je(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lu(Xr.fromBase64String(e))}catch(t){throw new je(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lu(Xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xf{constructor(e){this._methodName=e}}class DT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}}const _H=/^__.*__$/;class yH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms):new r_(e,this.data,t,this.fieldTransforms)}}class GF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class ST{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ST(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return RT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(qF(this.sa)&&_H.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class vH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||mw(e)}da(e,t,r,i=!1){return new ST({sa:e,methodName:t,fa:r,path:Mr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Jf(n){const e=n._freezeSettings(),t=mw(n._databaseId);return new vH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AT(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);Fx("Data must be an object, but it was:",l,r);const d=YF(r,l);let p,y;if(a.merge)p=new Li(l.fieldMask),y=l.fieldTransforms;else if(a.mergeFields){const C=[];for(const T of a.mergeFields){const A=Lx(e,T,t);if(!l.contains(A))throw new je(_e.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);XF(C,A)||C.push(A)}p=new Li(C),y=l.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=l.fieldTransforms;return new yH(new Ii(d),p,y)}class ww extends Xf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ww}}function KF(n,e,t){return new ST({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Px extends Xf{_toFieldTransform(e){return new XE(e.path,new t_)}isEqual(e){return e instanceof Px}}class EH extends Xf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=KF(this,e,!0),r=this._a.map(a=>ep(a,t)),i=new jf(r);return new XE(e.path,i)}isEqual(e){return this===e}}class wH extends Xf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=KF(this,e,!0),r=this._a.map(a=>ep(a,t)),i=new Hf(r);return new XE(e.path,i)}isEqual(e){return this===e}}class IH extends Xf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new n_(e.It,UO(e.It,this.wa));return new XE(e.path,t)}isEqual(e){return this===e}}function kx(n,e,t,r){const i=n.da(1,e,t);Fx("Data must be an object, but it was:",i,r);const a=[],l=Ii.empty();Xc(r,(p,y)=>{const C=MT(e,p,t);y=(0,J.m9)(y);const T=i.ca(C);if(y instanceof ww)a.push(C);else{const A=ep(y,T);null!=A&&(a.push(C),l.set(C,A))}});const d=new Li(a);return new GF(l,d,i.fieldTransforms)}function Ox(n,e,t,r,i,a){const l=n.da(1,e,t),d=[Lx(e,r,t)],p=[i];if(a.length%2!=0)throw new je(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(Lx(e,a[A])),p.push(a[A+1]);const y=[],C=Ii.empty();for(let A=d.length-1;A>=0;--A)if(!XF(y,d[A])){const O=d[A];let U=p[A];U=(0,J.m9)(U);const Y=l.ca(O);if(U instanceof ww)y.push(O);else{const re=ep(U,Y);null!=re&&(y.push(O),C.set(O,re))}}const T=new Li(y);return new GF(C,T,l.fieldTransforms)}function ZF(n,e,t,r=!1){return ep(t,n.da(r?4:3,e))}function ep(n,e){if(QF(n=(0,J.m9)(n)))return Fx("Unsupported field value:",e,n),YF(n,e);if(n instanceof Xf)return function(t,r){if(!qF(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=ep(l,r.aa(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,J.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return UO(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=yr.fromDate(t);return{timestampValue:iw(r.It,i)}}if(t instanceof yr){const i=new yr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:iw(r.It,i)}}if(t instanceof DT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof lu)return{bytesValue:a1(r.It,t._byteString)};if(t instanceof br){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${IT(t)}`)}(n,e)}function YF(n,e){const t={};return Zb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xc(n,(r,i)=>{const a=ep(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function QF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof yr||n instanceof DT||n instanceof lu||n instanceof br||n instanceof Xf)}function Fx(n,e,t){if(!QF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=IT(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Lx(n,e,t){if((e=(0,J.m9)(e))instanceof Dl)return e._internalPath;if("string"==typeof e)return MT(n,e);throw RT("Field path arguments must be of type string or ",n,!1,void 0,t)}const CH=new RegExp("[~\\*/\\[\\]]");function MT(n,e,t){if(e.search(CH)>=0)throw RT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dl(...e.split("."))._internalPath}catch{throw RT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function RT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||l)&&(p+=" (found",a&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new je(_e.INVALID_ARGUMENT,d+n+p)}function XF(n,e){return n.some(t=>t.isEqual(e))}class Iw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bH extends Iw{data(){return super.data()}}function xT(n,e){return"string"==typeof e?MT(n,e):e instanceof Dl?e._internalPath:e._delegate._internalPath}function JF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new je(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cw{}function ad(n,...e){for(const t of e)n=t._apply(n);return n}class TH extends Cw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Jf(e.firestore),r=function(i,a,l,d,p,y,C){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){sL(C,y);const O=[];for(const U of C)O.push(iL(d,i,U));T={arrayValue:{values:O}}}else T=iL(d,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||sL(C,y),T=ZF(l,"where",C,"in"===y||"not-in"===y);const A=h.create(p,y,T);return function(O,U){if(U.dt()){const re=pa(O);if(null!==re&&!re.isEqual(U.field))throw new je(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${re.toString()}' and '${U.field.toString()}'`);const Ge=sr(O);null!==Ge&&oL(0,U.field,Ge)}const Y=function(re,Ge){for(const et of re.filters)if(Ge.indexOf(et.op)>=0)return et.op;return null}(O,function(re){switch(re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==Y)throw new je(_e.INVALID_ARGUMENT,Y===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${Y.toString()}' filters.`)}(i,A),A}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ki(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new St(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class SH extends Cw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new je(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new De(i,a);return function(d,p){if(null===sr(d)){const y=pa(d);null!==y&&oL(0,y,p.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Ki(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new St(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class eL extends Cw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ki(e.firestore,e.converter,td(e._query,this.Ia,this.Ta))}}class tL extends Cw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=rL(e,this.type,this.Ea,this.Aa);return new Ki(e.firestore,e.converter,(i=t,new St((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class nL extends Cw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=rL(e,this.type,this.Ea,this.Aa);return new Ki(e.firestore,e.converter,(i=t,new St((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function rL(n,e,t,r){if(t[0]=(0,J.m9)(t[0]),t[0]instanceof Iw)return function(i,a,l,d,p){if(!d)throw new je(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const C of iu(i))if(C.field.isKeyField())y.push(fa(a,d.key));else{const T=d.data.field(C.field);if(Yb(T))throw new je(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const A=C.field.canonicalString();throw new je(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(T)}return new se(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Jf(n.firestore);return function(a,l,d,p,y,C){const T=a.explicitOrderBy;if(y.length>T.length)throw new je(_e.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let O=0;O<y.length;O++){const U=y[O];if(T[O].field.isKeyField()){if("string"!=typeof U)throw new je(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof U}`);if(!Uf(a)&&-1!==U.indexOf("/"))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${U}' contains a slash.`);const Y=a.path.child(Sn.fromString(U));if(!ut.isDocumentKey(Y))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Y}' is not because it contains an odd number of segments.`);const re=new ut(Y);A.push(fa(l,re))}else{const Y=ZF(d,p,U);A.push(Y)}}return new se(A,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iL(n,e,t){if("string"==typeof(t=(0,J.m9)(t))){if(""===t)throw new je(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uf(e)&&-1!==t.indexOf("/"))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Sn.fromString(t));if(!ut.isDocumentKey(r))throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fa(n,new ut(r))}if(t instanceof br)return fa(n,t._key);throw new je(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${IT(t)}.`)}function sL(n,e){if(!Array.isArray(n)||0===n.length)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new je(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function oL(n,e,t){if(!t.isEqual(e))throw new je(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Vx{convertValue(e,t="none"){switch(ru(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yt()}}convertObject(e,t){const r={};return Xc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new DT(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qM(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Km(e));default:return null}}convertTimestamp(e){const t=ko(e);return new yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Sn.fromString(e);Kt(m1(r));const i=new nu(r.get(1),r.get(3)),a=new ut(r.popFirst(5));return i.isEqual(t)||zr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function NT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class OH extends Vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,t)}}class tp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sl extends Iw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bw extends Sl{data(e={}){return super.data(e)}}class ud{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bw(this._firestore,this._userDataWriter,r.key,r,new tp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new bw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new bw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new tp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),y=a.indexOf(l.doc.key)),{type:FH(l.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}function aL(n,e){return n instanceof Sl&&e instanceof Sl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ud&&e instanceof ud&&n._firestore===e._firestore&&Cx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ld extends Vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,t)}}function uL(n,e,t){n=An(n,br);const r=An(n.firestore,Tr),i=NT(n.converter,e,t);return v_(r,[AT(Jf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Rr.none())])}function Ux(n,e,t,...r){n=An(n,br);const i=An(n.firestore,Tr),a=Jf(i);let l;return l="string"==typeof(e=(0,J.m9)(e))||e instanceof Dl?Ox(a,"updateDoc",n._key,e,t,r):kx(a,"updateDoc",n._key,e),v_(i,[l.toMutation(n._key,Rr.exists(!0))])}function lL(n,...e){var t,r,i;n=(0,J.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Nx(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(Nx(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let p,y,C;if(n instanceof br)y=An(n.firestore,Tr),C=Ht(n._key.path),p={next:T=>{e[l]&&e[l](Bx(y,n,T))},error:e[l+1],complete:e[l+2]};else{const T=An(n,Ki);y=An(T.firestore,Tr),C=T._query;const A=new ld(y);p={next:O=>{e[l]&&e[l](new ud(y,A,T,O))},error:e[l+1],complete:e[l+2]},JF(n._query)}return function(T,A,O,U){const Y=new CT(U),re=new ZR(A,Y,O);return T.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return WR(yield y_(T),re)})),()=>{Y.bc(),T.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return GR(yield y_(T),re)}))}}(Jr(y),C,d,p)}function v_(n,e){return function(t,r){const i=new Qr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function Aj(n,e,t){return ex.apply(this,arguments)}(yield Rx(t),r,i)})),i.promise}(Jr(n),e)}function Bx(n,e,t){const r=t.docs.get(e._key),i=new ld(n);return new Sl(n,i,e._key,r,new tp(t.hasPendingWrites,t.fromCache),e.converter)}const GH={maxAttempts:5};class cL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jf(e)}set(e,t,r){this._verifyNotCommitted();const i=cd(e,this._firestore),a=NT(i.converter,t,r),l=AT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Rr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=cd(e,this._firestore);let l;return l="string"==typeof(t=(0,J.m9)(t))||t instanceof Dl?Ox(this._dataReader,"WriteBatch.update",a._key,t,r,i):kx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cd(e,this._firestore);return this._mutations=this._mutations.concat(new i_(t._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new je(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cd(n,e){if((n=(0,J.m9)(n)).firestore!==e)throw new je(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jf(e)}get(e){const t=cd(e,this._firestore),r=new OH(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return yt();const a=i[0];if(a.isFoundDocument())return new Iw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Iw(this._firestore,r,t._key,null,t.converter);throw yt()})}set(e,t,r){const i=cd(e,this._firestore),a=NT(i.converter,t,r),l=AT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=cd(e,this._firestore);let l;return l="string"==typeof(t=(0,J.m9)(t))||t instanceof Dl?Ox(this._dataReader,"Transaction.update",a._key,t,r,i):kx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=cd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cd(e,this._firestore),r=new ld(this._firestore);return super.get(e).then(i=>new Sl(this._firestore,r,t._key,i._document,new tp(!1,!1),t.converter))}}!function(n,e=!0){Yc=tr.SDK_VERSION,(0,tr._registerComponent)(new Ga.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new Tr(new HM(t.getProvider("auth-internal")),new zb(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new je(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(d.options.projectId,p)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(Vb,"3.7.2",n),(0,tr.registerVersion)(Vb,"3.7.2","esm2017")}();class $x{constructor(e){return e}}const hL="firestore",jx=new f.OlP("angularfire2.firestore-instances");function nW(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $x(r)}}const rW={provide:class eW{constructor(){return(0,gt.vb)(hL)}},deps:[[new f.FiY,jx]]},iW={provide:$x,useFactory:function tW(n,e){const t=(0,gt.JM)(hL,n,e);return t&&new $x(t)},deps:[[new f.FiY,jx],ir]};let sW=(()=>{class n{constructor(){(0,Pi.KN)("angularfire",gt.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[iW,rW]}),n})();function oW(n,...e){return{ngModule:sW,providers:[{provide:jx,useFactory:nW(n),multi:!0,deps:[f.R0b,f.zs3,gt.HU,Ds,[new f.FiY,Wh],[new f.FiY,Ka],...e]}]}}const fL=(0,gt.u3)(Ew,!0),Hx=(0,gt.u3)(uH,!0),pL=(0,gt.u3)(Ux,!0);function aW(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1," This field is mandatory "),f.qZA())}function uW(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1," This field is mandatory "),f.qZA())}function lW(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1," Please enter a valid email "),f.qZA())}function cW(n,e){1&n&&(f.TgZ(0,"p"),f._uU(1," This field is mandatory "),f.qZA())}function dW(n,e){1&n&&(f.TgZ(0,"p",24),f._uU(1," Your form is invalid "),f.qZA())}const hW=[{path:"",component:(()=>{class n{constructor(t){this.fb=t}ngOnInit(){this.formOne=new Nh({fullName:new si("",_c.required),dateOfBirth:new si("",_c.required),email:new si("",[_c.required,_c.email]),mobileNumber:new si("",_c.required),gender:new si(""),occupation:new si(""),idType:new si(""),idNumber:new si(""),issueAuthority:new si(""),issuedState:new si(""),issuedDate:new si(""),expiryDate:new si("")}),this.formOne.valueChanges.subscribe()}get fullName(){return this.formOne.get("fullName")}get dateOfBirth(){return this.formOne.get("dateOfBirth")}get email(){return this.formOne.get("email")}get number(){return this.formOne.get("mobileNumber")}onSubmit(){const t=Hx(),r=fL(t,"form/hobla");pL(r,this.formOne.value),this.formOne.reset()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pC))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-form-one"]],decls:69,vars:7,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"],[1,"main-container"],[1,"container"],[1,"form-container"],[3,"formGroup"],[1,"details-personal"],[1,"form-child"],["type","text","placeholder","Enter your name","formControlName","fullName"],[4,"ngIf"],["type","date","formControlName","dateOfBirth"],["type","email","placeholder","Enter your email","formControlName","email"],["type","number","placeholder","Enter mobile number","formControlName","mobileNumber"],["type","text","placeholder","Enter your gender","formControlName","gender"],["type","text","placeholder","Enter your occupation","formControlName","occupation"],[1,"details-identity"],["type","text","placeholder","Enter ID type","formControlName","idType"],["type","number","placeholder","Enter ID number","formControlName","idNumber"],["type","text","placeholder","Enter issue department","formControlName","issueAuthority"],["type","text","placeholder","Enter issued state","formControlName","issuedState"],["type","date","formControlName","issuedDate"],["type","date","formControlName","expiryDate"],["type","button","routerLink","../form-two",3,"disabled","click"],[1,"material-symbols-outlined","icon"],["class","button-p",4,"ngIf"],[1,"button-p"]],template:function(t,r){1&t&&(f._UZ(0,"link",0),f.TgZ(1,"div",1)(2,"div",2)(3,"h2"),f._uU(4,"Registration"),f.qZA(),f._UZ(5,"hr"),f.TgZ(6,"div",3)(7,"form",4)(8,"span",5),f._uU(9,"Personal Details"),f.qZA(),f.TgZ(10,"div",6)(11,"label"),f._uU(12,"Full Name"),f.qZA(),f._UZ(13,"input",7),f.YNc(14,aW,2,0,"p",8),f.qZA(),f.TgZ(15,"div",6)(16,"label"),f._uU(17,"Date of Birth"),f.qZA(),f._UZ(18,"input",9),f.YNc(19,uW,2,0,"p",8),f.qZA(),f.TgZ(20,"div",6)(21,"label"),f._uU(22,"Email"),f.qZA(),f._UZ(23,"input",10),f.YNc(24,lW,2,0,"p",8),f.qZA(),f.TgZ(25,"div",6)(26,"label"),f._uU(27,"Mobile Number"),f.qZA(),f._UZ(28,"input",11),f.YNc(29,cW,2,0,"p",8),f.qZA(),f.TgZ(30,"div",6)(31,"label"),f._uU(32,"Gender"),f.qZA(),f._UZ(33,"input",12),f.qZA(),f.TgZ(34,"div",6)(35,"label"),f._uU(36,"Occupation"),f.qZA(),f._UZ(37,"input",13),f.qZA(),f.TgZ(38,"span",14),f._uU(39,"Identity Details"),f.qZA(),f.TgZ(40,"div",6)(41,"label"),f._uU(42,"ID Type"),f.qZA(),f._UZ(43,"input",15),f.qZA(),f.TgZ(44,"div",6)(45,"label"),f._uU(46,"ID Number"),f.qZA(),f._UZ(47,"input",16),f.qZA(),f.TgZ(48,"div",6)(49,"label"),f._uU(50,"Issue Authority"),f.qZA(),f._UZ(51,"input",17),f.qZA(),f.TgZ(52,"div",6)(53,"label"),f._uU(54,"Issued State"),f.qZA(),f._UZ(55,"input",18),f.qZA(),f.TgZ(56,"div",6)(57,"label"),f._uU(58,"Issued Date"),f.qZA(),f._UZ(59,"input",19),f.qZA(),f.TgZ(60,"div",6)(61,"label"),f._uU(62,"Expiry Date"),f.qZA(),f._UZ(63,"input",20),f.qZA()(),f.TgZ(64,"button",21),f.NdJ("click",function(){return r.onSubmit()}),f._uU(65," Next "),f.TgZ(66,"span",22),f._uU(67," send "),f.qZA()(),f.YNc(68,dW,2,0,"p",23),f.qZA()()()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.formOne),f.xp6(7),f.Q6J("ngIf",r.fullName&&r.fullName.invalid&&r.fullName.touched),f.xp6(5),f.Q6J("ngIf",r.dateOfBirth&&r.dateOfBirth.touched&&r.dateOfBirth.invalid),f.xp6(5),f.Q6J("ngIf",r.email&&r.email.invalid&&r.email.touched),f.xp6(5),f.Q6J("ngIf",r.number&&r.number.touched&&r.number.invalid),f.xp6(35),f.Q6J("disabled",r.formOne.invalid),f.xp6(4),f.Q6J("ngIf",r.formOne.invalid&&r.formOne.touched))},dependencies:[Dr,Yu,zg,tl,Oh,Pg,Rh,Fh,Tc],styles:['.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}.container[_ngcontent-%COMP%]{height:auto;background-color:#f5f5f5;position:relative;top:3.2rem;border-radius:8px;padding-left:35px}h2[_ngcontent-%COMP%]{padding-top:20px;font-weight:600}hr[_ngcontent-%COMP%]{width:35px;background-color:#0d47a1;height:4.5px;border-radius:8px;position:relative;bottom:10px;display:inline-block}.main-container[_ngcontent-%COMP%]{max-width:900px;width:100%}form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.details-personal[_ngcontent-%COMP%], .details-identity[_ngcontent-%COMP%]{flex-basis:100%;font-size:1.2rem;margin-bottom:12px;margin-top:5px}label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;display:block}.form-child[_ngcontent-%COMP%]{flex-basis:33%;margin-bottom:8px}input[_ngcontent-%COMP%]{width:90%;height:45px;margin-bottom:12px;margin-top:7px;border-radius:5px;padding-left:5px;font-size:1rem;border:1px solid}button[_ngcontent-%COMP%]{color:#f5f5f5;font-size:1rem;font-weight:400;width:180px;height:45px;border:none;border-radius:5px;background-color:#1f79ff;margin:17px 0 20px;cursor:pointer}.material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:7px;left:3px;padding-bottom:10px}button[_ngcontent-%COMP%]:hover{background-color:#1452af}p[_ngcontent-%COMP%]{margin:-8px 0 0;color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:2px solid red}.button-p[_ngcontent-%COMP%]{margin-top:-15px;margin-bottom:5px}@media screen and (max-width: 700px){.form-child[_ngcontent-%COMP%]{flex-basis:50%}}@media screen and (max-width: 460px){.form-child[_ngcontent-%COMP%]{flex-basis:90%}}']}),n})()},{path:"form-two",component:(()=>{class n{constructor(t){this.fb=t}ngOnInit(){this.formTwo=this.fb.group({addressType:"",nationality:"",state:"",district:"",blockNumber:"",wardNumber:"",fatherName:"",motherName:"",grandfather:"",spouseName:"",fatherInLaw:"",motherInLaw:""})}onSubmit(){const t=Hx(),r=fL(t,"form/hobla");pL(r,this.formTwo.value),this.formTwo.reset()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pC))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-form-two"]],decls:67,vars:1,consts:[["rel","stylesheet","href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"],[1,"main-container"],[1,"container"],[1,"form-container"],[3,"formGroup"],[1,"details-personal"],[1,"form-child"],["type","text","placeholder","Permanent or temporary","formControlName","addressType"],["type","text","placeholder","Enter your nationality","formControlName","nationality"],["type","text","placeholder","Enter your state","formControlName","state"],["type","text","placeholder","Enter your district","formControlName","district"],["type","number","placeholder","Enter block number","formControlName","blockNumber"],["type","number","placeholder","Enter your occupation","formControlName","wardNumber"],[1,"details-identity"],["type","text","placeholder","Enter father name","formControlName","fatherName"],["type","text","placeholder","Enter mother name","formControlName","motherName"],["type","text","placeholder","Enter grandfather name","formControlName","grandfather"],["type","text","placeholder","Enter spouse name","formControlName","spouseName"],["type","text","placeholder","Father in law name","formControlName","fatherInLaw"],["type","text","placeholder","Mother in law name","formControlName","motherInLaw"],[1,"buttons-div"],["routerLink","../",1,"back-btn"],["routerLink","../submitted","type","submit",1,"submit-btn",3,"click"],[1,"material-symbols-outlined"]],template:function(t,r){1&t&&(f._UZ(0,"link",0),f.TgZ(1,"div",1)(2,"div",2)(3,"h2"),f._uU(4,"Registration"),f.qZA(),f._UZ(5,"hr"),f.TgZ(6,"div",3)(7,"form",4)(8,"span",5),f._uU(9,"Address Details"),f.qZA(),f.TgZ(10,"div",6)(11,"label"),f._uU(12,"Address type"),f.qZA(),f._UZ(13,"input",7),f.qZA(),f.TgZ(14,"div",6)(15,"label"),f._uU(16,"Nationality"),f.qZA(),f._UZ(17,"input",8),f.qZA(),f.TgZ(18,"div",6)(19,"label"),f._uU(20,"State"),f.qZA(),f._UZ(21,"input",9),f.qZA(),f.TgZ(22,"div",6)(23,"label"),f._uU(24,"District"),f.qZA(),f._UZ(25,"input",10),f.qZA(),f.TgZ(26,"div",6)(27,"label"),f._uU(28,"Block Number"),f.qZA(),f._UZ(29,"input",11),f.qZA(),f.TgZ(30,"div",6)(31,"label"),f._uU(32,"Ward Number"),f.qZA(),f._UZ(33,"input",12),f.qZA(),f.TgZ(34,"span",13),f._uU(35,"Family Details"),f.qZA(),f.TgZ(36,"div",6)(37,"label"),f._uU(38,"Father Name"),f.qZA(),f._UZ(39,"input",14),f.qZA(),f.TgZ(40,"div",6)(41,"label"),f._uU(42,"Mother Name"),f.qZA(),f._UZ(43,"input",15),f.qZA(),f.TgZ(44,"div",6)(45,"label"),f._uU(46,"Grandfather"),f.qZA(),f._UZ(47,"input",16),f.qZA(),f.TgZ(48,"div",6)(49,"label"),f._uU(50,"Spouse name"),f.qZA(),f._UZ(51,"input",17),f.qZA(),f.TgZ(52,"div",6)(53,"label"),f._uU(54,"Father in Law"),f.qZA(),f._UZ(55,"input",18),f.qZA(),f.TgZ(56,"div",6)(57,"label"),f._uU(58,"Mother in Law"),f.qZA(),f._UZ(59,"input",19),f.qZA(),f.TgZ(60,"div",20)(61,"button",21),f._uU(62,"Back"),f.qZA(),f.TgZ(63,"button",22),f.NdJ("click",function(){return r.onSubmit()}),f._uU(64," Submit "),f.TgZ(65,"span",23),f._uU(66," send "),f.qZA()()()()()()()),2&t&&(f.xp6(7),f.Q6J("formGroup",r.formTwo))},dependencies:[Yu,zg,tl,Oh,Pg,Rh,Fh,Tc],styles:['.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}.container[_ngcontent-%COMP%]{height:auto;background-color:#f5f5f5;position:relative;top:3.2rem;border-radius:8px;padding-left:35px}h2[_ngcontent-%COMP%]{padding-top:20px;font-weight:600}hr[_ngcontent-%COMP%]{width:35px;background-color:#0d47a1;height:4.5px;border-radius:8px;position:relative;bottom:10px;display:inline-block}.main-container[_ngcontent-%COMP%]{max-width:900px;width:100%}form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.details-personal[_ngcontent-%COMP%], .details-identity[_ngcontent-%COMP%]{flex-basis:100%;font-size:1.2rem;margin-bottom:12px;margin-top:5px}label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;display:block}.form-child[_ngcontent-%COMP%]{flex-basis:33%;margin-bottom:8px}input[_ngcontent-%COMP%]{width:90%;height:45px;margin-bottom:12px;margin-top:7px;border-radius:5px;padding-left:5px;font-size:1rem;border:1px solid}button[_ngcontent-%COMP%]{color:#f5f5f5;font-size:1rem;font-weight:400;width:180px;height:45px;border:none;border-radius:5px;background-color:#1f79ff;margin:17px 0 20px;cursor:pointer}.material-symbols-outlined[_ngcontent-%COMP%]{position:relative;top:7px;left:3px;padding-bottom:10px}button[_ngcontent-%COMP%]:hover{background-color:#1452af}.submit-btn[_ngcontent-%COMP%]{margin-left:20px}.buttons-div[_ngcontent-%COMP%]{flex-basis:100%}@media screen and (max-width: 700px){.form-child[_ngcontent-%COMP%]{flex-basis:50%}.buttons-div[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.submit-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{flex-basis:35%}.back-btn[_ngcontent-%COMP%]{position:relative;right:20px}}@media screen and (max-width: 460px){.form-child[_ngcontent-%COMP%]{flex-basis:90%}.buttons-div[_ngcontent-%COMP%]{flex-basis:90%;justify-content:initial;flex-wrap:wrap}.submit-btn[_ngcontent-%COMP%], .back-btn[_ngcontent-%COMP%]{flex-basis:80%}.back-btn[_ngcontent-%COMP%]{left:15px}.submit-btn[_ngcontent-%COMP%]{position:relative;right:5px}}']}),n})()},{path:"submitted",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-submitted"]],decls:6,vars:0,consts:[[1,"container"],["src","assets/bluechecksign.png","alt","success icon"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"img",1),f.TgZ(2,"h2"),f._uU(3,"Thank You!"),f.qZA(),f.TgZ(4,"p"),f._uU(5,"Your submission has been received."),f.qZA()())},styles:["img[_ngcontent-%COMP%]{width:250px;height:250px}h2[_ngcontent-%COMP%]{font-size:1.7rem;margin-bottom:8px;color:#1f79ff}p[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center}"]}),n})()},{path:"**",component:wI}];let fW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[yI.forRoot(hW),yI]}),n})(),pW=(()=>{class n{constructor(){this.title="forms"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Zu]}),n})();class gL{}const Al="*";function mL(n,e=null){return{type:2,steps:n,options:e}}function _L(n){return{type:6,styles:n,offset:null}}function yL(n){Promise.resolve().then(n)}class Tw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){yL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class vL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?yL(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++r==a&&this._onDestroy()}),l.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function EL(n){return new f.vHH(3e3,!1)}function YW(){return typeof window<"u"&&typeof window.document<"u"}function zx(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function dd(n){switch(n.length){case 0:return new Tw;case 1:return n[0];default:return new vL(n)}}function wL(n,e,t,r,i=new Map,a=new Map){const l=[],d=[];let p=-1,y=null;if(r.forEach(C=>{const T=C.get("offset"),A=T==p,O=A&&y||new Map;C.forEach((U,Y)=>{let re=Y,Ge=U;if("offset"!==Y)switch(re=e.normalizePropertyName(re,l),Ge){case"!":Ge=i.get(Y);break;case Al:Ge=a.get(Y);break;default:Ge=e.normalizeStyleValue(Y,re,Ge,l)}O.set(re,Ge)}),A||d.push(O),y=O,p=T}),l.length)throw function VW(n){return new f.vHH(3502,!1)}();return d}function Gx(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&qx(t,"start",n)));break;case"done":n.onDone(()=>r(t&&qx(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&qx(t,"destroy",n)))}}function qx(n,e,t){const a=Kx(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(a._data=l),a}function Kx(n,e,t,r,i="",a=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!l}}function eo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function IL(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Zx=(n,e)=>!1,CL=(n,e,t)=>[],bL=null;function Yx(n){const e=n.parentNode||n.host;return e===bL?null:e}(zx()||typeof Element<"u")&&(YW()?(bL=(()=>document.documentElement)(),Zx=(n,e)=>{for(;e;){if(e===n)return!0;e=Yx(e)}return!1}):Zx=(n,e)=>n.contains(e),CL=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let np=null,TL=!1;const DL=Zx,SL=CL;let AL=(()=>{class n{validateStyleProperty(t){return function XW(n){np||(np=function JW(){return typeof document<"u"?document.body:null}()||{},TL=!!np.style&&"WebkitAppearance"in np.style);let e=!0;return np.style&&!function QW(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in np.style,!e&&TL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in np.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return DL(t,r)}getParentElement(t){return Yx(t)}query(t,r,i){return SL(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,l,d=[],p){return new Tw(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Qx=(()=>{class n{}return n.NOOP=new AL,n})();const Xx="ng-enter",PT="ng-leave",kT="ng-trigger",OT=".ng-trigger",RL="ng-animating",Jx=".ng-animating";function Ml(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:eN(parseFloat(e[1]),e[2])}function eN(n,e){return"s"===e?1e3*n:n}function FT(n,e,t){return n.hasOwnProperty("duration")?n:function nz(n,e,t){let i,a=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(EL()),{duration:0,delay:0,easing:""};i=eN(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(a=eN(parseFloat(p),d[4]));const y=d[5];y&&(l=y)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function mW(){return new f.vHH(3100,!1)}()),d=!0),a<0&&(e.push(function _W(){return new f.vHH(3101,!1)}()),d=!0),d&&e.splice(p,0,EL())}return{duration:i,delay:a,easing:l}}(n,e,t)}function Dw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function xL(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function hd(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function PL(n,e,t){return t?e+":"+t+";":""}function kL(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=PL(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=PL(0,oz(t),n.style[t]));n.setAttribute("style",e)}function cu(n,e,t){n.style&&(e.forEach((r,i)=>{const a=nN(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),zx()&&kL(n))}function rp(n,e){n.style&&(e.forEach((t,r)=>{const i=nN(r);n.style[i]=""}),zx()&&kL(n))}function Sw(n){return Array.isArray(n)?1==n.length?n[0]:mL(n):n}const tN=new RegExp("{{\\s*(.+?)\\s*}}","g");function OL(n){let e=[];if("string"==typeof n){let t;for(;t=tN.exec(n);)e.push(t[1]);tN.lastIndex=0}return e}function Aw(n,e,t){const r=n.toString(),i=r.replace(tN,(a,l)=>{let d=e[l];return null==d&&(t.push(function vW(n){return new f.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function LT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const sz=/-+([a-z0-9])/g;function nN(n){return n.replace(sz,(...e)=>e[1].toUpperCase())}function oz(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function to(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function EW(n){return new f.vHH(3004,!1)}()}}function FL(n,e){return window.getComputedStyle(n)[e]}function hz(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function fz(n,e,t){if(":"==n[0]){const p=function pz(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function kW(n){return new f.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function PW(n){return new f.vHH(3015,!1)}()),e;const i=r[1],a=r[2],l=r[3];e.push(LL(i,l));"<"==a[0]&&!("*"==i&&"*"==l)&&e.push(LL(l,i))}(r,t,e)):t.push(n),t}const $T=new Set(["true","1"]),jT=new Set(["false","0"]);function LL(n,e){const t=$T.has(n)||jT.has(n),r=$T.has(e)||jT.has(e);return(i,a)=>{let l="*"==n||n==i,d="*"==e||e==a;return!l&&t&&"boolean"==typeof i&&(l=i?$T.has(n):jT.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?$T.has(e):jT.has(e)),l&&d}}const gz=new RegExp("s*:selfs*,?","g");function rN(n,e,t,r){return new mz(n).build(e,t,r)}class mz{constructor(e){this._driver=e}build(e,t,r){const i=new vz(t);return this._resetContextStyleTimingState(i),to(this,Sw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function IW(){return new f.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,a.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push(function CW(){return new f.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,l=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{OL(p).forEach(y=>{l.hasOwnProperty(y)||a.add(y)})})}),a.size&&(LT(a.values()),t.errors.push(function bW(n,e){return new f.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=to(this,Sw(e.animation),t);return{type:1,matchers:hz(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ip(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>to(this,r,t)),options:ip(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(l=>{t.currentTime=r;const d=to(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:ip(e.options)}}visitAnimate(e,t){const r=function wz(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return iN(FT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=iN(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=FT(t,e);return iN(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:_L({});if(5==a.type)i=this.visitKeyframes(a,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};r.easing&&(y.easing=r.easing),l=_L(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===Al?r.push(d):t.errors.push(new f.vHH(3002,!1)):r.push(xL(d));let a=!1,l=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!a))for(let p of d.values())if(p.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),C=y.get(p);let T=!0;C&&(a!=i&&a>=C.startTime&&i<=C.endTime&&(t.errors.push(function DW(n,e,t,r,i){return new f.vHH(3010,!1)}()),T=!1),a=C.startTime),T&&y.set(p,{startTime:a,endTime:i}),t.options&&function iz(n,e,t){const r=e.params||{},i=OL(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function yW(n){return new f.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function SW(){return new f.vHH(3011,!1)}()),r;let a=0;const l=[];let d=!1,p=!1,y=0;const C=e.steps.map(Ge=>{const et=this._makeStyleAst(Ge,t);let lt=null!=et.offset?et.offset:function Ez(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(et.styles),ot=0;return null!=lt&&(a++,ot=et.offset=lt),p=p||ot<0||ot>1,d=d||ot<y,y=ot,l.push(ot),et});p&&t.errors.push(function AW(){return new f.vHH(3012,!1)}()),d&&t.errors.push(function MW(){return new f.vHH(3200,!1)}());const T=e.steps.length;let A=0;a>0&&a<T?t.errors.push(function RW(){return new f.vHH(3202,!1)}()):0==a&&(A=1/(T-1));const O=T-1,U=t.currentTime,Y=t.currentAnimateTimings,re=Y.duration;return C.forEach((Ge,et)=>{const lt=A>0?et==O?1:A*et:l[et],ot=lt*re;t.currentTime=U+Y.delay+ot,Y.duration=ot,this._validateStyleAst(Ge,t),Ge.offset=lt,r.styles.push(Ge)}),r}visitReference(e,t){return{type:8,animation:to(this,Sw(e.animation),t),options:ip(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ip(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ip(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function _z(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(gz,"")),n=n.replace(/@\*/g,OT).replace(/@\w+/g,t=>OT+"-"+t.slice(1)).replace(/:animating/g,Jx),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,eo(t.collectedStyles,t.currentQuerySelector,new Map);const d=to(this,Sw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:ip(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function xW(){return new f.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:FT(e.timings,t.errors,!0);return{type:12,animation:to(this,Sw(e.animation),t),timings:r,options:null}}}class vz{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ip(n){return n?(n=Dw(n)).params&&(n.params=function yz(n){return n?Dw(n):null}(n.params)):n={},n}function iN(n,e,t){return{duration:n,delay:e,easing:t}}function sN(n,e,t,r,i,a,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:l,subTimeline:d}}class HT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const bz=new RegExp(":enter","g"),Dz=new RegExp(":leave","g");function oN(n,e,t,r,i,a=new Map,l=new Map,d,p,y=[]){return(new Sz).buildKeyframes(n,e,t,r,i,a,l,d,p,y)}class Sz{buildKeyframes(e,t,r,i,a,l,d,p,y,C=[]){y=y||new HT;const T=new aN(e,t,y,i,a,C,[]);T.options=p;const A=p.delay?Ml(p.delay):0;T.currentTimeline.delayNextStep(A),T.currentTimeline.setStyles([l],null,T.errors,p),to(this,r,T);const O=T.timelines.filter(U=>U.containsAnimation());if(O.length&&d.size){let U;for(let Y=O.length-1;Y>=0;Y--){const re=O[Y];if(re.element===t){U=re;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([d],null,T.errors,p)}return O.length?O.map(U=>U.buildKeyframes()):[sN(t,[],[],[],0,A,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const l="number"==typeof a?a:Ml(Aw(a,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const l=null!=r.duration?Ml(r.duration):null,d=null!=r.delay?Ml(r.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,d);a=Math.max(a,y.duration+y.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),to(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=WT);const l=Ml(a.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>to(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Ml(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),to(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return FT(t.params?Aw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*a),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Ml(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=WT);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,C)=>{t.currentQueryIndex=C;const T=t.createSubContext(e.options,y);a&&T.delayNextStep(a),y===t.element&&(p=T.currentTimeline),to(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),d=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const T=C.currentTime;to(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const WT={};class aN{constructor(e,t,r,i,a,l,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=WT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new zT(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ml(r.duration)),null!=r.delay&&(i.delay=Ml(r.delay));const a=r.params;if(a){let l=i.params;l||(l=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=Aw(a[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new aN(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=WT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new Az(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(bz,"."+this._enterClassName)).replace(Dz,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!a&&0==d.length&&l.push(function NW(n){return new f.vHH(3014,!1)}()),d}}class zT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new zT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Al),this._currentKeyframe.set(t,Al);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},l=function Mz(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,Al)}else hd(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,p]of l){const y=Aw(p,a,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Al),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const y=hd(d,new Map,this._backFill);y.forEach((C,T)=>{"!"===C?e.add(T):C===Al&&t.add(T)}),r||y.set("offset",p/this.duration),i.push(y)});const a=e.size?LT(e.values()):[],l=t.size?LT(t.values()):[];if(r){const d=i[0],p=new Map(d);d.set("offset",0),p.set("offset",1),i=[d,p]}return sN(this.element,i,a,l,this.duration,this.startTime,this.easing,!1)}}class Az extends zT{constructor(e,t,r,i,a,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=r+t,d=t/l,p=hd(e[0]);p.set("offset",0),a.push(p);const y=hd(e[0]);y.set("offset",BL(d)),a.push(y);const C=e.length-1;for(let T=1;T<=C;T++){let A=hd(e[T]);const O=A.get("offset");A.set("offset",BL((t+O*r)/l)),a.push(A)}r=l,t=0,i="",e=a}return sN(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function BL(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class uN{}const Rz=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class xz extends uN{normalizePropertyName(e,t){return nN(e)}normalizeStyleValue(e,t,r,i){let a="";const l=r.toString().trim();if(Rz.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function wW(n,e){return new f.vHH(3005,!1)}())}return l+a}}function $L(n,e,t,r,i,a,l,d,p,y,C,T,A){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:l,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:T,errors:A}}const lN={};class jL{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Nz(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,l,d,p,y,C){const T=[],A=this.ast.options&&this.ast.options.params||lN,U=this.buildStyles(r,d&&d.params||lN,T),Y=p&&p.params||lN,re=this.buildStyles(i,Y,T),Ge=new Set,et=new Map,lt=new Map,ot="void"===i,Ot={params:Pz(Y,A),delay:this.ast.options?.delay},Ut=C?[]:oN(e,t,this.ast.animation,a,l,U,re,Ot,y,T);let En=0;if(Ut.forEach(io=>{En=Math.max(io.duration+io.delay,En)}),T.length)return $L(t,this._triggerName,r,i,ot,U,re,[],[],et,lt,En,T);Ut.forEach(io=>{const kl=io.element,w2=eo(et,kl,new Set);io.preStyleProps.forEach(vp=>w2.add(vp));const f0=eo(lt,kl,new Set);io.postStyleProps.forEach(vp=>f0.add(vp)),kl!==t&&Ge.add(kl)});const ei=LT(Ge.values());return $L(t,this._triggerName,r,i,ot,U,re,Ut,ei,et,lt,En)}}function Pz(n,e){const t=Dw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class kz{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Dw(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!==l&&(i[a]=l)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,d)=>{l&&(l=Aw(l,i,t));const p=this.normalizer.normalizePropertyName(d,t);l=this.normalizer.normalizeStyleValue(d,p,l,t),r.set(p,l)})}),r}}class Fz{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new kz(i.style,i.options&&i.options.params||{},r))}),HL(this.states,"true","1"),HL(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new jL(e,i,this.states))}),this.fallbackTransition=function Lz(n,e,t){return new jL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function HL(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Vz=new HT;class Uz{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=rN(this._driver,t,r,[]);if(r.length)throw function UW(n){return new f.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=wL(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let l;const d=new Map;if(a?(l=oN(this._driver,t,a,Xx,PT,new Map,new Map,r,Vz,i),l.forEach(C=>{const T=eo(d,C.element,new Map);C.postStyleProps.forEach(A=>T.set(A,null))})):(i.push(function BW(){return new f.vHH(3300,!1)}()),l=[]),i.length)throw function $W(n){return new f.vHH(3504,!1)}();d.forEach((C,T)=>{C.forEach((A,O)=>{C.set(O,this._driver.computeStyle(T,O,Al))})});const y=dd(l.map(C=>{const T=d.get(C.element);return this._buildPlayer(C,new Map,T)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function jW(n){return new f.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=Kx(t,"","","");return Gx(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const WL="ng-animate-queued",cN="ng-animate-disabled",Wz=[],zL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},zz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Fo="__ng_removed";class dN{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Zz(n){return n??null}(r?e.value:e),r){const a=Dw(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Mw="void",hN=new dN(Mw);class Gz{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Lo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function HW(n,e){return new f.vHH(3302,!1)}();if(null==r||0==r.length)throw function WW(n){return new f.vHH(3303,!1)}();if(!function Yz(n){return"start"==n||"done"==n}(r))throw function zW(n,e){return new f.vHH(3400,!1)}();const a=eo(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};a.push(l);const d=eo(this._engine.statesByElement,e,new Map);return d.has(t)||(Lo(e,kT),Lo(e,kT+"-"+t),d.set(t,hN)),()=>{this._engine.afterFlush(()=>{const p=a.indexOf(l);p>=0&&a.splice(p,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function GW(n){return new f.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),l=new fN(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Lo(e,kT),Lo(e,kT+"-"+t),this._engine.statesByElement.set(e,d=new Map));let p=d.get(t);const y=new dN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d.set(t,y),p||(p=hN),y.value!==Mw&&p.value===y.value){if(!function Jz(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(p.params,y.params)){const Y=[],re=a.matchStyles(p.value,p.params,Y),Ge=a.matchStyles(y.value,y.params,Y);Y.length?this._engine.reportError(Y):this._engine.afterFlush(()=>{rp(e,re),cu(e,Ge)})}return}const A=eo(this._engine.playersByElement,e,[]);A.forEach(Y=>{Y.namespaceId==this.id&&Y.triggerName==t&&Y.queued&&Y.destroy()});let O=a.matchTransition(p.value,y.value,e,y.params),U=!1;if(!O){if(!i)return;O=a.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:p,toState:y,player:l,isFallbackTransition:U}),U||(Lo(e,WL),l.onStart(()=>{E_(e,WL)})),l.onDone(()=>{let Y=this.players.indexOf(l);Y>=0&&this.players.splice(Y,1);const re=this._engine.playersByElement.get(e);if(re){let Ge=re.indexOf(l);Ge>=0&&re.splice(Ge,1)}}),this.players.push(l),A.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,OT,!0);r.forEach(i=>{if(i[Fo])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const d=[];if(a.forEach((p,y)=>{if(l.set(y,p.value),this._triggers.has(y)){const C=this.trigger(e,y,Mw,i);C&&d.push(C)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&dd(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const l=a.name;if(i.has(l))return;i.add(l);const p=this._triggers.get(l).fallbackTransition,y=r.get(l)||hN,C=new dN(Mw),T=new fN(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:C,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Fo];(!a||a===zL)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Lo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,l=this._elementListeners.get(a);l&&l.forEach(d=>{if(d.name==r.triggerName){const p=Kx(a,r.triggerName,r.fromState.value,r.toState.value);p._data=e,Gx(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class qz{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Gz(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(GT(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!GT(t))return;const a=t[Fo];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Lo(e,cN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),E_(e,cN))}removeNode(e,t,r,i){if(GT(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Fo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return GT(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,OT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Jx,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return dd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Fo];if(t&&t.setForRemoval){if(e[Fo]=zL,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(cN)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Lo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?dd(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function qW(n){return new f.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new HT,i=[],a=new Map,l=[],d=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(Nt=>{C.add(Nt);const Gt=this.driver.query(Nt,".ng-animate-queued",!0);for(let Jt=0;Jt<Gt.length;Jt++)C.add(Gt[Jt])});const T=this.bodyNode,A=Array.from(this.statesByElement.keys()),O=KL(A,this.collectedEnterElements),U=new Map;let Y=0;O.forEach((Nt,Gt)=>{const Jt=Xx+Y++;U.set(Gt,Jt),Nt.forEach(Bn=>Lo(Bn,Jt))});const re=[],Ge=new Set,et=new Set;for(let Nt=0;Nt<this.collectedLeaveElements.length;Nt++){const Gt=this.collectedLeaveElements[Nt],Jt=Gt[Fo];Jt&&Jt.setForRemoval&&(re.push(Gt),Ge.add(Gt),Jt.hasAnimation?this.driver.query(Gt,".ng-star-inserted",!0).forEach(Bn=>Ge.add(Bn)):et.add(Gt))}const lt=new Map,ot=KL(A,Array.from(Ge));ot.forEach((Nt,Gt)=>{const Jt=PT+Y++;lt.set(Gt,Jt),Nt.forEach(Bn=>Lo(Bn,Jt))}),e.push(()=>{O.forEach((Nt,Gt)=>{const Jt=U.get(Gt);Nt.forEach(Bn=>E_(Bn,Jt))}),ot.forEach((Nt,Gt)=>{const Jt=lt.get(Gt);Nt.forEach(Bn=>E_(Bn,Jt))}),re.forEach(Nt=>{this.processLeaveNode(Nt)})});const Ot=[],Ut=[];for(let Nt=this._namespaceList.length-1;Nt>=0;Nt--)this._namespaceList[Nt].drainQueuedTransitions(t).forEach(Jt=>{const Bn=Jt.player,Ai=Jt.element;if(Ot.push(Bn),this.collectedEnterElements.length){const Yi=Ai[Fo];if(Yi&&Yi.setForMove){if(Yi.previousTriggersValues&&Yi.previousTriggersValues.has(Jt.triggerName)){const Ep=Yi.previousTriggersValues.get(Jt.triggerName),$o=this.statesByElement.get(Jt.element);if($o&&$o.has(Jt.triggerName)){const $D=$o.get(Jt.triggerName);$D.value=Ep,$o.set(Jt.triggerName,$D)}}return void Bn.destroy()}}const yu=!T||!this.driver.containsElement(T,Ai),so=lt.get(Ai),Cd=U.get(Ai),Lr=this._buildInstruction(Jt,r,Cd,so,yu);if(Lr.errors&&Lr.errors.length)return void Ut.push(Lr);if(yu)return Bn.onStart(()=>rp(Ai,Lr.fromStyles)),Bn.onDestroy(()=>cu(Ai,Lr.toStyles)),void i.push(Bn);if(Jt.isFallbackTransition)return Bn.onStart(()=>rp(Ai,Lr.fromStyles)),Bn.onDestroy(()=>cu(Ai,Lr.toStyles)),void i.push(Bn);const b2=[];Lr.timelines.forEach(Yi=>{Yi.stretchStartingKeyframe=!0,this.disabledNodes.has(Yi.element)||b2.push(Yi)}),Lr.timelines=b2,r.append(Ai,Lr.timelines),l.push({instruction:Lr,player:Bn,element:Ai}),Lr.queriedElements.forEach(Yi=>eo(d,Yi,[]).push(Bn)),Lr.preStyleProps.forEach((Yi,Ep)=>{if(Yi.size){let $o=p.get(Ep);$o||p.set(Ep,$o=new Set),Yi.forEach(($D,dk)=>$o.add(dk))}}),Lr.postStyleProps.forEach((Yi,Ep)=>{let $o=y.get(Ep);$o||y.set(Ep,$o=new Set),Yi.forEach(($D,dk)=>$o.add(dk))})});if(Ut.length){const Nt=[];Ut.forEach(Gt=>{Nt.push(function KW(n,e){return new f.vHH(3505,!1)}())}),Ot.forEach(Gt=>Gt.destroy()),this.reportError(Nt)}const En=new Map,ei=new Map;l.forEach(Nt=>{const Gt=Nt.element;r.has(Gt)&&(ei.set(Gt,Gt),this._beforeAnimationBuild(Nt.player.namespaceId,Nt.instruction,En))}),i.forEach(Nt=>{const Gt=Nt.element;this._getPreviousPlayers(Gt,!1,Nt.namespaceId,Nt.triggerName,null).forEach(Bn=>{eo(En,Gt,[]).push(Bn),Bn.destroy()})});const io=re.filter(Nt=>YL(Nt,p,y)),kl=new Map;qL(kl,this.driver,et,y,Al).forEach(Nt=>{YL(Nt,p,y)&&io.push(Nt)});const f0=new Map;O.forEach((Nt,Gt)=>{qL(f0,this.driver,new Set(Nt),p,"!")}),io.forEach(Nt=>{const Gt=kl.get(Nt),Jt=f0.get(Nt);kl.set(Nt,new Map([...Array.from(Gt?.entries()??[]),...Array.from(Jt?.entries()??[])]))});const vp=[],I2=[],C2={};l.forEach(Nt=>{const{element:Gt,player:Jt,instruction:Bn}=Nt;if(r.has(Gt)){if(C.has(Gt))return Jt.onDestroy(()=>cu(Gt,Bn.toStyles)),Jt.disabled=!0,Jt.overrideTotalTime(Bn.totalTime),void i.push(Jt);let Ai=C2;if(ei.size>1){let so=Gt;const Cd=[];for(;so=so.parentNode;){const Lr=ei.get(so);if(Lr){Ai=Lr;break}Cd.push(so)}Cd.forEach(Lr=>ei.set(Lr,Ai))}const yu=this._buildAnimation(Jt.namespaceId,Bn,En,a,f0,kl);if(Jt.setRealPlayer(yu),Ai===C2)vp.push(Jt);else{const so=this.playersByElement.get(Ai);so&&so.length&&(Jt.parentPlayer=dd(so)),i.push(Jt)}}else rp(Gt,Bn.fromStyles),Jt.onDestroy(()=>cu(Gt,Bn.toStyles)),I2.push(Jt),C.has(Gt)&&i.push(Jt)}),I2.forEach(Nt=>{const Gt=a.get(Nt.element);if(Gt&&Gt.length){const Jt=dd(Gt);Nt.setRealPlayer(Jt)}}),i.forEach(Nt=>{Nt.parentPlayer?Nt.syncPlayerEvents(Nt.parentPlayer):Nt.destroy()});for(let Nt=0;Nt<re.length;Nt++){const Gt=re[Nt],Jt=Gt[Fo];if(E_(Gt,PT),Jt&&Jt.hasAnimation)continue;let Bn=[];if(d.size){let yu=d.get(Gt);yu&&yu.length&&Bn.push(...yu);let so=this.driver.query(Gt,Jx,!0);for(let Cd=0;Cd<so.length;Cd++){let Lr=d.get(so[Cd]);Lr&&Lr.length&&Bn.push(...Lr)}}const Ai=Bn.filter(yu=>!yu.destroyed);Ai.length?Qz(this,Gt,Ai):this.processLeaveNode(Gt)}return re.length=0,vp.forEach(Nt=>{this.players.push(Nt),Nt.onDone(()=>{Nt.destroy();const Gt=this.players.indexOf(Nt);this.players.splice(Gt,1)}),Nt.play()}),vp}elementContainsData(e,t){let r=!1;const i=t[Fo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const p=!a||a==Mw;d.forEach(y=>{y.queued||!p&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const a=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,C=y!==a,T=eo(r,y,[]);this._getPreviousPlayers(y,C,l,d,t.toState).forEach(O=>{const U=O.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),O.destroy(),T.push(O)})}rp(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,l){const d=t.triggerName,p=t.element,y=[],C=new Set,T=new Set,A=t.timelines.map(U=>{const Y=U.element;C.add(Y);const re=Y[Fo];if(re&&re.removedBeforeQueried)return new Tw(U.duration,U.delay);const Ge=Y!==p,et=function Xz(n){const e=[];return ZL(n,e),e}((r.get(Y)||Wz).map(En=>En.getRealPlayer())).filter(En=>!!En.element&&En.element===Y),lt=a.get(Y),ot=l.get(Y),Ot=wL(0,this._normalizer,0,U.keyframes,lt,ot),Ut=this._buildPlayer(U,Ot,et);if(U.subTimeline&&i&&T.add(Y),Ge){const En=new fN(e,d,Y);En.setRealPlayer(Ut),y.push(En)}return Ut});y.forEach(U=>{eo(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function Kz(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,U.element,U))}),C.forEach(U=>Lo(U,RL));const O=dd(A);return O.onDestroy(()=>{C.forEach(U=>E_(U,RL)),cu(p,t.toStyles)}),T.forEach(U=>{eo(i,U,[]).push(O)}),O}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Tw(e.duration,e.delay)}}class fN{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Tw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Gx(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){eo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function GT(n){return n&&1===n.nodeType}function GL(n,e){const t=n.style.display;return n.style.display=e??"none",t}function qL(n,e,t,r,i){const a=[];t.forEach(p=>a.push(GL(p)));const l=[];r.forEach((p,y)=>{const C=new Map;p.forEach(T=>{const A=e.computeStyle(y,T,i);C.set(T,A),(!A||0==A.length)&&(y[Fo]=zz,l.push(y))}),n.set(y,C)});let d=0;return t.forEach(p=>GL(p,a[d++])),l}function KL(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function l(d){if(!d)return 1;let p=a.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:i.has(y)?1:l(y),a.set(d,p),p}return e.forEach(d=>{const p=l(d);1!==p&&t.get(p).push(d)}),t}function Lo(n,e){n.classList?.add(e)}function E_(n,e){n.classList?.remove(e)}function Qz(n,e,t){dd(t).onDone(()=>n.processLeaveNode(e))}function ZL(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof vL?ZL(r.players,e):e.push(r)}}function YL(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class qT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new qz(e,t,r),this._timelineEngine=new Uz(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const p=[],C=rN(this._driver,a,p,[]);if(p.length)throw function LW(n,e){return new f.vHH(3404,!1)}();d=function Oz(n,e,t){return new Fz(n,e,t)}(i,C,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,l]=IL(r);this._timelineEngine.command(a,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[l,d]=IL(r);return this._timelineEngine.listen(l,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let tG=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&cu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cu(this._element,this._initialStyles),this._endStyles&&(cu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(rp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rp(this._element,this._endStyles),this._endStyles=null),cu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function pN(n){let e=null;return n.forEach((t,r)=>{(function nG(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class QL{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:FL(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class rG{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return DL(e,t)}getParentElement(e){return Yx(e)}query(e,t,r){return SL(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,l=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(p.easing=a);const y=new Map,C=l.filter(O=>O instanceof QL);(function az(n,e){return 0===n||0===e})(r,i)&&C.forEach(O=>{O.currentSnapshot.forEach((U,Y)=>y.set(Y,U))});let T=function rz(n){return n.length?n[0]instanceof Map?n:n.map(e=>xL(e)):[]}(t).map(O=>hd(O));T=function uz(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,l)=>{r.has(l)||i.push(l),r.set(l,a)}),i.length)for(let a=1;a<e.length;a++){let l=e[a];i.forEach(d=>l.set(d,FL(n,d)))}}return e}(e,T,y);const A=function eG(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=pN(e[0]),e.length>1&&(r=pN(e[e.length-1]))):e instanceof Map&&(t=pN(e)),t||r?new tG(n,t,r):null}(e,T);return new QL(e,T,p,A)}}let iG=(()=>{class n extends gL{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?mL(t):t;return XL(this._renderer,null,r,"register",[i]),new sG(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class sG extends class gW{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new oG(this._id,e,t||{},this._renderer)}}class oG{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return XL(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function XL(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const JL="@.disabled";let aG=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,l)=>{const d=l?.parentNode(a);d&&l.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(a);return C||(C=new eV("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,C)),C}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(l,d,t,C.name,C)};return r.data.animation.forEach(p),new uG(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,d]=a;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(qT),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class eV{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==JL?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class uG extends eV{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==JL?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function lG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),l="";return"@"!=a.charAt(0)&&([a,l]=function cG(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let dG=(()=>{class n extends qT{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue),f.LFG(Qx),f.LFG(uN),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const tV=[{provide:gL,useClass:iG},{provide:uN,useFactory:function hG(){return new xz}},{provide:qT,useClass:dG},{provide:f.FYo,useFactory:function fG(n,e,t){return new aG(n,e,t)},deps:[zd,qT,f.R0b]}],gN=[{provide:Qx,useFactory:()=>new rG},{provide:f.QbO,useValue:"BrowserAnimations"},...tV],nV=[{provide:Qx,useClass:AL},{provide:f.QbO,useValue:"NoopAnimations"},...tV];let pG=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?nV:gN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:gN,imports:[Ko]}),n})();const mN_firebase={projectId:"forms-project-6cf66",appId:"1:252612235458:web:884e9081fb0adeb953eb5b",storageBucket:"forms-project-6cf66.appspot.com",locationId:"europe-west",apiKey:"AIzaSyAMXS95RS3b23xBBOKkMv8ajggNJwonXt8",authDomain:"forms-project-6cf66.firebaseapp.com",messagingSenderId:"252612235458",measurementId:"G-7V3E047GQ2"},rV="@firebase/database",iV="0.13.10";let _N="";class mG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,J.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,J.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class _G{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,J.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const sV=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mG(e)}}catch{}return new _G},sp=sV("localStorage"),yN=sV("sessionStorage"),w_=new Qs.Yd("@firebase/database"),oV=function(){let n=1;return function(){return n++}}(),aV=function(n){const e=(0,J.dS)(n),t=new J.gQ;t.update(e);const r=t.digest();return J.US.encodeByteArray(r)},Rw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Rw.apply(null,r):e+="object"==typeof r?(0,J.Wl)(r):r,e+=" "}return e};let op=null,uV=!0;const Di=function(...n){if(!0===uV&&(uV=!1,null===op&&!0===yN.get("logging_enabled")&&function(n,e){(0,J.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(w_.logLevel=Qs.in.VERBOSE,op=w_.log.bind(w_),e&&yN.set("logging_enabled",!0)):"function"==typeof n?op=n:(op=null,yN.remove("logging_enabled"))}(!0)),op){const e=Rw.apply(null,n);op(e)}},xw=function(n){return function(...e){Di(n,...e)}},vN=function(...n){const e="FIREBASE INTERNAL ERROR: "+Rw(...n);w_.error(e)},du=function(...n){const e=`FIREBASE FATAL ERROR: ${Rw(...n)}`;throw w_.error(e),new Error(e)},Zi=function(...n){const e="FIREBASE WARNING: "+Rw(...n);w_.warn(e)},ZT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Rl="[MIN_NAME]",hu="[MAX_NAME]",ap=function(n,e){if(n===e)return 0;if(n===Rl||e===hu)return-1;if(e===Rl||n===hu)return 1;{const t=YT(n),r=YT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},EG=function(n,e){return n===e?0:n<e?-1:1},Nw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,J.Wl)(e))},EN=function(n){if("object"!=typeof n||null===n)return(0,J.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,J.Wl)(e[r]),t+=":",t+=EN(n[e[r]]);return t+="}",t},cV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const dV=function(n){(0,J.hu)(!ZT(n),"Invalid JSON number");const r=1023;let i,a,l,d,p;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const C=y.join("");let T="";for(p=0;p<64;p+=8){let A=parseInt(C.substr(p,8),2).toString(16);1===A.length&&(A="0"+A),T+=A}return T.toLowerCase()},bG=new RegExp("^-?(0*)\\d{1,10}$"),YT=function(n){if(bG.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},I_=function(n){try{n()}catch(e){setTimeout(()=>{throw Zi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Pw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class DG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class SG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Di("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zi(e)}}let kw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const _V=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,EV="websocket",wV="long_polling";class CN{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function IV(n,e,t){let r;if((0,J.hu)("string"==typeof e,"typeof type must == string"),(0,J.hu)("object"==typeof t,"typeof params must == object"),e===EV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==wV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function AG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Si(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class MG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,J.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,J.p$)(this.counters_)}}const bN={},TN={};function DN(n){const e=n.toString();return bN[e]||(bN[e]=new MG),bN[e]}class xG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&I_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fd{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xw(e),this.stats_=DN(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),IV(t,wV,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new xG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,J.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new SN((...a)=>{const[l,d,p,y,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&_V.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fd.forceAllow_=!0}static forceDisallow(){fd.forceDisallow_=!0}static isAvailable(){return!((0,J.Yr)()||!fd.forceAllow_&&(fd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,J.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,J.h$)(t),i=cV(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,J.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,J.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class SN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=oV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=SN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Di("frame writing exception"),d.stack&&Di(d.stack),Di(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Di("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,J.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Di("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let XT=null;typeof MozWebSocket<"u"?XT=MozWebSocket:typeof WebSocket<"u"&&(XT=WebSocket);let C_=(()=>{class n{constructor(t,r,i,a,l,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xw(this.connId),this.stats_=DN(r),this.connURL=n.connectionURL_(r,d,p,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,J.Yr)()&&typeof location<"u"&&location.hostname&&_V.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),IV(t,EV,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sp.set("previous_websocket_failure",!0);try{let i;if((0,J.Yr)()){i={headers:{"User-Agent":`Firebase/5/${_N}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new XT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==XT&&!n.forceDisallow_}static previouslyFailed(){return sp.isInMemoryStorage||!0===sp.get("previous_websocket_failure")}markConnectionHealthy(){sp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,J.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,J.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cV(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),MV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[fd,C_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=C_&&C_.isAvailable();let i=r&&!C_.previouslyFailed();if(t.webSocketOnly&&(r||Zi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[C_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class FV{constructor(e,t,r,i,a,l,d,p,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xw("c:"+this.id+":"),this.transportManager_=new MV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Pw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Nw("t",e),r=Nw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Nw("t",e),r=Nw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Nw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?vN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Zi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Pw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class LV{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class VV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,J.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,J.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class JT extends VV{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,J.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new JT}getInitialEvent(e){return(0,J.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Xn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function zn(){return new Xn("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function pd(n){return n.pieces_.length-n.pieceNum_}function fr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Xn(n.pieces_,e)}function MN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ow(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function $V(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Xn(e,0)}function xr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Xn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Xn(t,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function us(n,e){const t=yn(n),r=yn(e);if(null===t)return e;if(t===r)return us(fr(n),fr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function RN(n,e){if(pd(n)!==pd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Vo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(pd(n)>pd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class e3{constructor(e,t){this.errorPrefix_=t,this.parts_=Ow(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,J.ug)(this.parts_[r]);jV(this)}}function jV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+up(n))}function up(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class xN extends VV{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new xN}getInitialEvent(e){return(0,J.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Fw=1e3;let tD,lp=(()=>{class n extends LV{constructor(t,r,i,a,l,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=xw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&JT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,J.Wl)(l)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new J.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,J.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,J.r3)(t,"w")){const i=(0,J.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Zi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,J.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,J.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,J.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,J.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):vN("Unrecognized action received from server: "+(0,J.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Fw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,a())};t.realtime_={close:C,sendRequest:function(O){(0,J.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,U]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);p?Di("getToken() completed but was canceled"):(Di("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=U&&U.token,y=new FV(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Y=>{Zi(Y+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),p||(t.repoInfo_.nodeAdmin&&Zi(O),C())}}})()}interrupt(t){Di("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Di("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Fw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>EN(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Xn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Di("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Di("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,J.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+_N.replace(/\./g,"-")]=1,(0,J.uI)()?t["framework.cordova"]=1:(0,J.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=JT.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class In{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new In(e,t)}}class eD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new In(Rl,e),i=new In(Rl,t);return 0!==this.compare(r,i)}minPost(){return In.MIN}}class zV extends eD{static get __EMPTY_NODE(){return tD}static set __EMPTY_NODE(e){tD=e}compare(e,t){return ap(e.name,t.name)}isDefinedOn(e){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return In.MIN}maxPost(){return new In(hu,tD)}makePost(e,t){return(0,J.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new In(e,tD)}toString(){return".key"}}const fu=new zV;class nD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let PN,ga=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ps.EMPTY_NODE,this.right=l??Ps.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ps.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ps.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ps{constructor(e,t=Ps.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ps(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ga.BLACK,null,null))}remove(e){return new Ps(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ga.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nD(this.root_,null,this.comparator_,!0,e)}}function u3(n,e){return ap(n.name,e.name)}function NN(n,e){return ap(n,e)}Ps.EMPTY_NODE=new class a3{copy(e,t,r,i,a){return this}insert(e,t,r){return new ga(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const GV=function(n){return"number"==typeof n?"number:"+dV(n):"string:"+n},qV=function(n){if(n.isLeafNode()){const e=n.val();(0,J.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,J.r3)(e,".sv"),"Priority must be a string or number.")}else(0,J.hu)(n===PN||n.isEmpty(),"priority of unexpected type.");(0,J.hu)(n===PN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let KV,ZV,YV,b_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qV(this.priorityNode_)}static set __childrenNodeConstructor(t){KV=t}static get __childrenNodeConstructor(){return KV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vn(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=yn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,J.hu)(".priority"!==i||1===pd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(fr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+GV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?dV(this.value_):this.value_,this.lazyHash_=aV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,J.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,J.hu)(a>=0,"Unknown leaf type: "+r),(0,J.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const vr=new class h3 extends eD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?ap(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return In.MIN}maxPost(){return new In(hu,new b_("[PRIORITY-POST]",YV))}makePost(e,t){const r=ZV(e);return new In(t,new b_("[PRIORITY-POST]",r))}toString(){return".priority"}},f3=Math.log(2);class p3{constructor(e){this.count=parseInt(Math.log(e+1)/f3,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rD=function(n,e,t,r){n.sort(e);const i=function(p,y){const C=y-p;let T,A;if(0===C)return null;if(1===C)return T=n[p],A=t?t(T):T,new ga(A,T.node,ga.BLACK,null,null);{const O=parseInt(C/2,10)+p,U=i(p,O),Y=i(O+1,y);return T=n[O],A=t?t(T):T,new ga(A,T.node,ga.BLACK,U,Y)}},d=function(p){let y=null,C=null,T=n.length;const A=function(U,Y){const re=T-U,Ge=T;T-=U;const et=i(re+1,Ge),lt=n[re],ot=t?t(lt):lt;O(new ga(ot,lt.node,Y,null,et))},O=function(U){y?(y.left=U,y=U):(C=U,y=U)};for(let U=0;U<p.count;++U){const Y=p.nextBitIsOne(),re=Math.pow(2,p.count-(U+1));Y?A(re,ga.BLACK):(A(re,ga.BLACK),A(re,ga.RED))}return C}(new p3(n.length));return new Ps(r||e,d)};let kN;const T_={};class xl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,J.hu)(T_&&vr,"ChildrenNode.ts has not been loaded"),kN=kN||new xl({".priority":T_},{".priority":vr}),kN}get(e){const t=(0,J.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ps?t:null}hasIndex(e){return(0,J.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,J.hu)(e!==fu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(In.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?rD(r,e.getCompare()):T_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const C=Object.assign({},this.indexes_);return C[p]=d,new xl(C,y)}addToIndexes(e,t){const r=(0,J.UI)(this.indexes_,(i,a)=>{const l=(0,J.DV)(this.indexSet_,a);if((0,J.hu)(l,"Missing index implementation for "+a),i===T_){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator(In.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),rD(d,l.getCompare())}return T_}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new In(e.name,d))),p.insert(e,e.node)}});return new xl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,J.UI)(this.indexes_,i=>{if(i===T_)return i;{const a=t.get(e.name);return a?i.remove(new In(e.name,a)):i}});return new xl(r,this.indexSet_)}}let Lw,fn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&qV(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Lw||(Lw=new n(new Ps(NN),null,xl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Lw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Lw:r}}getChild(t){const r=yn(t);return null===r?this:this.getImmediateChild(r).getChild(fr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,J.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new In(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?Lw:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=yn(t);if(null===i)return r;{(0,J.hu)(".priority"!==yn(t)||1===pd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(fr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(vr,(d,p)=>{r[d]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+GV(this.getPriority().val())+":"),this.forEachChild(vr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":aV(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new In(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new In(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new In(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,In.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,In.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vw?-1:0}withIndex(t){if(t===fu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===fu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(vr),a=r.getIterator(vr);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===fu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Vw=new class g3 extends fn{constructor(){super(new Ps(NN),fn.EMPTY_NODE,xl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fn.EMPTY_NODE}isEmpty(){return!1}};function Fr(n,e=null){if(null===n)return fn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,J.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new b_(n,Fr(e));if(n instanceof Array){let t=fn.EMPTY_NODE;return Si(n,(r,i)=>{if((0,J.r3)(n,r)&&"."!==r.substring(0,1)){const a=Fr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Fr(e))}{const t=[];let r=!1;if(Si(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Fr(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new In(l,p)))}}),0===t.length)return fn.EMPTY_NODE;const a=rD(t,u3,l=>l.name,NN);if(r){const l=rD(t,vr.getCompare());return new fn(a,Fr(e),new xl({".priority":l},{".priority":vr}))}return new fn(a,Fr(e),xl.Default)}}Object.defineProperties(In,{MIN:{value:new In(Rl,fn.EMPTY_NODE)},MAX:{value:new In(hu,Vw)}}),zV.__EMPTY_NODE=fn.EMPTY_NODE,b_.__childrenNodeConstructor=fn,function l3(n){PN=n}(Vw),function d3(n){YV=n}(Vw),function c3(n){ZV=n}(Fr);class ON extends eD{constructor(e){super(),this.indexPath_=e,(0,J.hu)(!vn(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?ap(e.name,t.name):a}makePost(e,t){const r=Fr(e),i=fn.EMPTY_NODE.updateChild(this.indexPath_,r);return new In(t,i)}maxPost(){const e=fn.EMPTY_NODE.updateChild(this.indexPath_,Vw);return new In(hu,e)}toString(){return Ow(this.indexPath_,0).join("/")}}const FN=new class _3 extends eD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ap(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return In.MIN}maxPost(){return In.MAX}makePost(e,t){const r=Fr(e);return new In(t,r)}toString(){return".value"}};function Bw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class UN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vr}copy(){const e=new UN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nU(n){const e={};if(n.isDefault())return e;let t;return n.index_===vr?t="$priority":n.index_===FN?t="$value":n.index_===fu?t="$key":((0,J.hu)(n.index_ instanceof ON,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,J.Wl)(t),n.startSet_&&(e.startAt=(0,J.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,J.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,J.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,J.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function rU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==vr&&(e.i=n.index_.toString()),e}class sD extends LV{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,J.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=sD.getListenId_(e,r),d={};this.listens_[l]=d;const p=nU(e._queryParams);this.restRequest_(a+".json",p,(y,C)=>{let T=C;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(a,T,!1,r),(0,J.DV)(this.listens_,l)===d){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(A,null)}})}unlisten(e,t){const r=sD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=nU(e._queryParams),r=e._path.toString(),i=new J.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,J.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,J.cI)(d.responseText)}catch{Zi("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&Zi("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class D3{constructor(){this.rootNode_=fn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function oD(){return{value:null,children:new Map}}function A_(n,e,t){if(vn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=yn(e);n.children.has(r)||n.children.set(r,oD()),A_(n.children.get(r),e=fr(e),t)}}function HN(n,e,t){null!==n.value?t(e,n.value):function S3(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{HN(i,new Xn(e.toString()+"/"+r),t)})}class A3{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Si(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class x3{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new A3(e);const r=1e4+2e4*Math.random();Pw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Si(e,(i,a)=>{a>0&&(0,J.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Pw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Uo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Uo||(Uo={})),Uo))();function GN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Uo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Xn(e));return new aD(zn(),t,this.revert)}}return(0,J.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new aD(fr(this.path),this.affectedTree,this.revert)}}class cp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Uo.OVERWRITE}operationForChild(e){return vn(this.path)?new cp(this.source,zn(),this.snap.getImmediateChild(e)):new cp(this.source,fr(this.path),this.snap)}}class M_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Uo.MERGE}operationForChild(e){if(vn(this.path)){const t=this.children.subtree(new Xn(e));return t.isEmpty()?null:t.value?new cp(this.source,zn(),t.value):new M_(this.source,zn(),t)}return(0,J.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new M_(this.source,fr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vn(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Hw(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,p)=>function O3(n,e,t){if(null==e.childName||null==t.childName)throw(0,J.g5)("Should only compare child_ events.");const r=new In(e.childName,e.snapshotNode),i=new In(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),l.forEach(d=>{const p=function k3(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function uD(n,e){return{eventCache:n,serverCache:e}}function Ww(n,e,t,r){return uD(new gd(e,t,r),n.serverCache)}function sU(n,e,t,r){return uD(n.eventCache,new gd(e,t,r))}function lD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function dp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let qN;class Er{constructor(e,t=(()=>(qN||(qN=new Ps(EG)),qN))()){this.value=e,this.children=t}static fromObject(e){let t=new Er(null);return Si(e,(r,i)=>{t=t.set(new Xn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:zn(),value:this.value};if(vn(e))return null;{const r=yn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(fr(e),t);return null!=a?{path:xr(new Xn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vn(e))return this;{const t=yn(e),r=this.children.get(t);return null!==r?r.subtree(fr(e)):new Er(null)}}set(e,t){if(vn(e))return new Er(t,this.children);{const r=yn(e),a=(this.children.get(r)||new Er(null)).set(fr(e),t),l=this.children.insert(r,a);return new Er(this.value,l)}}remove(e){if(vn(e))return this.children.isEmpty()?new Er(null):new Er(null,this.children);{const t=yn(e),r=this.children.get(t);if(r){const i=r.remove(fr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Er(null):new Er(this.value,a)}return this}}get(e){if(vn(e))return this.value;{const t=yn(e),r=this.children.get(t);return r?r.get(fr(e)):null}}setTree(e,t){if(vn(e))return t;{const r=yn(e),a=(this.children.get(r)||new Er(null)).setTree(fr(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Er(this.value,l)}}fold(e){return this.fold_(zn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(xr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,zn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(vn(e))return null;{const a=yn(e),l=this.children.get(a);return l?l.findOnPath_(fr(e),xr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,zn(),t)}foreachOnPath_(e,t,r){if(vn(e))return this;{this.value&&r(t,this.value);const i=yn(e),a=this.children.get(i);return a?a.foreachOnPath_(fr(e),xr(t,i),r):new Er(null)}}foreach(e){this.foreach_(zn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(xr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ma{constructor(e){this.writeTree_=e}static empty(){return new ma(new Er(null))}}function zw(n,e,t){if(vn(e))return new ma(new Er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=us(i,e);return a=a.updateChild(l,t),new ma(n.writeTree_.set(i,a))}{const i=new Er(t),a=n.writeTree_.setTree(e,i);return new ma(a)}}}function KN(n,e,t){let r=n;return Si(t,(i,a)=>{r=zw(r,xr(e,i),a)}),r}function oU(n,e){if(vn(e))return ma.empty();{const t=n.writeTree_.setTree(e,new Er(null));return new ma(t)}}function ZN(n,e){return null!=hp(n,e)}function hp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(us(t.path,e)):null}function aU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(vr,(r,i)=>{e.push(new In(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new In(r,i.value))}),e}function md(n,e){if(vn(e))return n;{const t=hp(n,e);return new ma(null!=t?new Er(t):n.writeTree_.subtree(e))}}function YN(n){return n.writeTree_.isEmpty()}function R_(n,e){return uU(zn(),n.writeTree_,e)}function uU(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,J.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=uU(xr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(xr(n,".priority"),r)),t}}function cD(n,e){return fU(e,n)}function $3(n,e){if(n.snap)return Vo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Vo(xr(n.path,t),e))return!0;return!1}function H3(n){return n.visible}function lU(n,e,t){let r=ma.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)Vo(t,l)?(d=us(t,l),r=zw(r,d,a.snap)):Vo(l,t)&&(d=us(l,t),r=zw(r,zn(),a.snap.getChild(d)));else{if(!a.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(Vo(t,l))d=us(t,l),r=KN(r,d,a.children);else if(Vo(l,t))if(d=us(l,t),vn(d))r=KN(r,zn(),a.children);else{const p=(0,J.DV)(a.children,yn(d));if(p){const y=p.getChild(fr(d));r=zw(r,zn(),y)}}}}}return r}function cU(n,e,t,r,i){if(r||i){const a=md(n.visibleWrites,e);return!i&&YN(a)?t:i||null!=t||ZN(a,zn())?R_(lU(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Vo(y.path,e)||Vo(e,y.path))},e),t||fn.EMPTY_NODE):null}{const a=hp(n.visibleWrites,e);if(null!=a)return a;{const l=md(n.visibleWrites,e);return YN(l)?t:null!=t||ZN(l,zn())?R_(l,t||fn.EMPTY_NODE):null}}}function dD(n,e,t,r){return cU(n.writeTree,n.treePath,e,t,r)}function QN(n,e){return function W3(n,e,t){let r=fn.EMPTY_NODE;const i=hp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(vr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=md(n.visibleWrites,e);return t.forEachChild(vr,(l,d)=>{const p=R_(md(a,new Xn(l)),d);r=r.updateImmediateChild(l,p)}),aU(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return aU(md(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function dU(n,e,t,r){return function z3(n,e,t,r,i){(0,J.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=xr(e,t);if(ZN(n.visibleWrites,a))return null;{const l=md(n.visibleWrites,a);return YN(l)?i.getChild(t):R_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function hD(n,e){return function q3(n,e){return hp(n.visibleWrites,e)}(n.writeTree,xr(n.treePath,e))}function XN(n,e,t){return function G3(n,e,t,r){const i=xr(e,t),a=hp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?R_(md(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function hU(n,e){return fU(xr(n.treePath,e),n.writeTree)}function fU(n,e){return{treePath:n,writeTree:e}}class Q3{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,J.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Bw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function Uw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function S_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,J.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Bw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const pU=new class X3{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class JN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new gd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return XN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:dp(this.viewCache_),a=function Y3(n,e,t,r,i,a){return function K3(n,e,t,r,i,a,l){let d;const p=md(n.visibleWrites,e),y=hp(p,zn());if(null!=y)d=y;else{if(null==t)return[];d=R_(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const C=[],T=l.getCompare(),A=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let O=A.getNext();for(;O&&C.length<i;)0!==T(O,r)&&C.push(O),O=A.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function gU(n,e,t,r,i,a){const l=e.eventCache;if(null!=hD(r,t))return e;{let d,p;if(vn(t))if((0,J.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=dp(e),T=QN(r,y instanceof fn?y:fn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const y=dD(r,dp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=yn(t);if(".priority"===y){(0,J.hu)(1===pd(t),"Can't have a priority with additional path components");const C=l.getNode();p=e.serverCache.getNode();const T=dU(r,t,C,p);d=null!=T?n.filter.updatePriority(C,T):l.getNode()}else{const C=fr(t);let T;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const A=dU(r,t,l.getNode(),p);T=null!=A?l.getNode().getImmediateChild(y).updateChild(C,A):l.getNode().getImmediateChild(y)}else T=XN(r,y,e.serverCache);d=null!=T?n.filter.updateChild(l.getNode(),y,T,C,i,a):l.getNode()}}return Ww(e,d,l.isFullyInitialized()||vn(t),n.filter.filtersNodes())}}function fD(n,e,t,r,i,a,l,d){const p=e.serverCache;let y;const C=l?n.filter:n.filter.getIndexedFilter();if(vn(t))y=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(t,r);y=C.updateFullNode(p.getNode(),O,null)}else{const O=yn(t);if(!p.isCompleteForPath(t)&&pd(t)>1)return e;const U=fr(t),re=p.getNode().getImmediateChild(O).updateChild(U,r);y=".priority"===O?C.updatePriority(p.getNode(),re):C.updateChild(p.getNode(),O,re,U,pU,null)}const T=sU(e,y,p.isFullyInitialized()||vn(t),C.filtersNodes());return gU(n,T,t,i,new JN(i,T,a),d)}function eP(n,e,t,r,i,a,l){const d=e.eventCache;let p,y;const C=new JN(i,e,a);if(vn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=Ww(e,y,!0,n.filter.filtersNodes());else{const T=yn(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=Ww(e,y,d.isFullyInitialized(),d.isFiltered());else{const A=fr(t),O=d.getNode().getImmediateChild(T);let U;if(vn(A))U=r;else{const Y=C.getCompleteChild(T);U=null!=Y?".priority"===MN(A)&&Y.getChild($V(A)).isEmpty()?Y:Y.updateChild(A,r):fn.EMPTY_NODE}p=O.equals(U)?e:Ww(e,n.filter.updateChild(d.getNode(),T,U,A,C,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function mU(n,e){return n.eventCache.isCompleteForChild(e)}function _U(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function tP(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=vn(t)?r:new Er(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((T,A)=>{if(C.hasChild(T)){const U=_U(0,e.serverCache.getNode().getImmediateChild(T),A);p=fD(n,p,new Xn(T),U,i,a,l,d)}}),y.children.inorderTraversal((T,A)=>{const O=!e.serverCache.isCompleteForChild(T)&&null===A.value;if(!C.hasChild(T)&&!O){const Y=_U(0,e.serverCache.getNode().getImmediateChild(T),A);p=fD(n,p,new Xn(T),Y,i,a,l,d)}}),p}function cq(n,e){const t=dp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vn(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function EU(n,e,t,r){e.type===Uo.MERGE&&null!==e.source.queryId&&((0,J.hu)(dp(n.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(lD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function tq(n,e,t,r,i){const a=new Q3;let l,d;if(t.type===Uo.OVERWRITE){const y=t;y.source.fromUser?l=eP(n,e,y.path,y.snap,r,i,a):((0,J.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!vn(y.path),l=fD(n,e,y.path,y.snap,r,i,d,a))}else if(t.type===Uo.MERGE){const y=t;y.source.fromUser?l=function rq(n,e,t,r,i,a,l){let d=e;return r.foreach((p,y)=>{const C=xr(t,p);mU(e,yn(C))&&(d=eP(n,d,C,y,i,a,l))}),r.foreach((p,y)=>{const C=xr(t,p);mU(e,yn(C))||(d=eP(n,d,C,y,i,a,l))}),d}(n,e,y.path,y.children,r,i,a):((0,J.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=tP(n,e,y.path,y.children,r,i,d,a))}else if(t.type===Uo.ACK_USER_WRITE){const y=t;l=y.revert?function oq(n,e,t,r,i,a){let l;if(null!=hD(r,t))return e;{const d=new JN(r,e,i),p=e.eventCache.getNode();let y;if(vn(t)||".priority"===yn(t)){let C;if(e.serverCache.isFullyInitialized())C=dD(r,dp(e));else{const T=e.serverCache.getNode();(0,J.hu)(T instanceof fn,"serverChildren would be complete if leaf node"),C=QN(r,T)}y=n.filter.updateFullNode(p,C,a)}else{const C=yn(t);let T=XN(r,C,e.serverCache);null==T&&e.serverCache.isCompleteForChild(C)&&(T=p.getImmediateChild(C)),y=null!=T?n.filter.updateChild(p,C,T,fr(t),d,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,fn.EMPTY_NODE,fr(t),d,a):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=dD(r,dp(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=hD(r,zn()),Ww(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function iq(n,e,t,r,i,a,l){if(null!=hD(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(vn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return fD(n,e,t,p.getNode().getChild(t),i,a,d,l);if(vn(t)){let y=new Er(null);return p.getNode().forEachChild(fu,(C,T)=>{y=y.set(new Xn(C),T)}),tP(n,e,t,y,i,a,d,l)}return e}{let y=new Er(null);return r.foreach((C,T)=>{const A=xr(t,C);p.isCompleteForPath(A)&&(y=y.set(C,p.getNode().getChild(A)))}),tP(n,e,t,y,i,a,d,l)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==Uo.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+t.type);l=function sq(n,e,t,r,i){const a=e.serverCache;return gU(n,sU(e,a.getNode(),a.isFullyInitialized()||vn(t),a.isFiltered()),t,r,pU,i)}(n,e,t.path,r,a)}const p=a.getChanges();return function nq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=lD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function tU(n){return{type:"value",snapshotNode:n}}(lD(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function eq(n,e){(0,J.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,J.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function wU(n,e,t,r){return function P3(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function v3(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Hw(n,i,"child_removed",e,r,t),Hw(n,i,"child_added",e,r,t),Hw(n,i,"child_moved",a,r,t),Hw(n,i,"child_changed",e,r,t),Hw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let pD,mD;function nP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,J.hu)(null!=a,"SyncTree gave us an op for an invalid query."),EU(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(EU(l,e,t,r));return a}}function _d(n,e){let t=null;for(const r of n.views.values())t=t||cq(r,e);return t}class SU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Er(null),this.pendingWriteTree_=function Z3(){return{visibleWrites:ma.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function rP(n,e,t,r,i){return function L3(n,e,t,r,i){(0,J.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=zw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?x_(n,new cp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function vd(n,e,t=!1){const r=function U3(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function B3(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,J.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&$3(d,r.path)?i=!1:Vo(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function j3(n){n.visibleWrites=lU(n.allWrites,H3,zn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=oU(n.visibleWrites,r.path):Si(r.children,p=>{n.visibleWrites=oU(n.visibleWrites,xr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let a=new Er(null);return null!=r.snap?a=a.set(zn(),!0):Si(r.children,l=>{a=a.set(new Xn(l),!0)}),x_(n,new aD(r.path,a,t))}return[]}function Gw(n,e,t){return x_(n,new cp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=_d(d,us(l,e));if(y)return y});return cU(i,e,a,t,!0)}function x_(n,e){return MU(e,n.syncPointTree_,null,cD(n.pendingWriteTree_,zn()))}function MU(n,e,t,r){if(vn(n.path))return RU(n,e,t,r);{const i=e.get(zn());null==t&&null!=i&&(t=_d(i,zn()));let a=[];const l=yn(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const y=t?t.getImmediateChild(l):null,C=hU(r,l);a=a.concat(MU(d,p,y,C))}return i&&(a=a.concat(nP(i,n,r,t))),a}}function RU(n,e,t,r){const i=e.get(zn());null==t&&null!=i&&(t=_d(i,zn()));let a=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,y=hU(r,l),C=n.operationForChild(l);C&&(a=a.concat(RU(C,d,p,y)))}),i&&(a=a.concat(nP(i,n,r,t))),a}function sP(n,e){return n.tagToQueryMap.get(e)}function oP(n){const e=n.indexOf("$");return(0,J.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Xn(n.substr(0,e))}}function aP(n,e,t){const r=n.syncPointTree_.get(e);return(0,J.hu)(r,"Missing sync point for query tag that we're tracking"),nP(r,t,cD(n.pendingWriteTree_,e),null)}class uP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new uP(t)}node(){return this.node_}}class lP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xr(this.path_,e);return new lP(this.syncTree_,t)}node(){return yD(this.syncTree_,this.path_)}}const NU=function(n,e,t){return n&&"object"==typeof n?((0,J.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Nq(n[".sv"],e,t):"object"==typeof n[".sv"]?Pq(n[".sv"],e):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Nq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,J.hu)(!1,"Unexpected server value: "+n)},Pq=function(n,e,t){n.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,J.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,J.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},cP=function(n,e,t){return dP(n,new uP(e),t)};function dP(n,e,t){const r=n.getPriority().val(),i=NU(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=NU(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new b_(d,Fr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new b_(i))),l.forEachChild(vr,(d,p)=>{const y=dP(p,e.getImmediateChild(d),t);y!==p&&(a=a.updateImmediateChild(d,y))}),a}}class hP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ED(n,e){let t=e instanceof Xn?e:new Xn(e),r=n,i=yn(t);for(;null!==i;){const a=(0,J.DV)(r.node.children,i)||{children:{},childCount:0};r=new hP(i,r,a),t=fr(t),i=yn(t)}return r}function fp(n){return n.node.value}function fP(n,e){n.node.value=e,pP(n)}function kU(n){return n.node.childCount>0}function wD(n,e){Si(n.node.children,(t,r)=>{e(new hP(t,n,r))})}function OU(n,e,t,r){t&&!r&&e(n),wD(n,i=>{OU(i,e,!0,r)}),t&&r&&e(n)}function Zw(n){return new Xn(null===n.parent?n.name:Zw(n.parent)+"/"+n.name)}function pP(n){null!==n.parent&&function Fq(n,e,t){const r=function kq(n){return void 0===fp(n)&&!kU(n)}(t),i=(0,J.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,pP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,pP(n))}(n.parent,n.name,n)}const Lq=/[\[\].#$\/\u0000-\u001F\u007F]/,Vq=/[\[\].#$\u0000-\u001F\u007F]/,gP=10485760,ID=function(n){return"string"==typeof n&&0!==n.length&&!Lq.test(n)},Qw=function(n,e,t){const r=t instanceof Xn?new e3(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+up(r));if("function"==typeof e)throw new Error(n+"contains a function "+up(r)+" with contents = "+e.toString());if(ZT(e))throw new Error(n+"contains "+e.toString()+" "+up(r));if("string"==typeof e&&e.length>gP/3&&(0,J.ug)(e)>gP)throw new Error(n+"contains a string greater than "+gP+" utf8 bytes "+up(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Si(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!ID(l)))throw new Error(n+" contains an invalid key ("+l+") "+up(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function t3(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,J.ug)(e),jV(n)})(r,l),Qw(n,d,r),function n3(n){const e=n.parts_.pop();n.byteLength_-=(0,J.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+up(r)+" in addition to actual children.")}},VU=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ID(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Vq.test(n)}(n)}(t))throw new Error((0,J.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class jq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function no(n,e,t){(function CD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!RN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function BU(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Hq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Vo(r,e)||Vo(e,r))}function Hq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();op&&Di("event: "+t.toString()),I_(r)}}}class zq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oD(),this.transactionQueueTree_=new hP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jU(n){const t=n.infoData_.getNode(new Xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Jw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:jU(n)})}function HU(n,e,t,r,i){n.dataUpdateCount++;const a=new Xn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,J.UI)(t,y=>Fr(y));l=function Tq(n,e,t,r){const i=sP(n,r);if(i){const a=oP(i),l=a.path,d=a.queryId,p=us(l,e),y=Er.fromObject(t);return aP(n,l,new M_(GN(d),p,y))}return[]}(n.serverSyncTree_,a,p,i)}else{const p=Fr(t);l=function AU(n,e,t,r){const i=sP(n,r);if(null!=i){const a=oP(i),l=a.path,d=a.queryId,p=us(l,e);return aP(n,l,new cp(GN(d),p,t))}return[]}(n.serverSyncTree_,a,p,i)}else if(r){const p=(0,J.UI)(t,y=>Fr(y));l=function Iq(n,e,t){const r=Er.fromObject(t);return x_(n,new M_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,p)}else{const p=Fr(t);l=Gw(n.serverSyncTree_,a,p)}let d=a;l.length>0&&(d=P_(n,a)),no(n.eventQueue_,d,l)}function WU(n,e){yP(n,"connected",e),!1===e&&function Yq(n){N_(n,"onDisconnectEvents");const e=Jw(n),t=oD();HN(n.onDisconnect_,zn(),(i,a)=>{const l=function(n,e,t,r){return dP(e,new lP(t,n),r)}(i,a,n.serverSyncTree_,e);A_(t,i,l)});let r=[];HN(t,zn(),(i,a)=>{r=r.concat(Gw(n.serverSyncTree_,i,a));const l=function IP(n,e){const t=Zw(qU(n,e)),r=ED(n.transactionQueueTree_,e);return function Oq(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{CP(n,i)}),CP(n,r),OU(r,i=>{CP(n,i)}),t}(n,i);P_(n,l)}),n.onDisconnect_=oD(),no(n.eventQueue_,zn(),r)}(n)}function yP(n,e,t){const r=new Xn("/.info/"+e),i=Fr(t);n.infoData_.updateSnapshot(r,i);const a=Gw(n.infoSyncTree_,r,i);no(n.eventQueue_,r,a)}function bD(n){return n.nextWriteId_++}function N_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Di(t,...e)}function wP(n,e,t){return yD(n.serverSyncTree_,e,t)||fn.EMPTY_NODE}function TD(n,e=n.transactionQueueTree_){if(e||DD(n,e),fp(e)){const t=KU(n,e);(0,J.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function r6(n,e,t){const r=t.map(y=>y.currentWriteId),i=wP(n,e,r);let a=i;const l=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,J.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const T=us(e,C.path);a=a.updateChild(T,C.currentOutputSnapshotRaw)}const d=a.val(!0),p=e;n.server_.put(p.toString(),d,y=>{N_(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const T=[];for(let A=0;A<t.length;A++)t[A].status=2,C=C.concat(vd(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&T.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();DD(n,ED(n.transactionQueueTree_,e)),TD(n,n.transactionQueueTree_),no(n.eventQueue_,e,C);for(let A=0;A<T.length;A++)I_(T[A])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Zi("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}P_(n,e)}},l)}(n,Zw(e),t)}else kU(e)&&wD(e,t=>{TD(n,t)})}function P_(n,e){const t=qU(n,e),r=Zw(t);return function i6(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=us(t,p.path);let T,C=!1;if((0,J.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,T=p.abortReason,i=i.concat(vd(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,T="maxretry",i=i.concat(vd(n.serverSyncTree_,p.currentWriteId,!0));else{const A=wP(n,p.path,l);p.currentInputSnapshot=A;const O=e[d].update(A.val());if(void 0!==O){Qw("transaction failed: Data returned ",O,p.path);let U=Fr(O);"object"==typeof O&&null!=O&&(0,J.r3)(O,".priority")||(U=U.updatePriority(A.getPriority()));const re=p.currentWriteId,Ge=Jw(n),et=cP(U,A,Ge);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=et,p.currentWriteId=bD(n),l.splice(l.indexOf(re),1),i=i.concat(rP(n.serverSyncTree_,p.path,et,p.currentWriteId,p.applyLocally)),i=i.concat(vd(n.serverSyncTree_,re,!0))}else C=!0,T="nodata",i=i.concat(vd(n.serverSyncTree_,p.currentWriteId,!0))}no(n.eventQueue_,t,i),i=[],C&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}DD(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)I_(r[d]);TD(n,n.transactionQueueTree_)}(n,KU(n,t),r),r}function qU(n,e){let t,r=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===fp(r);)r=ED(r,t),t=yn(e=fr(e));return r}function KU(n,e){const t=[];return ZU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function ZU(n,e,t){const r=fp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);wD(e,i=>{ZU(n,i,t)})}function DD(n,e){const t=fp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,fP(e,t.length>0?t:void 0)}wD(e,r=>{DD(n,r)})}function CP(n,e){const t=fp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,J.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,J.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(vd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?fP(e,void 0):t.length=a+1,no(n.eventQueue_,Zw(e),i);for(let l=0;l<r.length;l++)I_(r[l])}}const bP=function(n,e){const t=a6(n),r=t.namespace;return"firebase.com"===t.domain&&du(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&du("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new CN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Xn(t.pathString)}},a6=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(C,T)),C<T&&(i=function s6(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,T)));const A=function o6(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),a=r}"ns"in A&&(a=A.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class ro{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return vn(this._path)?null:MN(this._path)}get ref(){return new _a(this._repo,this._path)}get _queryIdentifier(){const e=rU(this._queryParams),t=EN(e);return"{}"===t?"default":t}get _queryObject(){return rU(this._queryParams)}isEqual(e){if(!((e=(0,J.m9)(e))instanceof ro))return!1;const t=this._repo===e._repo,r=RN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function XG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class _a extends ro{constructor(e,t){super(e,t,new UN,!1)}get parent(){const e=$V(this._path);return null===e?null:new _a(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function fq(n){(0,J.hu)(!pD,"__referenceConstructor has already been defined"),pD=n})(_a),function yq(n){(0,J.hu)(!mD,"__referenceConstructor has already been defined"),mD=n}(_a);const DP={};class D6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Gq(n,e,t){if(n.stats_=DN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sD(n.repoInfo_,(r,i,a,l)=>{HU(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>WU(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new lp(n.repoInfo_,e,(r,i,a,l)=>{HU(n,r,i,a,l)},r=>{WU(n,r)},r=>{!function qq(n,e){Si(e,(t,r)=>{yP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function RG(n,e){const t=n.toString();return TN[t]||(TN[t]=e()),TN[t]}(n.repoInfo_,()=>new x3(n.stats_,n.server_)),n.infoData_=new D3,n.infoSyncTree_=new SU({startListening:(r,i,a,l)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=Gw(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),yP(n,"connected",!1),n.serverSyncTree_=new SU({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,p)=>{const y=l(d,p);no(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _a(this._repo,zn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function C6(n,e){const t=DP[e];(!t||t[n.key]!==n)&&du(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function GU(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&du("Cannot call "+e+" on a deleted database.")}}function S6(n=(0,tr.getApp)(),e){const t=(0,tr._getProvider)(n,"database").getImmediate({identifier:e}),r=(0,J.P0)("database");return r&&function A6(n,e,t,r={}){(n=(0,J.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&du("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&du('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new kw(kw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,J.Sg)(r.mockUserToken,n.app.options.projectId);a=new kw(l)}!function w6(n,e,t,r){n.repoInfo_=new CN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r),t}lp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},lp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function M6(n){(function gG(n){_N=n})(tr.SDK_VERSION),(0,tr._registerComponent)(new Ga.wA("database",(e,{instanceIdentifier:t})=>function I6(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||du("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Di("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=bP(a,i),d=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,a=`http://${y}?ns=${d.namespace}`,l=bP(a,i),d=l.repoInfo):p=!l.repoInfo.secure;const C=i&&p?new kw(kw.OWNER):new SG(n.name,n.options,e);VU("Invalid Firebase Database URL",l),vn(l.path)||du("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function b6(n,e,t,r){let i=DP[e.name];i||(i={},DP[e.name]=i);let a=i[n.toURLString()];return a&&du("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new zq(n,!1,t,r),i[n.toURLString()]=a,a}(d,n,C,new DG(n.name,t));return new D6(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(rV,iV,n),(0,tr.registerVersion)(rV,iV,"esm2017")}();class SP{constructor(e){return e}}const rB="database",AP=new f.OlP("angularfire2.database-instances");function k6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new SP(r)}}const O6={provide:class N6{constructor(){return(0,gt.vb)(rB)}},deps:[[new f.FiY,AP]]},F6={provide:SP,useFactory:function P6(n,e){const t=(0,gt.JM)(rB,n,e);return t&&new SP(t)},deps:[[new f.FiY,AP],ir]};let L6=(()=>{class n{constructor(){(0,Pi.KN)("angularfire",gt.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[F6,O6]}),n})();function V6(n,...e){return{ngModule:L6,providers:[{provide:AP,useFactory:k6(n),multi:!0,deps:[f.R0b,f.zs3,gt.HU,Ds,[new f.FiY,Wh],[new f.FiY,Ka],...e]}]}}const U6=(0,gt.u3)(S6,!0),RP="functions";class W6{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e.auth)try{return(yield e.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,ye.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,ye.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const xP="us-central1";class G6{constructor(e,t,r,i,a=xP,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new W6(t,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin,this.region=xP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const aB="@firebase/functions";function n4(n=(0,tr.getApp)(),e=xP){const r=(0,tr._getProvider)((0,J.m9)(n),RP).getImmediate({identifier:e}),i=(0,J.P0)("functions");return i&&function r4(n,e,t){!function q6(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}((0,J.m9)(n),e,t)}(r,...i),r}!function t4(n,e){(0,tr._registerComponent)(new Ga.wA(RP,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider("auth-internal"),d=r.getProvider("messaging-internal"),p=r.getProvider("app-check-internal");return new G6(a,l,d,p,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(aB,"0.8.8",e),(0,tr.registerVersion)(aB,"0.8.8","esm2017")}(fetch.bind(self));class kP{constructor(e){return e}}const lB="functions",OP=new f.OlP("angularfire2.functions-instances");function o4(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new kP(r)}}const a4={provide:class i4{constructor(){return(0,gt.vb)(lB)}},deps:[[new f.FiY,OP]]},u4={provide:kP,useFactory:function s4(n,e){const t=(0,gt.JM)(lB,n,e);return t&&new kP(t)},deps:[[new f.FiY,OP],ir]};let l4=(()=>{class n{constructor(){(0,Pi.KN)("angularfire",gt.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[u4,a4]}),n})();function c4(n,...e){return{ngModule:l4,providers:[{provide:OP,useFactory:o4(n),multi:!0,deps:[f.R0b,f.zs3,gt.HU,Ds,[new f.FiY,Wh],[new f.FiY,Ka],...e]}]}}const d4=(0,gt.u3)(n4,!0);var h4=k(3226);class FP{constructor(e){return e}}const cB="remote-config",LP=new f.OlP("angularfire2.remote-config-instances");function g4(n){return(e,t)=>{if(!gt._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new FP(r)}}const m4={provide:class f4{constructor(){return(0,gt.vb)(cB)}},deps:[[new f.FiY,LP]]},_4={provide:FP,useFactory:function p4(n,e){if(!gt._J.sync())return null;const t=(0,gt.JM)(cB,n,e);return t&&new FP(t)},deps:[[new f.FiY,LP],ir]};let y4=(()=>{class n{constructor(){(0,Pi.KN)("angularfire",gt.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[_4,m4,{provide:f.ip1,useValue:gt._J.async,multi:!0}]}),n})();function v4(n,...e){return{ngModule:y4,providers:[{provide:LP,useFactory:g4(n),multi:!0,deps:[f.R0b,f.zs3,gt.HU,Ds,...e]}]}}const E4=(0,gt.u3)(h4.sN,!0),dB="firebasestorage.googleapis.com";class Gr extends J.ZR{constructor(e,t,r=0){super(VP(e),`Firebase Storage: ${t} (${VP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return VP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function VP(n){return"storage/"+n}function BP(n){return new Gr("invalid-argument",n)}function mB(){return new Gr("app-deleted","The Firebase app was deleted.")}class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(""===r.path)return r;throw function R4(n){return new Gr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(ot){ot.path_=decodeURIComponent(ot.path)}const T=t.replace(/[.]/g,"\\."),lt=[{regex:d,indices:{bucket:1,path:3},postModify:function a(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===dB?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let ot=0;ot<lt.length;ot++){const Ot=lt[ot],Ut=Ot.regex.exec(e);if(Ut){let ei=Ut[Ot.indices.path];ei||(ei=""),r=new ls(Ut[Ot.indices.bucket],ei),Ot.postModify(r);break}}if(null==r)throw function M4(n){return new Gr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class O4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jP(n,e,t,r){if(r<e)throw BP(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw BP(`Invalid value for '${n}'. Expected ${t} or less.`)}var Id=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Id||(Id={})),Id))();class $4{constructor(e,t,r,i,a,l,d,p,y,C,T,A=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=T,this.retry=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,U)=>{this.resolve_=O,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function V4(n){return void 0!==n}(p)?a():a(p)}catch(p){l(p)}else if(null!==d){const p=function UP(){return new Gr("unknown","An unknown error occurred, please check the error payload for server response.")}();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(i.canceled?this.appDelete_?mB():function pB(){return new Gr("canceled","User canceled the upload/download.")}():function fB(){return new Gr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ND(!1,null,!0)):this.backoffId_=function F4(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function p(){return 2===d}let y=!1;function C(...re){y||(y=!0,e.apply(null,re))}function T(re){i=setTimeout(()=>{i=null,n(O,p())},re)}function A(){a&&clearTimeout(a)}function O(re,...Ge){if(y)return void A();if(re)return A(),void C.call(null,re,...Ge);if(p()||l)return A(),void C.call(null,re,...Ge);let lt;r<64&&(r*=2),1===d?(d=2,lt=0):lt=1e3*(r+Math.random()),T(lt)}let U=!1;function Y(re){U||(U=!0,A(),!y&&(null!==i?(re||(d=2),clearTimeout(i),T(0)):re||(d=1)))}return T(0),a=setTimeout(()=>{l=!0,Y(!0)},t),Y}((r,i)=>{if(i)return void r(!1,new ND(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===Id.NO_ERROR,p=a.getStatus();if((!d||function vB(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(p,this.additionalRetryCodes_))&&this.retry){const C=a.getErrorCode()===Id.ABORT;return void r(!1,new ND(!1,null,C))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new ND(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function L4(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ND{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class gp{constructor(e,t){this._service=e,this._location=t instanceof ls?t:ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gp(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function bB(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function tK(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ls(this._location.bucket,e);return new gp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function k4(n){return new Gr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function UB(n,e){const t=e?.storageBucket;return null==t?null:ls.makeFromBucketSpec(t,n)}class ZP{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=dB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ls.makeFromBucketSpec(i,this._host):UB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ls.makeFromBucketSpec(this._url,e):UB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new O4(mB());{const l=function G4(n,e,t,r,i,a,l=!0){const d=function yB(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function W4(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function j4(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function H4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,a),function z4(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new $4(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const BB="@firebase/storage",jB="storage";function BK(n=(0,tr.getApp)(),e){n=(0,J.m9)(n);const r=(0,tr._getProvider)(n,jB).getImmediate({identifier:e}),i=(0,J.P0)("storage");return i&&function $K(n,e,t,r={}){!function UK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,J.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function jK(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ZP(t,r,i,e,tr.SDK_VERSION)}!function HK(){(0,tr._registerComponent)(new Ga.wA(jB,jK,"PUBLIC").setMultipleInstances(!0)),(0,tr.registerVersion)(BB,"0.9.13",""),(0,tr.registerVersion)(BB,"0.9.13","esm2017")}();class YP{constructor(e){return e}}const HB="storage",QP=new f.OlP("angularfire2.storage-instances");function GK(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new YP(r)}}const qK={provide:class WK{constructor(){return(0,gt.vb)(HB)}},deps:[[new f.FiY,QP]]},KK={provide:YP,useFactory:function zK(n,e){const t=(0,gt.JM)(HB,n,e);return t&&new YP(t)},deps:[[new f.FiY,QP],ir]};let ZK=(()=>{class n{constructor(){(0,Pi.KN)("angularfire",gt.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[KK,qK]}),n})();function YK(n,...e){return{ngModule:ZK,providers:[{provide:QP,useFactory:GK(n),multi:!0,deps:[f.R0b,f.zs3,gt.HU,Ds,[new f.FiY,Wh],[new f.FiY,Ka],...e]}]}}const QK=(0,gt.u3)(BK,!0);var ds=k(2011),WB=k(655),a0=k(5363),XK=k(6063);class JK extends ys.x{constructor(e=1/0,t=1/0,r=XK.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)d=p;d&&r.splice(0,d+1)}}}var e8=k(3099);function XP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,e8.B)({connector:()=>new JK(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var t8=k(7982),n8=k(6451);function zB(n,e){return(0,yo.m)(e)?mr(()=>n,e):mr(()=>n)}var JP=k(9468),FD=k(127);const GB=new f.OlP("angularfire2.auth.use-emulator"),qB=new f.OlP("angularfire2.auth.settings"),KB=new f.OlP("angularfire2.auth.tenant-id"),ZB=new f.OlP("angularfire2.auth.langugage-code"),YB=new f.OlP("angularfire2.auth.use-device-language"),QB=new f.OlP("angularfire.auth.persistence"),XB=(n,e,t,r,i,a,l,d)=>(0,ds.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,a&&p.useDeviceLanguage(),l)for(const[y,C]of Object.entries(l))p.settings[y]=C;return d&&p.setPersistence(d),p},[t,r,i,a,l,d]);let ek=(()=>{class n{constructor(t,r,i,a,l,d,p,y,C,T,A,O){const U=new ys.x,Y=vt(void 0).pipe((0,a0.Q)(l.outsideAngular),mr(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,Tt.U)(()=>(0,ds.on)(t,a,r)),(0,Tt.U)(re=>XB(re,a,d,y,C,T,p,A)),XP({bufferSize:1,refCount:!1}));if(ba(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{Y.pipe(rs()).subscribe();const Ge=Y.pipe(mr(ot=>ot.getRedirectResult().then(Ot=>Ot,()=>null)),gt.iC,XP({bufferSize:1,refCount:!1})),et=Y.pipe(mr(ot=>new ni.y(Ot=>({unsubscribe:a.runOutsideAngular(()=>ot.onAuthStateChanged(Ut=>Ot.next(Ut),Ut=>Ot.error(Ut),()=>Ot.complete()))})))),lt=Y.pipe(mr(ot=>new ni.y(Ot=>({unsubscribe:a.runOutsideAngular(()=>ot.onIdTokenChanged(Ut=>Ot.next(Ut),Ut=>Ot.error(Ut),()=>Ot.complete()))}))));this.authState=Ge.pipe(zB(et),(0,JP.R)(l.outsideAngular),(0,a0.Q)(l.insideAngular)),this.user=Ge.pipe(zB(lt),(0,JP.R)(l.outsideAngular),(0,a0.Q)(l.insideAngular)),this.idToken=this.user.pipe(mr(ot=>ot?(0,Un.D)(ot.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(mr(ot=>ot?(0,Un.D)(ot.getIdTokenResult()):vt(null))),this.credential=(0,n8.T)(Ge,U,this.authState.pipe(_i(ot=>!ot))).pipe((0,Tt.U)(ot=>ot?.user?ot:null),(0,JP.R)(l.outsideAngular),(0,a0.Q)(l.insideAngular))}return(0,ds.pX)(this,Y,a,{spy:{apply:(re,Ge,et)=>{(re.startsWith("signIn")||re.startsWith("createUser"))&&et.then(lt=>U.next(lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ds.Dh),f.LFG(ds.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(gt.HU),f.LFG(GB,8),f.LFG(qB,8),f.LFG(KB,8),f.LFG(ZB,8),f.LFG(YB,8),f.LFG(QB,8),f.LFG(Ka,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function JB(n,e=Ma.y){return n=n??s8,(0,Hr.e)((t,r)=>{let i,a=!0;t.subscribe((0,jr.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function s8(n,e){return n===e}function LD(){return(0,Hr.e)((n,e)=>{let t,r=!1;n.subscribe((0,jr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}const t2="firebase_screen_id",nk="outlet",u0="screen_class",n2="screen_name";let _8=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const rk={},y8=n=>{const e=[n[u0],n[nk]].join("#");if(rk.hasOwnProperty(e))return rk[e];{const t=_8++;return rk[e]=t,t}},b8=new f.OlP("angularfire2.analytics.analyticsCollectionEnabled"),T8=new f.OlP("angularfire2.analytics.appVersion"),D8=new f.OlP("angularfire2.analytics.appName"),S8=new f.OlP("angularfire2.analytics.debugMode"),A8=new f.OlP("angularfire2.analytics.config"),VD="dataLayer";let l0=(()=>{class n{constructor(t,r,i,a,l,d,p,y,C){if(this.analyticsInitialized=new Promise(()=>{}),function Bi(n){return n===Ho}(p)){window[VD]=window[VD]||[];const A=(...Y)=>"config"===Y[0]&&"firebase"===Y[2].origin&&(this.measurementId=Y[1],!0),O=Y=>{window.gtag=(...re)=>{Y&&Y(...re),"event"===re[0]&&re[2].send_to===this.measurementId&&(a&&(re[2].app_name=a),i&&(re[2].app_version=i)),l&&typeof console<"u"&&console.info(...re),function(...Ge){window[VD].push(arguments)}(...re)}};window[VD].some(A)?(this.analyticsInitialized=Promise.resolve(),O()):this.analyticsInitialized=new Promise(Y=>{O((...re)=>{A(...re)&&Y()})}),d&&this.updateConfig(d),l&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const T=vt(void 0).pipe((0,a0.Q)(C.outsideAngular),mr(t8.Gb),mr(A=>A?y.runOutsideAngular(()=>k.e(643).then(k.bind(k,8643))):vs.E),(0,Tt.U)(()=>(0,ds.cc)("analytics","AngularFireAnalytics",t.name,()=>{const A=t.analytics();return!1===r&&A.setAnalyticsCollectionEnabled(!1),A},[t,r,d,l])),XP({bufferSize:1,refCount:!1}));return(0,ds.pX)(this,T,y)}updateConfig(t){return(0,WB.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ds.Ot),f.LFG(b8,8),f.LFG(T8,8),f.LFG(D8,8),f.LFG(S8,8),f.LFG(A8,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(gt.HU))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),s2=(()=>{class n{constructor(t,r,i,a){if(this.disposables=[],FD.Z.registerVersion("angularfire",gt.q4.full,"compat-user-tracking"),ba(r))this.initialized=Promise.resolve();else{let l;this.initialized=a.runOutsideAngular(()=>new Promise(d=>l=d)),this.disposables=[i.authState.subscribe(d=>{t.setUserId(d?.uid),l()}),i.credential.subscribe(d=>{if(d){const p=d.user.isAnonymous?"anonymous":d.additionalUserInfo.providerId;d.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:p}),t.logEvent("login",{method:p})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(l0),f.LFG(f.Lbi),f.LFG(ek),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),O8=(()=>{class n{constructor(t,r,i,a,l,d){if(FD.Z.registerVersion("angularfire",gt.q4.full,"compat-screen-tracking"),!r||!t)return this;l.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(_i(i=>i instanceof wy)).pipe(mr(i=>{var a;const d=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,O=>O.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",p=n.routerState.root.children.map(O=>O).find(O=>O.outlet===i.snapshot.outlet);if(!p)return vt(null);let y=p;for(;y.firstChild;)y=y.firstChild;const C=y.pathFromRoot.map(O=>{var U;return null===(U=O.routeConfig)||void 0===U?void 0:U.path}).filter(O=>O).join("/")||"/",T={[n2]:C,page_path:`/${d}`,firebase_event_origin:"auto",firebase_screen:C,[nk]:i.snapshot.outlet};e&&(T.page_title=e.getTitle());let A=p.component;if(A){if(A===Va){let O=i.snapshot;for(;O.firstChild;)O=O.firstChild;A=O.component}}else A=i.snapshot.component;if("string"==typeof A)return vt(Object.assign(Object.assign({},T),{[u0]:A}));if(A){const O=t.resolveComponentFactory(A);return vt(Object.assign(Object.assign({},T),{[u0]:O.selector}))}return vt(null)}),_i(i=>!!i),(0,Tt.U)(i=>Object.assign({firebase_screen_class:i[u0],[t2]:y8(i)},i)),function i8(n,e,t,r){return(0,Hr.e)((i,a)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:r}=e):l=e;const d=new Map,p=U=>{d.forEach(U),U(a)},y=U=>p(Y=>Y.error(U));let C=0,T=!1;const A=new jr.Q(a,U=>{try{const Y=n(U);let re=d.get(Y);if(!re){d.set(Y,re=r?r():new ys.x);const Ge=function O(U,Y){const re=new ni.y(Ge=>{C++;const et=Y.subscribe(Ge);return()=>{et.unsubscribe(),0==--C&&T&&A.unsubscribe()}});return re.key=U,re}(Y,re);if(a.next(Ge),t){const et=(0,jr.x)(re,()=>{re.complete(),et?.unsubscribe()},void 0,void 0,()=>d.delete(Y));A.add((0,_o.Xf)(t(Ge)).subscribe(et))}}re.next(l?l(U):U)}catch(Y){y(Y)}},()=>p(U=>U.complete()),y,()=>d.clear(),()=>(T=!0,0===C));i.subscribe(A)})}(i=>i[nk]),(0,Wr.z)(i=>i.pipe(JB((a,l)=>JSON.stringify(a)===JSON.stringify(l)),wo(void 0),LD(),(0,Tt.U)(([a,l])=>a?Object.assign({firebase_previous_class:a[u0],firebase_previous_screen:a[n2],firebase_previous_id:a[t2]},l):l)))))(r,i,a).pipe(mr(p=>(0,WB.mG)(this,void 0,void 0,function*(){return d&&(yield d.initialized),yield t.logEvent("screen_view",p)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(l0),f.LFG(Kr,8),f.LFG(Hs,8),f.LFG(f._Vd),f.LFG(f.R0b),f.LFG(s2,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),F8=(()=>{class n{constructor(t,r,i){FD.Z.registerVersion("angularfire",gt.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(l0),f.LFG(O8,8),f.LFG(s2,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[l0]}),n})();var L8=k(4986),V8=(k(5881),k(3942));function sk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function o2(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function a2(){if(!function ZE(){return typeof atob<"u"}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}class c0{constructor(e){this._delegate=e}static fromBase64String(e){return a2(),new c0(lu.fromBase64String(e))}static fromUint8Array(e){return o2(),new c0(lu.fromUint8Array(e))}toBase64(){return a2(),this._delegate.toBase64()}toUint8Array(){return o2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ok(n){return function $8(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class j8{enableIndexedDbPersistence(e,t){return function lH(n,e){zF(n=An(n,Tr));const t=Jr(n),r=n._freezeSettings(),i=new wx;return WF(t,i,new DF(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cH(n){zF(n=An(n,Tr));const e=Jr(n),t=n._freezeSettings(),r=new wx;return WF(e,r,new Wj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dH(n){if(n._initialized&&!n._terminated)throw new je(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Js.C())return Promise.resolve();const i=r+"main";yield Js.delete(i)}),function(r){return t.apply(this,arguments)})(pR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class u2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){PF(this._delegate,e,t,r)}enableNetwork(){return function fH(n){return function Xj(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield UF(n),t=yield Mx(n);return e.setNetworkEnabled(!0),function(r){const i=ht(r);return i._u.delete(0),_w(i)}(t)}))}(Jr(n=An(n,Tr)))}(this._delegate)}disableNetwork(){return function pH(n){return function Jj(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield UF(n),t=yield Mx(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=ht(i);a._u.add(0),yield d_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Jr(n=An(n,Tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hH(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function Nj(n,e){return sx.apply(this,arguments)}(yield Rx(e),t)})),t.promise}(Jr(n=An(n,Tr)))}(this._delegate)}onSnapshotsInSync(e){return function zH(n,e){return function nH(n,e){const t=new CT(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield y_(n),i=t,ht(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield y_(n),i=t,void ht(r).Ru.delete(i);var r,i}))}}(Jr(n=An(n,Tr)),Nx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new V_(this,kF(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bo(this,Ew(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fs(this,function zj(n,e){if(n=An(n,vw),Ix("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new je(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(t=e,new St(Sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KH(n,e,t){n=An(n,Tr);const r=Object.assign(Object.assign({},GH),t);return function(i){if(i.maxAttempts<1)throw new je(_e.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new Qr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const p=yield function BF(n){return bT(n).then(e=>e.datastore)}(i);new Yj(i.asyncQueue,p,l,a,d).run()})),d.promise}(Jr(n),i=>e(new qH(n,i)),r)}(this._delegate,t=>e(new l2(this,t)))}batch(){return Jr(this._delegate),new c2(new cL(this._delegate,e=>v_(this._delegate,e)))}loadBundle(e){return function gH(n,e){const t=Jr(n=An(n,Tr)),r=new oH;return function rH(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,p=function(p,y){if(p instanceof Uint8Array)return FF(p,y);if(p instanceof ArrayBuffer)return FF(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Gj(p,l);var p}(t,mw(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function Hj(n,e,t){const r=ht(n);var i;(i=(0,ye.Z)(function*(a,l,d){try{const p=yield l.getMetadata();if(yield function(A,O){const U=ht(A),Y=Ci(O.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",re=>U.Ns.getBundleMetadata(re,O.id)).then(re=>!!re&&re.createTime.compareTo(Y)>=0)}(a.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=p).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(mF(p));const y=new Ij(p,a.localStore,l.It);let C=yield l.mc();for(;C;){const A=yield y.Fu(C);A&&d._updateProgress(A),C=yield l.mc()}const T=yield y.complete();return yield Tl(a,T.Lu,void 0),yield function(A,O){const U=ht(A);return U.persistence.runTransaction("Save bundle","readwrite",Y=>U.Ns.saveBundleMetadata(Y,O))}(a.localStore,p),d._completeWith(T.progress),Promise.resolve(T.Bu)}catch(p){return fi("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var A}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Rx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function mH(n,e){return function iH(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=ht(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield TT(n),e)}))}(Jr(n=An(n,Tr)),e).then(t=>t?new Ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fs(this,t):null)}}class UD extends Vx{constructor(e){super(),this.firestore=e}convertBytes(e){return new c0(new lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bo.forKey(t,this.firestore,null)}}class l2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new UD(e)}get(e){const t=_p(e);return this._delegate.get(t).then(r=>new d0(this._firestore,new Sl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_p(e);return r?(sk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=_p(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}}class c2{constructor(e){this._delegate=e}set(e,t,r){const i=_p(e);return r?(sk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=_p(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new bw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new h0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new mp(e,new UD(e),t),i.set(t,a)),a}}mp.INSTANCES=new WeakMap;class Bo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bo(t,new br(t._delegate,r,new ut(e)))}static forKey(e,t,r){return new Bo(t,new br(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new V_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new V_(this.firestore,kF(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,J.m9)(e))instanceof br&&OF(this._delegate,e)}set(e,t){t=sk("DocumentReference.set",t);try{return t?uL(this._delegate,e,t):uL(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ux(this._delegate,e):Ux(this._delegate,e,t,...r)}catch(i){throw hs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function HH(n){return v_(An(n.firestore,Tr),[new i_(n._key,Rr.none())])}(this._delegate)}onSnapshot(...e){const t=d2(e),r=h2(e,i=>new d0(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return lL(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function VH(n){n=An(n,br);const e=An(n.firestore,Tr),t=Jr(e),r=new ld(e);return function eH(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const d=yield function(p,y){const C=ht(p);return C.persistence.runTransaction("read document","readonly",T=>C.localDocuments.getDocument(T,y))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new je(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=p_(d,`Failed to get document '${a} from cache`);l.reject(p)}}),function(i,a,l){return r.apply(this,arguments)})(yield TT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Sl(e,r,n._key,i,new tp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function UH(n){n=An(n,br);const e=An(n.firestore,Tr);return $F(Jr(e),n._key,{source:"server"}).then(t=>Bx(e,n,t))}(this._delegate):function LH(n){n=An(n,br);const e=An(n.firestore,Tr);return $F(Jr(e),n._key).then(t=>Bx(e,n,t))}(this._delegate),t.then(r=>new d0(this.firestore,new Sl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Bo(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function d2(n){for(const e of n)if("object"==typeof e&&!ok(e))return e;return{}}function h2(n,e){var t,r;let i;return i=ok(n[0])?n[0]:ok(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class d0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aL(this._delegate,e._delegate)}}class h0 extends d0{data(e){const t=this._delegate.data(e);return function Rs(n,e){n||yt()}(void 0!==t),t}}class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new UD(e)}where(e,t,r){try{return new fs(this.firestore,ad(this._delegate,function DH(n,e,t){const r=e,i=xT("where",n);return new TH(i,r,t)}(e,t,r)))}catch(i){throw hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fs(this.firestore,ad(this._delegate,function AH(n,e="asc"){const t=e,r=xT("orderBy",n);return new SH(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fs(this.firestore,ad(this._delegate,function MH(n){return RF("limit",n),new eL("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fs(this.firestore,ad(this._delegate,function RH(n){return RF("limitToLast",n),new eL("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fs(this.firestore,ad(this._delegate,function xH(...n){return new tL("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fs(this.firestore,ad(this._delegate,function NH(...n){return new tL("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fs(this.firestore,ad(this._delegate,function PH(...n){return new nL("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fs(this.firestore,ad(this._delegate,function kH(...n){return new nL("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return Cx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function $H(n){n=An(n,Ki);const e=An(n.firestore,Tr),t=Jr(e),r=new ld(e);return function tH(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const d=yield mT(i,a,!0),p=new vF(a,d.Hi),y=p.Wu(d.documents),C=p.applyChanges(y,!1);l.resolve(C.snapshot)}catch(d){const p=p_(d,`Failed to execute query '${a} against cache`);l.reject(p)}}),function(i,a,l){return r.apply(this,arguments)})(yield TT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ud(e,r,n,i))}(this._delegate):"server"===e?.source?function jH(n){n=An(n,Ki);const e=An(n.firestore,Tr),t=Jr(e),r=new ld(e);return jF(t,n._query,{source:"server"}).then(i=>new ud(e,r,n,i))}(this._delegate):function BH(n){n=An(n,Ki);const e=An(n.firestore,Tr),t=Jr(e),r=new ld(e);return JF(n._query),jF(t,n._query).then(i=>new ud(e,r,n,i))}(this._delegate),t.then(r=>new ak(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=d2(e),r=h2(e,i=>new ak(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return lL(this._delegate,t,r)}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}class W8{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new h0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ak{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new h0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new W8(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new h0(this._firestore,r))})}isEqual(e){return aL(this._delegate,e._delegate)}}class V_ extends fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bo(this.firestore,e):null}doc(e){try{return new Bo(this.firestore,void 0===e?Ew(this._delegate):Ew(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function WH(n,e){const t=An(n.firestore,Tr),r=Ew(n),i=NT(n.converter,e);return v_(t,[AT(Jf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Rr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Bo(this.firestore,t))}isEqual(e){return OF(this._delegate,e._delegate)}withConverter(e){return new V_(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function _p(n){return An(n,br)}class uk{constructor(...e){this._delegate=new Dl(...e)}static documentId(){return new uk(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,J.m9)(e))instanceof Dl&&this._delegate._internalPath.isEqual(e._internalPath)}}class yp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YH(){return new Px("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yp(e)}static delete(){const e=function ZH(){return new ww("deleteField")}();return e._methodName="FieldValue.delete",new yp(e)}static arrayUnion(...e){const t=function QH(...n){return new EH("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yp(t)}static arrayRemove(...e){const t=function XH(...n){return new wH("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yp(t)}static increment(e){const t=function JH(n){return new IH("increment",n)}(e);return t._methodName="FieldValue.increment",new yp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const z8={Firestore:u2,GeoPoint:DT,Timestamp:yr,Blob:c0,Transaction:l2,WriteBatch:c2,DocumentReference:Bo,DocumentSnapshot:d0,Query:fs,QueryDocumentSnapshot:h0,QuerySnapshot:ak,CollectionReference:V_,FieldPath:uk,FieldValue:yp,setLogLevel:function H8(n){!function Ub(n){_l.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function f2(n,e){return function K8(n,e=L8.z){return new ni.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function lk(n,e){return f2(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function BD(n,e){return lk(n,e).pipe(wo(void 0),LD(),(0,Tt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const p=i.find(C=>C.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function p2(n,e,t){return BD(n,t).pipe(Na((r,i)=>function Y8(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Q8(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ck(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ck(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ck(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),JB(),(0,Tt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ck(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function g2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function q8(n){(function G8(n,e){n.INTERNAL.registerComponent(new Ga.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},z8)))})(n,(e,t)=>new u2(e,t,new j8)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(V8.Z);class m2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=BD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wo(void 0),LD(),_i(([r,i])=>i.length>0||!r),(0,Tt.U)(([r,i])=>i),gt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=g2(e);return p2(this.query,t,this.afs.schedulers.outsideAngular).pipe(gt.iC)}valueChanges(e={}){return lk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gt.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(gt.iC)}add(e){return this.ref.add(e)}doc(e){return new _2(this.ref.doc(e),this.afs)}}class _2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=E2(r,t);return new m2(i,a,this.afs)}snapshotChanges(){return function Z8(n,e){return f2(n,e).pipe(wo(void 0),LD(),(0,Tt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Un.D)(this.ref.get(e)).pipe(gt.iC)}}class X8{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?BD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),_i(t=>t.length>0),gt.iC):BD(this.query,this.afs.schedulers.outsideAngular).pipe(gt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=g2(e);return p2(this.query,t,this.afs.schedulers.outsideAngular).pipe(gt.iC)}valueChanges(e={}){return lk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),gt.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(gt.iC)}}const y2=new f.OlP("angularfire2.enableFirestorePersistence"),v2=new f.OlP("angularfire2.firestore.persistenceSettings"),J8=new f.OlP("angularfire2.firestore.settings"),eZ=new f.OlP("angularfire2.firestore.use-emulator");function E2(n,e=(t=>t)){return{query:e(n),ref:n}}let tZ=(()=>{class n{constructor(t,r,i,a,l,d,p,y,C,T,A,O,U,Y,re,Ge,et){this.schedulers=p;const lt=(0,ds.on)(t,d,r),ot=C;T&&XB(lt,d,A,U,Y,re,O,Ge),[this.firestore,this.persistenceEnabled$]=(0,ds.cc)(`${lt.name}.firestore`,"AngularFirestore",lt.name,()=>{const Ot=d.runOutsideAngular(()=>lt.firestore());if(a&&Ot.settings(a),ot&&Ot.useEmulator(...ot),i&&!ba(l)){const Ut=()=>{try{return(0,Un.D)(Ot.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(En){return typeof console<"u"&&console.warn(En),vt(!1)}};return[Ot,d.runOutsideAngular(Ut)]}return[Ot,vt(!1)]},[a,ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=E2(i,r),d=this.schedulers.ngZone.run(()=>a);return new m2(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new X8(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new _2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ds.Dh),f.LFG(ds.xv,8),f.LFG(y2,8),f.LFG(J8,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(gt.HU),f.LFG(v2,8),f.LFG(eZ,8),f.LFG(ek,8),f.LFG(GB,8),f.LFG(qB,8),f.LFG(KB,8),f.LFG(ZB,8),f.LFG(YB,8),f.LFG(QB,8),f.LFG(Ka,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nZ=(()=>{class n{constructor(){FD.Z.registerVersion("angularfire",gt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:y2,useValue:!0},{provide:v2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[tZ]}),n})(),rZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[pW]}),n.\u0275inj=f.cJS({imports:[Ko,fW,fC,pG,Pc(()=>kc(mN_firebase)),V6(()=>U6()),oW(()=>Hx()),c4(()=>d4()),v4(()=>E4()),YK(()=>QK()),ds.hO.initializeApp(mN_firebase),F8,nZ]}),n})();(0,f.G48)(),Nu().bootstrapModule(rZ).catch(n=>console.error(n))},7982:(Et,Re,k)=>{k.d(Re,{Gb:()=>f.Gb});var f=k(579)},5867:(Et,Re,k)=>{k.d(Re,{C6:()=>f.getApps,KN:()=>f.registerVersion,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=k(9681);(0,f.registerVersion)("firebase","9.13.0","app")},127:(Et,Re,k)=>{k.d(Re,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.13.0","app-compat")},5881:(Et,Re,k)=>{k.r(Re);var f=k(5861),B=k(3942),L=k(8247),ee=k(2090),ue=(k(9681),k(1877),k(4859));function de(){return window}function z(){return(z=(0,f.Z)(function*(x,S,N){var H;const{BuildInfo:fe}=de();(0,L.ap)(S.sessionId,"AuthEvent did not contain a session ID");const Le=yield he(S.sessionId),ze={};return(0,L.aq)()?ze.ibi=fe.packageName:(0,L.ar)()?ze.apn=fe.packageName:(0,L.as)(x,"operation-not-supported-in-this-environment"),fe.displayName&&(ze.appDisplayName=fe.displayName),ze.sessionId=Le,(0,L.at)(x,N,S.type,void 0,null!==(H=S.eventId)&&void 0!==H?H:void 0,ze)})).apply(this,arguments)}function Ne(){return(Ne=(0,f.Z)(function*(x){const{BuildInfo:S}=de(),N={};(0,L.aq)()?N.iosBundleId=S.packageName:(0,L.ar)()?N.androidPackageName=S.packageName:(0,L.as)(x,"operation-not-supported-in-this-environment"),yield(0,L.au)(x,N)})).apply(this,arguments)}function Je(){return(Je=(0,f.Z)(function*(x,S,N){const{cordova:H}=de();let fe=()=>{};try{yield new Promise((Le,ze)=>{let ge=null;function Me(){var $t;Le();const rn=null===($t=H.plugins.browsertab)||void 0===$t?void 0:$t.close;"function"==typeof rn&&rn(),"function"==typeof N?.close&&N.close()}function _t(){ge||(ge=window.setTimeout(()=>{ze((0,L.aw)(x,"redirect-cancelled-by-user"))},2e3))}function ln(){"visible"===document?.visibilityState&&_t()}S.addPassiveListener(Me),document.addEventListener("resume",_t,!1),(0,L.ar)()&&document.addEventListener("visibilitychange",ln,!1),fe=()=>{S.removePassiveListener(Me),document.removeEventListener("resume",_t,!1),document.removeEventListener("visibilitychange",ln,!1),ge&&window.clearTimeout(ge)}})}finally{fe()}})).apply(this,arguments)}function he(x){return ct.apply(this,arguments)}function ct(){return(ct=(0,f.Z)(function*(x){const S=Ze(x),N=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(N)).map(fe=>fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(x){if((0,L.ap)(/[0-9a-zA-Z]+/.test(x),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(x);const S=new ArrayBuffer(x.length),N=new Uint8Array(S);for(let H=0;H<x.length;H++)N[H]=x.charCodeAt(H);return N}class xe extends L.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(S)),super.onEvent(S)}initialized(){var S=this;return(0,f.Z)(function*(){yield S.initPromise})()}}function ne(x){return ce.apply(this,arguments)}function ce(){return(ce=(0,f.Z)(function*(x){const S=yield Q()._get(le(x));return S&&(yield Q()._remove(le(x))),S})).apply(this,arguments)}function X(){const x=[],S="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<20;N++){const H=Math.floor(Math.random()*S.length);x.push(S.charAt(H))}return x.join("")}function Q(){return(0,L.az)(L.b)}function le(x){return(0,L.aA)("authEvent",x.config.apiKey,x.name)}function $e(x){if(!x?.includes("?"))return{};const[S,...N]=x.split("?");return(0,ee.zd)(N.join("?"))}function Ke(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.aw)("no-auth-event")}}function Vt(){var x;return(null===(x=self?.location)||void 0===x?void 0:x.protocol)||null}function Zn(x=(0,ee.z$)()){return!("file:"!==Vt()&&"ionic:"!==Vt()&&"capacitor:"!==Vt()||!x.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){try{const x=self.localStorage,S=L.aI();if(x)return x.setItem(S,"1"),x.removeItem(S),!function Gn(x=(0,ee.z$)()){return function Nr(){return(0,ee.w1)()&&11===document?.documentMode}()||function Mn(x=(0,ee.z$)()){return/Edge\/\d+/.test(x)}(x)}()||(0,ee.hl)()}catch{return xn()&&(0,ee.hl)()}return!1}function xn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fn(){return(function At(){return"http:"===Vt()||"https:"===Vt()}()||(0,ee.ru)()||Zn())&&!function wr(){return(0,ee.b$)()||(0,ee.UG)()}()&&Ir()&&!xn()}function pr(){return Zn()&&typeof document<"u"}function K(){return(K=(0,f.Z)(function*(){return!!pr()&&new Promise(x=>{const S=setTimeout(()=>{x(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),x(!0)})})})).apply(this,arguments)}const Xe={LOCAL:"local",NONE:"none",SESSION:"session"},rt=L.ax,Rt="persistence";function qt(x){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(x){yield x._initializationPromise;const S=tt(),N=L.aA(Rt,x.config.apiKey,x.name);S&&S.setItem(N,x._getPersistence())})).apply(this,arguments)}function tt(){var x;try{return(null===(x=function ke(){return typeof window<"u"?window:null}())||void 0===x?void 0:x.sessionStorage)||null}catch{return null}}const nt=L.ax;class mt{constructor(){this.browserResolver=L.az(L.k),this.cordovaResolver=L.az(class nn{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aB,this._overrideRedirectResult=L.aC}_initialize(S){var N=this;return(0,f.Z)(function*(){const H=S._key();let fe=N.eventManagers.get(H);return fe||(fe=new xe(S),N.eventManagers.set(H,fe),N.attachCallbackListeners(S,fe)),fe})()}_openPopup(S){(0,L.as)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,N,H,fe){var Le=this;return(0,f.Z)(function*(){!function Ee(x){var S,N,H,fe,Le,ze,ge,Me,_t,ln;const $t=de();(0,L.ax)("function"==typeof(null===(S=$t?.universalLinks)||void 0===S?void 0:S.subscribe),x,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.ax)(typeof(null===(N=$t?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",x,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.ax)("function"==typeof(null===(Le=null===(fe=null===(H=$t?.cordova)||void 0===H?void 0:H.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Le?void 0:Le.openUrl),x,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.ax)("function"==typeof(null===(Me=null===(ge=null===(ze=$t?.cordova)||void 0===ze?void 0:ze.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Me?void 0:Me.isAvailable),x,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.ax)("function"==typeof(null===(ln=null===(_t=$t?.cordova)||void 0===_t?void 0:_t.InAppBrowser)||void 0===ln?void 0:ln.open),x,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const ze=yield Le._initialize(S);yield ze.initialized(),ze.resetRedirect(),(0,L.aD)(),yield Le._originValidation(S);const ge=function be(x,S,N=null){return{type:S,eventId:N,urlResponse:null,sessionId:X(),postBody:null,tenantId:x.tenantId,error:(0,L.aw)(x,"no-auth-event")}}(S,H,fe);yield function qe(x,S){return Q()._set(le(x),S)}(S,ge);const Me=yield function G(x,S,N){return z.apply(this,arguments)}(S,ge,N),_t=yield function Pe(x){const{cordova:S}=de();return new Promise(N=>{S.plugins.browsertab.isAvailable(H=>{let fe=null;H?S.plugins.browsertab.openUrl(x):fe=S.InAppBrowser.open(x,(0,L.av)()?"_blank":"_system","location=yes"),N(fe)})})}(Me);return function Te(x,S,N){return Je.apply(this,arguments)}(S,ze,_t)})()}_isIframeWebStorageSupported(S,N){throw new Error("Method not implemented.")}_originValidation(S){const N=S._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function Z(x){return Ne.apply(this,arguments)}(S)),this.originValidationPromises[N]}attachCallbackListeners(S,N){const{universalLinks:H,handleOpenURL:fe,BuildInfo:Le}=de(),ze=setTimeout((0,f.Z)(function*(){yield ne(S),N.onEvent(Ke())}),500),ge=function(){var ln=(0,f.Z)(function*($t){clearTimeout(ze);const rn=yield ne(S);let qr=null;rn&&$t?.url&&(qr=function we(x,S){var N,H;const fe=function Be(x){const S=$e(x),N=S.link?decodeURIComponent(S.link):void 0,H=$e(N).link,fe=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return $e(fe).link||fe||H||N||x}(S);if(fe.includes("/__/auth/callback")){const Le=$e(fe),ze=Le.firebaseError?function ae(x){try{return JSON.parse(x)}catch{return null}}(decodeURIComponent(Le.firebaseError)):null,ge=null===(H=null===(N=ze?.code)||void 0===N?void 0:N.split("auth/"))||void 0===H?void 0:H[1],Me=ge?(0,L.aw)(ge):null;return Me?{type:x.type,eventId:x.eventId,tenantId:x.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:x.type,eventId:x.eventId,tenantId:x.tenantId,sessionId:x.sessionId,urlResponse:fe,postBody:null}}return null}(rn,$t.url)),N.onEvent(qr||Ke())});return function(rn){return ln.apply(this,arguments)}}();typeof H<"u"&&"function"==typeof H.subscribe&&H.subscribe(null,ge);const Me=fe,_t=`${Le.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var ln=(0,f.Z)(function*($t){if($t.toLowerCase().startsWith(_t)&&ge({url:$t}),"function"==typeof Me)try{Me($t)}catch(rn){console.error(rn)}});return function($t){return ln.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aB,this._overrideRedirectResult=L.aC}_initialize(S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,N,H,fe){var Le=this;return(0,f.Z)(function*(){return yield Le.selectUnderlyingResolver(),Le.assertedUnderlyingResolver._openPopup(S,N,H,fe)})()}_openRedirect(S,N,H,fe){var Le=this;return(0,f.Z)(function*(){return yield Le.selectUnderlyingResolver(),Le.assertedUnderlyingResolver._openRedirect(S,N,H,fe)})()}_isIframeWebStorageSupported(S,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,N)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return pr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,f.Z)(function*(){if(S.underlyingResolver)return;const N=yield function it(){return K.apply(this,arguments)}();S.underlyingResolver=N?S.cordovaResolver:S.browserResolver})()}}function qn(x){return x.unwrap()}function Yn(x){return Cr(x)}function Cr(x){const{_tokenResponse:S}=x instanceof ee.ZR?x.customData:x;if(!S)return null;if(!(x instanceof ee.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return L.P.credentialFromResult(x);const N=S.providerId;if(!N||N===L.o.PASSWORD)return null;let H;switch(N){case L.o.GOOGLE:H=L.Q;break;case L.o.FACEBOOK:H=L.N;break;case L.o.GITHUB:H=L.T;break;case L.o.TWITTER:H=L.W;break;default:const{oauthIdToken:fe,oauthAccessToken:Le,oauthTokenSecret:ze,pendingToken:ge,nonce:Me}=S;return Le||ze||fe||ge?ge?N.startsWith("saml.")?L.aL._create(N,ge):L.J._fromParams({providerId:N,signInMethod:N,pendingToken:ge,idToken:fe,accessToken:Le}):new L.U(N).credential({idToken:fe,accessToken:Le,rawNonce:Me}):null}return x instanceof ee.ZR?H.credentialFromError(x):H.credentialFromResult(x)}function xt(x,S){return S.catch(N=>{throw N instanceof ee.ZR&&function wt(x,S){var N,H;const fe=null===(N=S.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===(null===(H=S)||void 0===H?void 0:H.code))S.resolver=new Cn(x,L.an(x,S));else if(fe){const Le=Cr(S),ze=S;Le&&(ze.credential=Le,ze.tenantId=fe.tenantId||void 0,ze.email=fe.email||void 0,ze.phoneNumber=fe.phoneNumber||void 0)}}(x,N),N}).then(N=>{const fe=N.user;return{operationType:N.operationType,credential:Yn(N),additionalUserInfo:L.al(N),user:bn.getOrCreate(fe)}})}function Jn(x,S){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(x,S){const N=yield S;return{verificationId:N.verificationId,confirm:H=>xt(x,N.confirm(H))}})).apply(this,arguments)}class Cn{constructor(S,N){this.resolver=N,this.auth=function Ln(x){return x.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return xt(qn(this.auth),this.resolver.resolveSignIn(S))}}class bn{constructor(S){this._delegate=S,this.multiFactor=L.ao(S)}static getOrCreate(S){return bn.USER_MAP.has(S)||bn.USER_MAP.set(S,new bn(S)),bn.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var N=this;return(0,f.Z)(function*(){return xt(N.auth,L.Z(N._delegate,S))})()}linkWithPhoneNumber(S,N){var H=this;return(0,f.Z)(function*(){return Jn(H.auth,L.l(H._delegate,S,N))})()}linkWithPopup(S){var N=this;return(0,f.Z)(function*(){return xt(N.auth,L.d(N._delegate,S,mt))})()}linkWithRedirect(S){var N=this;return(0,f.Z)(function*(){return yield qt(L.aE(N.auth)),L.g(N._delegate,S,mt)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var N=this;return(0,f.Z)(function*(){return xt(N.auth,L._(N._delegate,S))})()}reauthenticateWithPhoneNumber(S,N){return Jn(this.auth,L.r(this._delegate,S,N))}reauthenticateWithPopup(S){return xt(this.auth,L.e(this._delegate,S,mt))}reauthenticateWithRedirect(S){var N=this;return(0,f.Z)(function*(){return yield qt(L.aE(N.auth)),L.h(N._delegate,S,mt)})()}sendEmailVerification(S){return L.ab(this._delegate,S)}unlink(S){var N=this;return(0,f.Z)(function*(){return yield L.ak(N._delegate,S),N})()}updateEmail(S){return L.ag(this._delegate,S)}updatePassword(S){return L.ah(this._delegate,S)}updatePhoneNumber(S){return L.u(this._delegate,S)}updateProfile(S){return L.af(this._delegate,S)}verifyBeforeUpdateEmail(S,N){return L.ac(this._delegate,S,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bn.USER_MAP=new WeakMap;const at=L.ax;let Ae=(()=>{class x{constructor(N,H){if(this.app=N,H.isInitialized())return this._delegate=H.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:fe}=N.options;at(fe,"invalid-api-key",{appName:N.name}),at(fe,"invalid-api-key",{appName:N.name});const Le=typeof window<"u"?mt:void 0;this._delegate=H.initialize({options:{persistence:bt(fe,N.name),popupRedirectResolver:Le}}),this._delegate._updateErrorMap(L.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,H){L.G(this._delegate,N,H)}applyActionCode(N){return L.a2(this._delegate,N)}checkActionCode(N){return L.a3(this._delegate,N)}confirmPasswordReset(N,H){return L.a1(this._delegate,N,H)}createUserWithEmailAndPassword(N,H){var fe=this;return(0,f.Z)(function*(){return xt(fe._delegate,L.a5(fe._delegate,N,H))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return L.aa(this._delegate,N)}isSignInWithEmailLink(N){return L.a8(this._delegate,N)}getRedirectResult(){var N=this;return(0,f.Z)(function*(){at(Fn(),N._delegate,"operation-not-supported-in-this-environment");const H=yield L.j(N._delegate,mt);return H?xt(N._delegate,Promise.resolve(H)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function cn(x,S){(0,L.aE)(x)._logFramework(S)}(this._delegate,N)}onAuthStateChanged(N,H,fe){const{next:Le,error:ze,complete:ge}=dt(N,H,fe);return this._delegate.onAuthStateChanged(Le,ze,ge)}onIdTokenChanged(N,H,fe){const{next:Le,error:ze,complete:ge}=dt(N,H,fe);return this._delegate.onIdTokenChanged(Le,ze,ge)}sendSignInLinkToEmail(N,H){return L.a7(this._delegate,N,H)}sendPasswordResetEmail(N,H){return L.a0(this._delegate,N,H||void 0)}setPersistence(N){var H=this;return(0,f.Z)(function*(){let fe;switch(function Zt(x,S){rt(Object.values(Xe).includes(S),x,"invalid-persistence-type"),(0,ee.b$)()?rt(S!==Xe.SESSION,x,"unsupported-persistence-type"):(0,ee.UG)()?rt(S===Xe.NONE,x,"unsupported-persistence-type"):xn()?rt(S===Xe.NONE||S===Xe.LOCAL&&(0,ee.hl)(),x,"unsupported-persistence-type"):rt(S===Xe.NONE||Ir(),x,"unsupported-persistence-type")}(H._delegate,N),N){case Xe.SESSION:fe=L.a;break;case Xe.LOCAL:fe=(yield L.az(L.i)._isAvailable())?L.i:L.b;break;case Xe.NONE:fe=L.L;break;default:return L.as("argument-error",{appName:H._delegate.name})}return H._delegate.setPersistence(fe)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return xt(this._delegate,L.X(this._delegate))}signInWithCredential(N){return xt(this._delegate,L.Y(this._delegate,N))}signInWithCustomToken(N){return xt(this._delegate,L.$(this._delegate,N))}signInWithEmailAndPassword(N,H){return xt(this._delegate,L.a6(this._delegate,N,H))}signInWithEmailLink(N,H){return xt(this._delegate,L.a9(this._delegate,N,H))}signInWithPhoneNumber(N,H){return Jn(this._delegate,L.s(this._delegate,N,H))}signInWithPopup(N){var H=this;return(0,f.Z)(function*(){return at(Fn(),H._delegate,"operation-not-supported-in-this-environment"),xt(H._delegate,L.c(H._delegate,N,mt))})()}signInWithRedirect(N){var H=this;return(0,f.Z)(function*(){return at(Fn(),H._delegate,"operation-not-supported-in-this-environment"),yield qt(H._delegate),L.f(H._delegate,N,mt)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return L.a4(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return x.Persistence=Xe,x})();function dt(x,S,N){let H=x;"function"!=typeof x&&({next:H,error:S,complete:N}=x);const fe=H;return{next:ze=>fe(ze&&bn.getOrCreate(ze)),error:S,complete:N}}function bt(x,S){const N=function Wt(x,S){const N=tt();if(!N)return[];const H=L.aA(Rt,x,S);switch(N.getItem(H)){case Xe.NONE:return[L.L];case Xe.LOCAL:return[L.i,L.a];case Xe.SESSION:return[L.a];default:return[]}}(x,S);if(typeof self<"u"&&!N.includes(L.i)&&N.push(L.i),typeof window<"u")for(const H of[L.b,L.a])N.includes(H)||N.push(H);return N.includes(L.L)||N.push(L.L),N}class Pt{constructor(){this.providerId="phone",this._delegate=new L.P(qn(B.Z.auth()))}static credential(S,N){return L.P.credential(S,N)}verifyPhoneNumber(S,N){return this._delegate.verifyPhoneNumber(S,N)}unwrap(){return this._delegate}}Pt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Pt.PROVIDER_ID=L.P.PROVIDER_ID;const un=L.ax;class W{constructor(S,N,H=B.Z.app()){var fe;un(null===(fe=H.options)||void 0===fe?void 0:fe.apiKey,"invalid-api-key",{appName:H.name}),this._delegate=new L.R(S,N,H.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function P(x){x.INTERNAL.registerComponent(new ue.wA("auth-compat",S=>{const N=S.getProvider("app-compat").getImmediate(),H=S.getProvider("auth");return new Ae(N,H)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.M,FacebookAuthProvider:L.N,GithubAuthProvider:L.T,GoogleAuthProvider:L.Q,OAuthProvider:L.U,SAMLAuthProvider:L.V,PhoneAuthProvider:Pt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:W,TwitterAuthProvider:L.W,Auth:Ae,AuthCredential:L.H,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),x.registerVersion("@firebase/auth-compat","0.2.24")}(B.Z)},3226:(Et,Re,k)=>{k.d(Re,{sN:()=>ct,Gb:()=>Fn});var f=k(5861),B=k(9681),L=k(2090),ee=k(4859),Ie=k(1877);k(2833);const ue="@firebase/remote-config",G="remote-config",Z=new L.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function ct(it=(0,B.getApp)()){return it=(0,L.m9)(it),(0,B._getProvider)(it,G).getImmediate()}class Be{constructor(K,ke,Xe,rt){this.client=K,this.storage=ke,this.storageCache=Xe,this.logger=rt}isCachedDataFresh(K,ke){if(!ke)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Xe=Date.now()-ke,rt=Xe<=K;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Xe}. Cache max age millis (minimumFetchIntervalMillis setting): ${K}. Is cache hit: ${rt}.`),rt}fetch(K){var ke=this;return(0,f.Z)(function*(){const[Xe,rt]=yield Promise.all([ke.storage.getLastSuccessfulFetchTimestampMillis(),ke.storage.getLastSuccessfulFetchResponse()]);if(rt&&ke.isCachedDataFresh(K.cacheMaxAgeMillis,Xe))return rt;K.eTag=rt&&rt.eTag;const Rt=yield ke.client.fetch(K),Zt=[ke.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Rt.status&&Zt.push(ke.storage.setLastSuccessfulFetchResponse(Rt)),yield Promise.all(Zt),Rt})()}}function $e(it=navigator){return it.languages&&it.languages[0]||it.language}class pt{constructor(K,ke,Xe,rt,Rt,Zt){this.firebaseInstallations=K,this.sdkVersion=ke,this.namespace=Xe,this.projectId=rt,this.apiKey=Rt,this.appId=Zt}fetch(K){var ke=this;return(0,f.Z)(function*(){var Xe,rt,Rt;const[Zt,qt]=yield Promise.all([ke.firebaseInstallations.getId(),ke.firebaseInstallations.getToken()]),Wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ke.projectId}/namespaces/${ke.namespace}:fetch?key=${ke.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":K.eTag||"*"},nt={sdk_version:ke.sdkVersion,app_instance_id:Zt,app_instance_id_token:qt,app_id:ke.appId,language_code:$e()},mt={method:"POST",headers:tt,body:JSON.stringify(nt)},qn=fetch(Wt,mt),Ln=new Promise((Bt,Cn)=>{K.signal.addEventListener(()=>{const bn=new Error("The operation was aborted.");bn.name="AbortError",Cn(bn)})});let Yn;try{yield Promise.race([qn,Ln]),Yn=yield qn}catch(Bt){let Cn="fetch-client-network";throw"AbortError"===(null===(Xe=Bt)||void 0===Xe?void 0:Xe.name)&&(Cn="fetch-timeout"),Z.create(Cn,{originalErrorMessage:null===(rt=Bt)||void 0===rt?void 0:rt.message})}let wt=Yn.status;const Cr=Yn.headers.get("ETag")||void 0;let xt,Jn;if(200===Yn.status){let Bt;try{Bt=yield Yn.json()}catch(Cn){throw Z.create("fetch-client-parse",{originalErrorMessage:null===(Rt=Cn)||void 0===Rt?void 0:Rt.message})}xt=Bt.entries,Jn=Bt.state}if("INSTANCE_STATE_UNSPECIFIED"===Jn?wt=500:"NO_CHANGE"===Jn?wt=304:("NO_TEMPLATE"===Jn||"EMPTY_CONFIG"===Jn)&&(xt={}),304!==wt&&200!==wt)throw Z.create("fetch-status",{httpStatus:wt});return{status:wt,eTag:Cr,config:xt}})()}}class Ke{constructor(K,ke){this.client=K,this.storage=ke}fetch(K){var ke=this;return(0,f.Z)(function*(){const Xe=(yield ke.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ke.attemptFetch(K,Xe)})()}attemptFetch(K,{throttleEndTimeMillis:ke,backoffCount:Xe}){var rt=this;return(0,f.Z)(function*(){yield function nn(it,K){return new Promise((ke,Xe)=>{const rt=Math.max(K-Date.now(),0),Rt=setTimeout(ke,rt);it.addEventListener(()=>{clearTimeout(Rt),Xe(Z.create("fetch-throttle",{throttleEndTimeMillis:K}))})})}(K.signal,ke);try{const Rt=yield rt.client.fetch(K);return yield rt.storage.deleteThrottleMetadata(),Rt}catch(Rt){if(!function Ft(it){if(!(it instanceof L.ZR&&it.customData))return!1;const K=Number(it.customData.httpStatus);return 429===K||500===K||503===K||504===K}(Rt))throw Rt;const Zt={throttleEndTimeMillis:Date.now()+(0,L.$s)(Xe),backoffCount:Xe+1};return yield rt.storage.setThrottleMetadata(Zt),rt.attemptFetch(K,Zt)}})()}}class pn{constructor(K,ke,Xe,rt,Rt){this.app=K,this._client=ke,this._storageCache=Xe,this._storage=rt,this._logger=Rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dt(it,K){var ke;const Xe=it.target.error||void 0;return Z.create(K,{originalErrorMessage:Xe&&(null===(ke=Xe)||void 0===ke?void 0:ke.message)})}const Vt="app_namespace_store";class Nr{constructor(K,ke,Xe,rt=function wr(){return new Promise((it,K)=>{var ke;try{const Xe=indexedDB.open("firebase_remote_config",1);Xe.onerror=rt=>{K(Dt(rt,"storage-open"))},Xe.onsuccess=rt=>{it(rt.target.result)},Xe.onupgradeneeded=rt=>{0===rt.oldVersion&&rt.target.result.createObjectStore(Vt,{keyPath:"compositeKey"})}}catch(Xe){K(Z.create("storage-open",{originalErrorMessage:null===(ke=Xe)||void 0===ke?void 0:ke.message}))}})}()){this.appId=K,this.appName=ke,this.namespace=Xe,this.openDbPromise=rt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(K){return this.set("last_fetch_status",K)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(K){return this.set("last_successful_fetch_timestamp_millis",K)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(K){return this.set("last_successful_fetch_response",K)}getActiveConfig(){return this.get("active_config")}setActiveConfig(K){return this.set("active_config",K)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(K){return this.set("active_config_etag",K)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(K){return this.set("throttle_metadata",K)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(K){var ke=this;return(0,f.Z)(function*(){const Xe=yield ke.openDbPromise;return new Promise((rt,Rt)=>{var Zt;const an=Xe.transaction([Vt],"readonly").objectStore(Vt),Wt=ke.createCompositeKey(K);try{const tt=an.get(Wt);tt.onerror=nt=>{Rt(Dt(nt,"storage-get"))},tt.onsuccess=nt=>{const mt=nt.target.result;rt(mt?mt.value:void 0)}}catch(tt){Rt(Z.create("storage-get",{originalErrorMessage:null===(Zt=tt)||void 0===Zt?void 0:Zt.message}))}})})()}set(K,ke){var Xe=this;return(0,f.Z)(function*(){const rt=yield Xe.openDbPromise;return new Promise((Rt,Zt)=>{var qt;const Wt=rt.transaction([Vt],"readwrite").objectStore(Vt),tt=Xe.createCompositeKey(K);try{const nt=Wt.put({compositeKey:tt,value:ke});nt.onerror=mt=>{Zt(Dt(mt,"storage-set"))},nt.onsuccess=()=>{Rt()}}catch(nt){Zt(Z.create("storage-set",{originalErrorMessage:null===(qt=nt)||void 0===qt?void 0:qt.message}))}})})()}delete(K){var ke=this;return(0,f.Z)(function*(){const Xe=yield ke.openDbPromise;return new Promise((rt,Rt)=>{var Zt;const an=Xe.transaction([Vt],"readwrite").objectStore(Vt),Wt=ke.createCompositeKey(K);try{const tt=an.delete(Wt);tt.onerror=nt=>{Rt(Dt(nt,"storage-delete"))},tt.onsuccess=()=>{rt()}}catch(tt){Rt(Z.create("storage-delete",{originalErrorMessage:null===(Zt=tt)||void 0===Zt?void 0:Zt.message}))}})})()}createCompositeKey(K){return[this.appId,this.appName,this.namespace,K].join()}}class Mn{constructor(K){this.storage=K}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var K=this;return(0,f.Z)(function*(){const ke=K.storage.getLastFetchStatus(),Xe=K.storage.getLastSuccessfulFetchTimestampMillis(),rt=K.storage.getActiveConfig(),Rt=yield ke;Rt&&(K.lastFetchStatus=Rt);const Zt=yield Xe;Zt&&(K.lastSuccessfulFetchTimestampMillis=Zt);const qt=yield rt;qt&&(K.activeConfig=qt)})()}setLastFetchStatus(K){return this.lastFetchStatus=K,this.storage.setLastFetchStatus(K)}setLastSuccessfulFetchTimestampMillis(K){return this.lastSuccessfulFetchTimestampMillis=K,this.storage.setLastSuccessfulFetchTimestampMillis(K)}setActiveConfig(K){return this.activeConfig=K,this.storage.setActiveConfig(K)}}function Fn(){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(){if(!(0,L.hl)())return!1;try{return yield(0,L.eu)()}catch{return!1}})).apply(this,arguments)}!function Gn(){(0,B._registerComponent)(new ee.wA(G,function it(K,{instanceIdentifier:ke}){const Xe=K.getProvider("app").getImmediate(),rt=K.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Z.create("registration-window");if(!(0,L.hl)())throw Z.create("indexed-db-unavailable");const{projectId:Rt,apiKey:Zt,appId:qt}=Xe.options;if(!Rt)throw Z.create("registration-project-id");if(!Zt)throw Z.create("registration-api-key");if(!qt)throw Z.create("registration-app-id");const an=new Nr(qt,Xe.name,ke=ke||"firebase"),Wt=new Mn(an),tt=new Ie.Yd(ue);tt.logLevel=Ie.in.ERROR;const nt=new pt(rt,B.SDK_VERSION,ke,Rt,Zt,qt),mt=new Ke(nt,an),qn=new Be(mt,an,Wt,tt),Ln=new pn(Xe,qn,Wt,an,tt);return function xe(it){const K=(0,L.m9)(it);K._initializePromise||(K._initializePromise=K._storageCache.loadFromStorage().then(()=>{K._isInitializationComplete=!0}))}(Ln),Ln},"PUBLIC").setMultipleInstances(!0)),(0,B.registerVersion)(ue,"0.3.15"),(0,B.registerVersion)(ue,"0.3.15","esm2017")}()},9751:(Et,Re,k)=>{k.d(Re,{y:()=>de});var f=k(2961),B=k(727),L=k(8822),ee=k(9635),Ie=k(2416),ve=k(576),ue=k(2806);let de=(()=>{class Z{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Te=new Z;return Te.source=this,Te.operator=Pe,Te}subscribe(Pe,Te,Je){const Ee=function z(Z){return Z&&Z instanceof f.Lv||function G(Z){return Z&&(0,ve.m)(Z.next)&&(0,ve.m)(Z.error)&&(0,ve.m)(Z.complete)}(Z)&&(0,B.Nn)(Z)}(Pe)?Pe:new f.Hp(Pe,Te,Je);return(0,ue.x)(()=>{const{operator:he,source:ct}=this;Ee.add(he?he.call(Ee,ct):ct?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Te){Pe.error(Te)}}forEach(Pe,Te){return new(Te=me(Te))((Je,Ee)=>{const he=new f.Hp({next:ct=>{try{Pe(ct)}catch(Ze){Ee(Ze),he.unsubscribe()}},error:Ee,complete:Je});this.subscribe(he)})}_subscribe(Pe){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Pe)}[L.L](){return this}pipe(...Pe){return(0,ee.U)(Pe)(this)}toPromise(Pe){return new(Pe=me(Pe))((Te,Je)=>{let Ee;this.subscribe(he=>Ee=he,he=>Je(he),()=>Te(Ee))})}}return Z.create=Ne=>new Z(Ne),Z})();function me(Z){var Ne;return null!==(Ne=Z??Ie.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(Et,Re,k)=>{k.d(Re,{x:()=>ue});var f=k(9751),B=k(727);const ee=(0,k(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ie=k(8737),ve=k(2806);let ue=(()=>{class me extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const Z=new de(this,this);return Z.operator=z,Z}_throwIfClosed(){if(this.closed)throw new ee}next(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(z)}})}error(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:Z}=this;for(;Z.length;)Z.shift().error(z)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:Z,isStopped:Ne,observers:Pe}=this;return Z||Ne?B.Lc:(this.currentObservers=null,Pe.push(z),new B.w0(()=>{this.currentObservers=null,(0,Ie.P)(Pe,z)}))}_checkFinalizedStatuses(z){const{hasError:Z,thrownError:Ne,isStopped:Pe}=this;Z?z.error(Ne):Pe&&z.complete()}asObservable(){const z=new f.y;return z.source=this,z}}return me.create=(G,z)=>new de(G,z),me})();class de extends ue{constructor(G,z){super(),this.destination=G,this.source=z}next(G){var z,Z;null===(Z=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===Z||Z.call(z,G)}error(G){var z,Z;null===(Z=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===Z||Z.call(z,G)}complete(){var G,z;null===(z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===z||z.call(G)}_subscribe(G){var z,Z;return null!==(Z=null===(z=this.source)||void 0===z?void 0:z.subscribe(G))&&void 0!==Z?Z:B.Lc}}},2961:(Et,Re,k)=>{k.d(Re,{Hp:()=>Je,Lv:()=>Z});var f=k(576),B=k(727),L=k(2416),ee=k(7849);function Ie(){}const ve=me("C",void 0,void 0);function me(Fe,xe,be){return{kind:Fe,value:xe,error:be}}var G=k(3410),z=k(2806);class Z extends B.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,B.Nn)(xe)&&xe.add(this)):this.destination=Ze}static create(xe,be,qe){return new Je(xe,be,qe)}next(xe){this.isStopped?ct(function de(Fe){return me("N",Fe,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?ct(function ue(Fe){return me("E",void 0,Fe)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?ct(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ne=Function.prototype.bind;function Pe(Fe,xe){return Ne.call(Fe,xe)}class Te{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:be}=this;if(be.next)try{be.next(xe)}catch(qe){Ee(qe)}}error(xe){const{partialObserver:be}=this;if(be.error)try{be.error(xe)}catch(qe){Ee(qe)}else Ee(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(be){Ee(be)}}}class Je extends Z{constructor(xe,be,qe){let ne;if(super(),(0,f.m)(xe)||!xe)ne={next:xe??void 0,error:be??void 0,complete:qe??void 0};else{let ce;this&&L.v.useDeprecatedNextContext?(ce=Object.create(xe),ce.unsubscribe=()=>this.unsubscribe(),ne={next:xe.next&&Pe(xe.next,ce),error:xe.error&&Pe(xe.error,ce),complete:xe.complete&&Pe(xe.complete,ce)}):ne=xe}this.destination=new Te(ne)}}function Ee(Fe){L.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Fe):(0,ee.h)(Fe)}function ct(Fe,xe){const{onStoppedNotification:be}=L.v;be&&G.z.setTimeout(()=>be(Fe,xe))}const Ze={closed:!0,next:Ie,error:function he(Fe){throw Fe},complete:Ie}},727:(Et,Re,k)=>{k.d(Re,{Lc:()=>ve,w0:()=>Ie,Nn:()=>ue});var f=k(576);const L=(0,k(3888).d)(me=>function(z){me(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((Z,Ne)=>`${Ne+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ee=k(8737);class Ie{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Pe of z)Pe.remove(this);else z.remove(this);const{initialTeardown:Z}=this;if((0,f.m)(Z))try{Z()}catch(Pe){G=Pe instanceof L?Pe.errors:[Pe]}const{_finalizers:Ne}=this;if(Ne){this._finalizers=null;for(const Pe of Ne)try{de(Pe)}catch(Te){G=G??[],Te instanceof L?G=[...G,...Te.errors]:G.push(Te)}}if(G)throw new L(G)}}add(G){var z;if(G&&G!==this)if(this.closed)de(G);else{if(G instanceof Ie){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(G)}}_hasParent(G){const{_parentage:z}=this;return z===G||Array.isArray(z)&&z.includes(G)}_addParent(G){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(G),z):z?[z,G]:G}_removeParent(G){const{_parentage:z}=this;z===G?this._parentage=null:Array.isArray(z)&&(0,ee.P)(z,G)}remove(G){const{_finalizers:z}=this;z&&(0,ee.P)(z,G),G instanceof Ie&&G._removeParent(this)}}Ie.EMPTY=(()=>{const me=new Ie;return me.closed=!0,me})();const ve=Ie.EMPTY;function ue(me){return me instanceof Ie||me&&"closed"in me&&(0,f.m)(me.remove)&&(0,f.m)(me.add)&&(0,f.m)(me.unsubscribe)}function de(me){(0,f.m)(me)?me():me.unsubscribe()}},2416:(Et,Re,k)=>{k.d(Re,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Re,k)=>{k.d(Re,{E:()=>B});const B=new(k(9751).y)(Ie=>Ie.complete())},8996:(Et,Re,k)=>{k.d(Re,{D:()=>xe});var f=k(8421),B=k(5363),L=k(9468),ve=k(9751),de=k(2202),me=k(576),G=k(9672);function Z(be,qe){if(!be)throw new Error("Iterable cannot be null");return new ve.y(ne=>{(0,G.f)(ne,qe,()=>{const ce=be[Symbol.asyncIterator]();(0,G.f)(ne,qe,()=>{ce.next().then(we=>{we.done?ne.complete():ne.next(we.value)})},0,!0)})})}var Ne=k(3670),Pe=k(8239),Te=k(1144),Je=k(6495),Ee=k(2206),he=k(4532),ct=k(3260);function xe(be,qe){return qe?function Fe(be,qe){if(null!=be){if((0,Ne.c)(be))return function ee(be,qe){return(0,f.Xf)(be).pipe((0,L.R)(qe),(0,B.Q)(qe))}(be,qe);if((0,Te.z)(be))return function ue(be,qe){return new ve.y(ne=>{let ce=0;return qe.schedule(function(){ce===be.length?ne.complete():(ne.next(be[ce++]),ne.closed||this.schedule())})})}(be,qe);if((0,Pe.t)(be))return function Ie(be,qe){return(0,f.Xf)(be).pipe((0,L.R)(qe),(0,B.Q)(qe))}(be,qe);if((0,Ee.D)(be))return Z(be,qe);if((0,Je.T)(be))return function z(be,qe){return new ve.y(ne=>{let ce;return(0,G.f)(ne,qe,()=>{ce=be[de.h](),(0,G.f)(ne,qe,()=>{let we,X;try{({value:we,done:X}=ce.next())}catch(Q){return void ne.error(Q)}X?ne.complete():ne.next(we)},0,!0)}),()=>(0,me.m)(ce?.return)&&ce.return()})}(be,qe);if((0,ct.L)(be))return function Ze(be,qe){return Z((0,ct.Q)(be),qe)}(be,qe)}throw(0,he.z)(be)}(be,qe):(0,f.Xf)(be)}},8421:(Et,Re,k)=>{k.d(Re,{Xf:()=>Ne});var f=k(655),B=k(1144),L=k(8239),ee=k(9751),Ie=k(3670),ve=k(2206),ue=k(4532),de=k(6495),me=k(3260),G=k(576),z=k(7849),Z=k(8822);function Ne(Fe){if(Fe instanceof ee.y)return Fe;if(null!=Fe){if((0,Ie.c)(Fe))return function Pe(Fe){return new ee.y(xe=>{const be=Fe[Z.L]();if((0,G.m)(be.subscribe))return be.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,B.z)(Fe))return function Te(Fe){return new ee.y(xe=>{for(let be=0;be<Fe.length&&!xe.closed;be++)xe.next(Fe[be]);xe.complete()})}(Fe);if((0,L.t)(Fe))return function Je(Fe){return new ee.y(xe=>{Fe.then(be=>{xe.closed||(xe.next(be),xe.complete())},be=>xe.error(be)).then(null,z.h)})}(Fe);if((0,ve.D)(Fe))return he(Fe);if((0,de.T)(Fe))return function Ee(Fe){return new ee.y(xe=>{for(const be of Fe)if(xe.next(be),xe.closed)return;xe.complete()})}(Fe);if((0,me.L)(Fe))return function ct(Fe){return he((0,me.Q)(Fe))}(Fe)}throw(0,ue.z)(Fe)}function he(Fe){return new ee.y(xe=>{(function Ze(Fe,xe){var be,qe,ne,ce;return(0,f.mG)(this,void 0,void 0,function*(){try{for(be=(0,f.KL)(Fe);!(qe=yield be.next()).done;)if(xe.next(qe.value),xe.closed)return}catch(we){ne={error:we}}finally{try{qe&&!qe.done&&(ce=be.return)&&(yield ce.call(be))}finally{if(ne)throw ne.error}}xe.complete()})})(Fe,xe).catch(be=>xe.error(be))})}},6451:(Et,Re,k)=>{k.d(Re,{T:()=>ve});var f=k(8189),B=k(8421),L=k(515),ee=k(7669),Ie=k(8996);function ve(...ue){const de=(0,ee.yG)(ue),me=(0,ee._6)(ue,1/0),G=ue;return G.length?1===G.length?(0,B.Xf)(G[0]):(0,f.J)(me)((0,Ie.D)(G,de)):L.E}},5403:(Et,Re,k)=>{k.d(Re,{Q:()=>L,x:()=>B});var f=k(2961);function B(ee,Ie,ve,ue,de){return new L(ee,Ie,ve,ue,de)}class L extends f.Lv{constructor(Ie,ve,ue,de,me,G){super(Ie),this.onFinalize=me,this.shouldUnsubscribe=G,this._next=ve?function(z){try{ve(z)}catch(Z){Ie.error(Z)}}:super._next,this._error=de?function(z){try{de(z)}catch(Z){Ie.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(z){Ie.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(Ie=this.onFinalize)||void 0===Ie||Ie.call(this))}}}},4004:(Et,Re,k)=>{k.d(Re,{U:()=>L});var f=k(4482),B=k(5403);function L(ee,Ie){return(0,f.e)((ve,ue)=>{let de=0;ve.subscribe((0,B.x)(ue,me=>{ue.next(ee.call(Ie,me,de++))}))})}},8189:(Et,Re,k)=>{k.d(Re,{J:()=>L});var f=k(5577),B=k(4671);function L(ee=1/0){return(0,f.z)(B.y,ee)}},5577:(Et,Re,k)=>{k.d(Re,{z:()=>de});var f=k(4004),B=k(8421),L=k(4482),ee=k(9672),Ie=k(5403),ue=k(576);function de(me,G,z=1/0){return(0,ue.m)(G)?de((Z,Ne)=>(0,f.U)((Pe,Te)=>G(Z,Pe,Ne,Te))((0,B.Xf)(me(Z,Ne))),z):("number"==typeof G&&(z=G),(0,L.e)((Z,Ne)=>function ve(me,G,z,Z,Ne,Pe,Te,Je){const Ee=[];let he=0,ct=0,Ze=!1;const Fe=()=>{Ze&&!Ee.length&&!he&&G.complete()},xe=qe=>he<Z?be(qe):Ee.push(qe),be=qe=>{Pe&&G.next(qe),he++;let ne=!1;(0,B.Xf)(z(qe,ct++)).subscribe((0,Ie.x)(G,ce=>{Ne?.(ce),Pe?xe(ce):G.next(ce)},()=>{ne=!0},void 0,()=>{if(ne)try{for(he--;Ee.length&&he<Z;){const ce=Ee.shift();Te?(0,ee.f)(G,Te,()=>be(ce)):be(ce)}Fe()}catch(ce){G.error(ce)}}))};return me.subscribe((0,Ie.x)(G,xe,()=>{Ze=!0,Fe()})),()=>{Je?.()}}(Z,Ne,me,z)))}},5363:(Et,Re,k)=>{k.d(Re,{Q:()=>ee});var f=k(9672),B=k(4482),L=k(5403);function ee(Ie,ve=0){return(0,B.e)((ue,de)=>{ue.subscribe((0,L.x)(de,me=>(0,f.f)(de,Ie,()=>de.next(me),ve),()=>(0,f.f)(de,Ie,()=>de.complete(),ve),me=>(0,f.f)(de,Ie,()=>de.error(me),ve)))})}},3099:(Et,Re,k)=>{k.d(Re,{B:()=>Ie});var f=k(8421),B=k(7579),L=k(2961),ee=k(4482);function Ie(ue={}){const{connector:de=(()=>new B.x),resetOnError:me=!0,resetOnComplete:G=!0,resetOnRefCountZero:z=!0}=ue;return Z=>{let Ne,Pe,Te,Je=0,Ee=!1,he=!1;const ct=()=>{Pe?.unsubscribe(),Pe=void 0},Ze=()=>{ct(),Ne=Te=void 0,Ee=he=!1},Fe=()=>{const xe=Ne;Ze(),xe?.unsubscribe()};return(0,ee.e)((xe,be)=>{Je++,!he&&!Ee&&ct();const qe=Te=Te??de();be.add(()=>{Je--,0===Je&&!he&&!Ee&&(Pe=ve(Fe,z))}),qe.subscribe(be),!Ne&&Je>0&&(Ne=new L.Hp({next:ne=>qe.next(ne),error:ne=>{he=!0,ct(),Pe=ve(Ze,me,ne),qe.error(ne)},complete:()=>{Ee=!0,ct(),Pe=ve(Ze,G),qe.complete()}}),(0,f.Xf)(xe).subscribe(Ne))})(Z)}}function ve(ue,de,...me){if(!0===de)return void ue();if(!1===de)return;const G=new L.Hp({next:()=>{G.unsubscribe(),ue()}});return de(...me).subscribe(G)}},9468:(Et,Re,k)=>{k.d(Re,{R:()=>B});var f=k(4482);function B(L,ee=0){return(0,f.e)((Ie,ve)=>{ve.add(L.schedule(()=>Ie.subscribe(ve),ee))})}},8505:(Et,Re,k)=>{k.d(Re,{b:()=>Ie});var f=k(576),B=k(4482),L=k(5403),ee=k(4671);function Ie(ve,ue,de){const me=(0,f.m)(ve)||ue||de?{next:ve,error:ue,complete:de}:ve;return me?(0,B.e)((G,z)=>{var Z;null===(Z=me.subscribe)||void 0===Z||Z.call(me);let Ne=!0;G.subscribe((0,L.x)(z,Pe=>{var Te;null===(Te=me.next)||void 0===Te||Te.call(me,Pe),z.next(Pe)},()=>{var Pe;Ne=!1,null===(Pe=me.complete)||void 0===Pe||Pe.call(me),z.complete()},Pe=>{var Te;Ne=!1,null===(Te=me.error)||void 0===Te||Te.call(me,Pe),z.error(Pe)},()=>{var Pe,Te;Ne&&(null===(Pe=me.unsubscribe)||void 0===Pe||Pe.call(me)),null===(Te=me.finalize)||void 0===Te||Te.call(me)}))}):ee.y}},4408:(Et,Re,k)=>{k.d(Re,{o:()=>Ie});var f=k(727);class B extends f.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const L={setInterval(ve,ue,...de){const{delegate:me}=L;return me?.setInterval?me.setInterval(ve,ue,...de):setInterval(ve,ue,...de)},clearInterval(ve){const{delegate:ue}=L;return(ue?.clearInterval||clearInterval)(ve)},delegate:void 0};var ee=k(8737);class Ie extends B{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var me;if(this.closed)return this;this.state=ue;const G=this.id,z=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(z,G,de)),this.pending=!0,this.delay=de,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(z,this.id,de),this}requestAsyncId(ue,de,me=0){return L.setInterval(ue.flush.bind(ue,this),me)}recycleAsyncId(ue,de,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return de;null!=de&&L.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ue,de);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let G,me=!1;try{this.work(ue)}catch(z){me=!0,G=z||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:me}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(me,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Re,k)=>{k.d(Re,{v:()=>L});var f=k(6063);class B{constructor(Ie,ve=B.now){this.schedulerActionCtor=Ie,this.now=ve}schedule(Ie,ve=0,ue){return new this.schedulerActionCtor(this,Ie).schedule(ue,ve)}}B.now=f.l.now;class L extends B{constructor(Ie,ve=B.now){super(Ie,ve),this.actions=[],this._active=!1}flush(Ie){const{actions:ve}=this;if(this._active)return void ve.push(Ie);let ue;this._active=!0;do{if(ue=Ie.execute(Ie.state,Ie.delay))break}while(Ie=ve.shift());if(this._active=!1,ue){for(;Ie=ve.shift();)Ie.unsubscribe();throw ue}}}},4986:(Et,Re,k)=>{k.d(Re,{z:()=>L});var f=k(4408);const L=new(k(7565).v)(f.o)},6063:(Et,Re,k)=>{k.d(Re,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Et,Re,k)=>{k.d(Re,{z:()=>f});const f={setTimeout(B,L,...ee){const{delegate:Ie}=f;return Ie?.setTimeout?Ie.setTimeout(B,L,...ee):setTimeout(B,L,...ee)},clearTimeout(B){const{delegate:L}=f;return(L?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(Et,Re,k)=>{k.d(Re,{h:()=>B});const B=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Re,k)=>{k.d(Re,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,Re,k)=>{k.d(Re,{_6:()=>ve,jO:()=>ee,yG:()=>Ie});var f=k(576);function L(ue){return ue[ue.length-1]}function ee(ue){return(0,f.m)(L(ue))?ue.pop():void 0}function Ie(ue){return function B(ue){return ue&&(0,f.m)(ue.schedule)}(L(ue))?ue.pop():void 0}function ve(ue,de){return"number"==typeof L(ue)?ue.pop():de}},8737:(Et,Re,k)=>{function f(B,L){if(B){const ee=B.indexOf(L);0<=ee&&B.splice(ee,1)}}k.d(Re,{P:()=>f})},3888:(Et,Re,k)=>{function f(B){const ee=B(Ie=>{Error.call(Ie),Ie.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}k.d(Re,{d:()=>f})},2806:(Et,Re,k)=>{k.d(Re,{O:()=>ee,x:()=>L});var f=k(2416);let B=null;function L(Ie){if(f.v.useDeprecatedSynchronousErrorHandling){const ve=!B;if(ve&&(B={errorThrown:!1,error:null}),Ie(),ve){const{errorThrown:ue,error:de}=B;if(B=null,ue)throw de}}else Ie()}function ee(Ie){f.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=Ie)}},9672:(Et,Re,k)=>{function f(B,L,ee,Ie=0,ve=!1){const ue=L.schedule(function(){ee(),ve?B.add(this.schedule(null,Ie)):this.unsubscribe()},Ie);if(B.add(ue),!ve)return ue}k.d(Re,{f:()=>f})},4671:(Et,Re,k)=>{function f(B){return B}k.d(Re,{y:()=>f})},1144:(Et,Re,k)=>{k.d(Re,{z:()=>f});const f=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(Et,Re,k)=>{k.d(Re,{D:()=>B});var f=k(576);function B(L){return Symbol.asyncIterator&&(0,f.m)(L?.[Symbol.asyncIterator])}},576:(Et,Re,k)=>{function f(B){return"function"==typeof B}k.d(Re,{m:()=>f})},3670:(Et,Re,k)=>{k.d(Re,{c:()=>L});var f=k(8822),B=k(576);function L(ee){return(0,B.m)(ee[f.L])}},6495:(Et,Re,k)=>{k.d(Re,{T:()=>L});var f=k(2202),B=k(576);function L(ee){return(0,B.m)(ee?.[f.h])}},8239:(Et,Re,k)=>{k.d(Re,{t:()=>B});var f=k(576);function B(L){return(0,f.m)(L?.then)}},3260:(Et,Re,k)=>{k.d(Re,{L:()=>ee,Q:()=>L});var f=k(655),B=k(576);function L(Ie){return(0,f.FC)(this,arguments,function*(){const ue=Ie.getReader();try{for(;;){const{value:de,done:me}=yield(0,f.qq)(ue.read());if(me)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(de)}}finally{ue.releaseLock()}})}function ee(Ie){return(0,B.m)(Ie?.getReader)}},4482:(Et,Re,k)=>{k.d(Re,{A:()=>B,e:()=>L});var f=k(576);function B(ee){return(0,f.m)(ee?.lift)}function L(ee){return Ie=>{if(B(Ie))return Ie.lift(function(ve){try{return ee(ve,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(Et,Re,k)=>{k.d(Re,{U:()=>L,z:()=>B});var f=k(4671);function B(...ee){return L(ee)}function L(ee){return 0===ee.length?f.y:1===ee.length?ee[0]:function(ve){return ee.reduce((ue,de)=>de(ue),ve)}}},7849:(Et,Re,k)=>{k.d(Re,{h:()=>L});var f=k(2416),B=k(3410);function L(ee){B.z.setTimeout(()=>{const{onUnhandledError:Ie}=f.v;if(!Ie)throw ee;Ie(ee)})}},4532:(Et,Re,k)=>{function f(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Re,{z:()=>f})},655:(Et,Re,k)=>{function ee(X,Q){var le={};for(var ae in X)Object.prototype.hasOwnProperty.call(X,ae)&&Q.indexOf(ae)<0&&(le[ae]=X[ae]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(ae=Object.getOwnPropertySymbols(X);Be<ae.length;Be++)Q.indexOf(ae[Be])<0&&Object.prototype.propertyIsEnumerable.call(X,ae[Be])&&(le[ae[Be]]=X[ae[Be]])}return le}function de(X,Q,le,ae){return new(le||(le=Promise))(function($e,pt){function nn(cn){try{Ke(ae.next(cn))}catch(Rn){pt(Rn)}}function Ft(cn){try{Ke(ae.throw(cn))}catch(Rn){pt(Rn)}}function Ke(cn){cn.done?$e(cn.value):function Be($e){return $e instanceof le?$e:new le(function(pt){pt($e)})}(cn.value).then(nn,Ft)}Ke((ae=ae.apply(X,Q||[])).next())})}function Ee(X){return this instanceof Ee?(this.v=X,this):new Ee(X)}function he(X,Q,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,ae=le.apply(X,Q||[]),$e=[];return Be={},pt("next"),pt("throw"),pt("return"),Be[Symbol.asyncIterator]=function(){return this},Be;function pt(pn){ae[pn]&&(Be[pn]=function(Dt){return new Promise(function(Vt,At){$e.push([pn,Dt,Vt,At])>1||nn(pn,Dt)})})}function nn(pn,Dt){try{!function Ft(pn){pn.value instanceof Ee?Promise.resolve(pn.value.v).then(Ke,cn):Rn($e[0][2],pn)}(ae[pn](Dt))}catch(Vt){Rn($e[0][3],Vt)}}function Ke(pn){nn("next",pn)}function cn(pn){nn("throw",pn)}function Rn(pn,Dt){pn(Dt),$e.shift(),$e.length&&nn($e[0][0],$e[0][1])}}function Ze(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,Q=X[Symbol.asyncIterator];return Q?Q.call(X):(X=function Z(X){var Q="function"==typeof Symbol&&Symbol.iterator,le=Q&&X[Q],ae=0;if(le)return le.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ae>=X.length&&(X=void 0),{value:X&&X[ae++],done:!X}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),le={},ae("next"),ae("throw"),ae("return"),le[Symbol.asyncIterator]=function(){return this},le);function ae($e){le[$e]=X[$e]&&function(pt){return new Promise(function(nn,Ft){!function Be($e,pt,nn,Ft){Promise.resolve(Ft).then(function(Ke){$e({value:Ke,done:nn})},pt)}(nn,Ft,(pt=X[$e](pt)).done,pt.value)})}}}k.d(Re,{FC:()=>he,KL:()=>Ze,_T:()=>ee,mG:()=>de,qq:()=>Ee})},4650:(Et,Re,k)=>{k.d(Re,{$8M:()=>Jl,$Z:()=>Ah,AFp:()=>PE,AaK:()=>de,CRH:()=>_f,CZH:()=>Sf,CqO:()=>yA,D6c:()=>Jb,EJc:()=>Lb,F4k:()=>_A,FYo:()=>JD,FiY:()=>_r,G48:()=>zM,GfV:()=>j0,Gpc:()=>z,JOm:()=>Do,LFG:()=>nr,LSH:()=>Jp,Lbi:()=>Fb,Lck:()=>gM,MMx:()=>sE,NdJ:()=>wC,OlP:()=>Qn,PXZ:()=>Sn,Q6J:()=>Dv,QGY:()=>EC,QP$:()=>fe,QbO:()=>$M,Qsj:()=>gk,R0b:()=>Rs,RDi:()=>Zp,Rgc:()=>dl,SBq:()=>Va,Sil:()=>ci,Suo:()=>lr,TTD:()=>jo,TgZ:()=>Xg,X6Q:()=>Js,XFs:()=>K,Xpm:()=>Ae,Xts:()=>Ey,Y36:()=>$a,YKP:()=>rE,YNc:()=>pA,Yjl:()=>x,Yz7:()=>Dt,Z0I:()=>wr,ZZ4:()=>Zm,_Bn:()=>Im,_UZ:()=>_C,_Vd:()=>Zu,_c5:()=>Qm,_uU:()=>tm,aQg:()=>fa,c2e:()=>LE,cJS:()=>At,cg1:()=>Uv,dDg:()=>Wb,dqk:()=>mt,eFA:()=>Wm,ekj:()=>CC,eoX:()=>zb,f3M:()=>_i,g9A:()=>FE,h0i:()=>ll,hGG:()=>Vf,iGM:()=>mf,ifc:()=>nt,ip1:()=>NE,jDz:()=>Cm,kL8:()=>WC,lG2:()=>P,lqb:()=>To,lri:()=>jb,n5z:()=>go,oAB:()=>un,q4F:()=>H0,qLn:()=>wh,qOj:()=>Yg,qZA:()=>Sv,rWj:()=>Hb,sBO:()=>El,sIi:()=>Ac,s_b:()=>Hc,soG:()=>jm,tb:()=>ml,tp0:()=>ta,uIk:()=>Bh,vHH:()=>Te,vpe:()=>Gi,wAp:()=>zt,xp6:()=>vI,z2F:()=>Mf,zSh:()=>rg,zs3:()=>el});var f=k(7579),B=k(727),L=k(9751),ee=k(6451),Ie=k(3099);function ve(s){for(let o in s)if(s[o]===ve)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ve({__forward_ref__:ve});function z(s){return s.__forward_ref__=z,s.toString=function(){return de(this())},s}function Z(s){return Ne(s)?s():s}function Ne(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===z}class Te extends Error{constructor(o,u){super(function Je(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function xe(s,o){throw new Te(-201,!1)}function Ft(s,o){null==s&&function Ke(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Dt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function At(s){return{providers:s.providers||[],imports:s.imports||[]}}function Zn(s){return Nr(s,xn)||Nr(s,pr)}function wr(s){return null!==Zn(s)}function Nr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ir(s){return s&&(s.hasOwnProperty(Fn)||s.hasOwnProperty(it))?s[Fn]:null}const xn=ve({\u0275prov:ve}),Fn=ve({\u0275inj:ve}),pr=ve({ngInjectableDef:ve}),it=ve({ngInjectorDef:ve});var K=(()=>((K=K||{})[K.Default=0]="Default",K[K.Host=1]="Host",K[K.Self=2]="Self",K[K.SkipSelf=4]="SkipSelf",K[K.Optional=8]="Optional",K))();let ke;function rt(s){const o=ke;return ke=s,o}function Rt(s,o,u){const c=Zn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&K.Optional?null:void 0!==o?o:void xe(de(s))}function qt(s){return{toString:s}.toString()}var an=(()=>((an=an||{})[an.OnPush=0]="OnPush",an[an.Default=1]="Default",an))(),nt=(()=>{return(s=nt||(nt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",nt;var s})();const mt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yn={},wt=[],Cr=ve({\u0275cmp:ve}),xt=ve({\u0275dir:ve}),Jn=ve({\u0275pipe:ve}),Bt=ve({\u0275mod:ve}),Cn=ve({\u0275fac:ve}),bn=ve({__NG_ELEMENT_ID__:ve});let at=0;function Ae(s){return qt(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===an.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||wt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||nt.Emulated,id:"c"+at++,styles:s.styles||wt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return h.inputs=$(s.inputs,c),h.outputs=$(s.outputs),v&&v.forEach(w=>w(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(bt).filter(Pt):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(H).filter(Pt):null,h})}function bt(s){return S(s)||N(s)}function Pt(s){return null!==s}function un(s){return qt(()=>({type:s.type,bootstrap:s.bootstrap||wt,declarations:s.declarations||wt,imports:s.imports||wt,exports:s.exports||wt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $(s,o){if(null==s)return Yn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),u[h]=c,o&&(o[h]=g)}return u}const P=Ae;function x(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function S(s){return s[Cr]||null}function N(s){return s[xt]||null}function H(s){return s[Jn]||null}function fe(s){const o=S(s)||N(s)||H(s);return null!==o&&o.standalone}function Le(s,o){const u=s[Bt]||null;if(!u&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return u}function Pr(s){return Array.isArray(s)&&"object"==typeof s[1]}function hi(s){return Array.isArray(s)&&!0===s[1]}function Vs(s){return 0!=(8&s.flags)}function Ji(s){return 2==(2&s.flags)}function Us(s){return 1==(1&s.flags)}function Ui(s){return null!==s.template}function Ea(s){return 0!=(256&s[2])}function ti(s,o){return s.hasOwnProperty(Cn)?s[Cn]:null}class Ia{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function jo(){return Cp}function Cp(s){return s.type.prototype.ngOnChanges&&(s.setInput=Sd),Dd}function Dd(){const s=Ca(this),o=s?.current;if(o){const u=s.previous;if(u===Yn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Sd(s,o,u,c){const h=Ca(s)||function U_(s,o){return s[bp]=o}(s,{previous:Yn,current:null}),g=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[u],b=v[w];g[w]=new Ia(b&&b.currentValue,o,v===Yn),s[c]=o}jo.ngInherit=!0;const bp="__ngSimpleChanges__";function Ca(s){return s[bp]||null}function gr(s){for(;Array.isArray(s);)s=s[0];return s}function mi(s,o){return gr(o[s.index])}function Cu(s,o){return s.data[o]}function Nn(s,o){const u=o[s];return Pr(u)?u:u[0]}function ho(s){return 64==(64&s[2])}function gs(s,o){return null==o?null:s[o]}function bu(s){s[18]=0}function Tu(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Xt={lFrame:Ud(null),bindingsEnabled:!0};function Du(){return Xt.bindingsEnabled}function Ue(){return Xt.lFrame.lView}function _n(){return Xt.lFrame.tView}function Br(){let s=Ll();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ll(){return Xt.lFrame.currentTNode}function $i(s,o){const u=Xt.lFrame;u.currentTNode=s,u.isParent=o}function Pd(){return Xt.lFrame.isParent}function Au(){return Xt.lFrame.bindingIndex++}function Ap(s,o){const u=Xt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Bl(o)}function Bl(s){Xt.lFrame.currentDirectiveIndex=s}function Fd(){return Xt.lFrame.currentQueryIndex}function Ld(s){Xt.lFrame.currentQueryIndex=s}function Vd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function K_(s,o,u){if(u&K.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||u&K.Host||(h=Vd(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=Xt.lFrame=Z_();return c.currentTNode=o,c.lView=s,!0}function $l(s){const o=Z_(),u=s[1];Xt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Z_(){const s=Xt.lFrame,o=null===s?null:s.child;return null===o?Ud(s):o}function Ud(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Y_(){const s=Xt.lFrame;return Xt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Mp=Y_;function Da(){const s=Y_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function or(){return Xt.lFrame.selectedIndex}function $s(s){Xt.lFrame.selectedIndex=s}function ar(){const s=Xt.lFrame;return Cu(s.tView,s.selectedIndex)}function Mu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:D,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),w&&((s.contentHooks||(s.contentHooks=[])).push(u,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,w)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),D&&((s.viewHooks||(s.viewHooks=[])).push(u,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,D)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Hl(s,o,u){jd(s,o,3,u)}function zo(s,o,u,c){(3&s[2])===u&&jd(s,o,u,c)}function $d(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function jd(s,o,u,c){const g=c??-1,v=o.length-1;let w=0;for(let b=void 0!==c?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(w=o[b],null!=c&&w>=c)break}else o[b]<0&&(s[18]+=65536),(w<g||-1==g)&&(Rp(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Rp(s,o,u,c){const h=u[c]<0,g=u[c+1],w=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class ji{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function js(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const g=u[c++],v=u[c++],w=u[c++];s.setAttribute(o,v,w,g)}else{const g=h,v=u[++c];qd(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function Gd(s){return 3===s||4===s||6===s}function qd(s){return 64===s.charCodeAt(0)}function xu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||xp(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function xp(s,o,u,c,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===u){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function iy(s){return-1!==s}function Go(s){return 32767&s}function po(s,o){let u=function sy(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Kd=!0;function Gl(s){const o=Kd;return Kd=s,o}let Np=0;const ns={};function qo(s,o){const u=ql(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Zd(c.data,s),Zd(o,null),Zd(c.blueprint,null));const h=Nu(s,o),g=s.injectorIndex;if(iy(h)){const v=Go(h),w=po(h,o),b=w[1].data;for(let D=0;D<8;D++)o[g+D]=w[v+D]|b[v+D]}return o[g+8]=h,g}function Zd(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ql(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Nu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=Xl(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Pu(s,o,u){!function ay(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(bn)&&(c=u[bn]),null==c&&(c=u[bn]=Np++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Kl(s,o,u){if(u&K.Optional||void 0!==s)return s;xe()}function Ko(s,o,u,c){if(u&K.Optional&&void 0===c&&(c=null),0==(u&(K.Self|K.Host))){const h=s[9],g=rt(void 0);try{return h?h.get(o,c,u&K.Optional):Rt(o,c,u&K.Optional)}finally{rt(g)}}return Kl(c,0,u)}function Zl(s,o,u,c=K.Default,h){if(null!==s){if(1024&o[2]){const v=function ly(s,o,u,c,h){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const w=Pp(g,v,u,c|K.Self,ns);if(w!==ns)return w;let b=g.parent;if(!b){const D=v[21];if(D){const R=D.get(u,ns,c);if(R!==ns)return R}b=Xl(v),v=v[15]}g=b}return h}(s,o,u,c,ns);if(v!==ns)return v}const g=Pp(s,o,u,c,ns);if(g!==ns)return g}return Ko(o,u,c,h)}function Pp(s,o,u,c,h){const g=function uy(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(bn)?s[bn]:void 0;return"number"==typeof o?o>=0?255&o:Fp:o}(u);if("function"==typeof g){if(!K_(o,s,c))return c&K.Host?Kl(h,0,c):Ko(o,u,c,h);try{const v=g(c);if(null!=v||c&K.Optional)return v;xe()}finally{Mp()}}else if("number"==typeof g){let v=null,w=ql(s,o),b=-1,D=c&K.Host?o[16][6]:null;for((-1===w||c&K.SkipSelf)&&(b=-1===w?Nu(s,o):o[w+8],-1!==b&&Op(c,!1)?(v=o[1],w=Go(b),o=po(b,o)):w=-1);-1!==w;){const R=o[1];if(Yl(g,w,R.data)){const V=kp(w,o,u,v,c,D);if(V!==ns)return V}b=o[w+8],-1!==b&&Op(c,o[1].data[w+8]===D)&&Yl(g,w,o)?(v=R,w=Go(b),o=po(b,o)):w=-1}}return h}function kp(s,o,u,c,h,g){const v=o[1],w=v.data[s+8],R=Ou(w,v,u,null==c?Ji(w)&&Kd:c!=v&&0!=(3&w.type),h&K.Host&&g===w);return null!==R?Hs(o,v,R,w):ns}function Ou(s,o,u,c,h){const g=s.providerIndexes,v=o.data,w=1048575&g,b=s.directiveStart,R=g>>20,q=h?w+R:s.directiveEnd;for(let se=c?w:w+R;se<q;se++){const De=v[se];if(se<b&&u===De||se>=b&&De.type===u)return se}if(h){const se=v[b];if(se&&Ui(se)&&se.type===u)return b}return null}function Hs(s,o,u,c){let h=s[u];const g=o.data;if(function Hd(s){return s instanceof ji}(h)){const v=h;v.resolving&&function ct(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Te(-200,`Circular dependency in DI detected for ${s}${u}`)}(function he(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(g[u]));const w=Gl(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?rt(v.injectImpl):null;K_(s,c,K.Default);try{h=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function jl(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const v=Cp(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==b&&rt(b),Gl(w),v.resolving=!1,Mp()}}return h}function Yl(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Op(s,o){return!(s&K.Self||s&K.Host&&o)}class Fu{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Zl(this._tNode,this._lView,o,c,u)}}function Fp(){return new Fu(Br(),Ue())}function go(s){return qt(()=>{const o=s.prototype.constructor,u=o[Cn]||Ql(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[Cn]||Ql(h);if(g&&g!==u)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Ql(s){return Ne(s)?()=>{const o=Ql(Z(s));return o&&o()}:ti(s)}function Xl(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Jl(s){return function ku(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const g=u[h];if(Gd(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(g===o)return u[h+1];h+=2}}}return null}(Br(),s)}const Lu="__parameters__";function Vu(s,o,u){return qt(()=>{const c=function Lp(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const v=new h(...g);return w.annotation=v,w;function w(b,D,R){const V=b.hasOwnProperty(Lu)?b[Lu]:Object.defineProperty(b,Lu,{value:[]})[Lu];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(v),b}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Qn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Dt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function er(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),er(c,o)):o!==s&&o.push(c)}return o}function Ws(s,o){s.forEach(u=>Array.isArray(u)?Ws(u,o):o(u))}function Yo(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ni(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Tt(s,o,u){let c=mo(s,o);return c>=0?s[1|c]=u:(c=~c,function dy(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Xd(s,o){const u=mo(s,o);if(u>=0)return s[1|u]}function mo(s,o){return function Jd(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const g=c+(h-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?h=g:c=g+1}return~(h<<u)}(s,o,1)}const xa={},nh="__NG_DI_FLAG__",yo="ngTempTokenPath",vs=/\n/gm,Hr="__source";let vo;function Eo(s){const o=vo;return vo=s,o}function mr(s,o=K.Default){if(void 0===vo)throw new Te(-203,!1);return null===vo?Rt(s,void 0,o):vo.get(s,o&K.Optional?null:void 0,o)}function nr(s,o=K.Default){return(function Xe(){return ke}()||mr)(Z(s),o)}function _i(s,o=K.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),nr(s,o)}function Wr(s){const o=[];for(let u=0;u<s.length;u++){const c=Z(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Te(900,!1);let h,g=K.Default;for(let v=0;v<c.length;v++){const w=c[v],b=zp(w);"number"==typeof b?-1===b?h=w.token:g|=b:h=w}o.push(nr(h,g))}else o.push(nr(c))}return o}function Es(s,o){return s[nh]=o,s.prototype[nh]=o,s}function zp(s){return s[nh]}const _r=Es(Vu("Optional"),8),ta=Es(Vu("SkipSelf"),4);let ah;function Zp(s){ah=s}class Qp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ws(s){return s instanceof Qp?s.changingThisBreaksApplicationSecurity:s}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var rr=(()=>((rr=rr||{})[rr.NONE=0]="NONE",rr[rr.HTML=1]="HTML",rr[rr.STYLE=2]="STYLE",rr[rr.SCRIPT=3]="SCRIPT",rr[rr.URL=4]="URL",rr[rr.RESOURCE_URL=5]="RESOURCE_URL",rr))();function Jp(s){const o=function gh(){const s=Ue();return s&&s[12]}();return o?o.sanitize(rr.URL,s)||"":function Zs(s,o){const u=function dh(s){return s instanceof Qp&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?ws(s):function _(s){return(s=String(s)).match(m)?s:"unsafe:"+s}(Ee(s))}const Ey=new Qn("ENVIRONMENT_INITIALIZER"),x0=new Qn("INJECTOR",-1),N0=new Qn("INJECTOR_DEF_TYPES");class P0{get(o,u=xa){if(u===xa){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return u}}function ZD(...s){return{\u0275providers:k0(0,s)}}function k0(s,...o){const u=[],c=new Set;let h;return Ws(o,g=>{const v=g;tg(v,u,[],c)&&(h||(h=[]),h.push(v))}),void 0!==h&&wy(h,u),u}function wy(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];Ws(h,g=>{o.push(g)})}}function tg(s,o,u,c){if(!(s=Z(s)))return!1;let h=null,g=Ir(s);const v=!g&&S(s);if(g||v){if(v&&!v.standalone)return!1;h=s}else{const b=s.ngModule;if(g=Ir(b),!g)return!1;h=b}const w=c.has(h);if(v){if(w)return!1;if(c.add(h),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const D of b)tg(D,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let D;c.add(h);try{Ws(g.imports,R=>{tg(R,o,u,c)&&(D||(D=[]),D.push(R))})}finally{}void 0!==D&&wy(D,o)}if(!w){const D=ti(h)||(()=>new h);o.push({provide:h,useFactory:D,deps:wt},{provide:N0,useValue:h,multi:!0},{provide:Ey,useValue:()=>nr(h),multi:!0})}const b=g.providers;null==b||w||Ws(b,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}const O0=ve({provide:String,useValue:ve});function mh(s){return null!==s&&"object"==typeof s&&O0 in s}function Is(s){return"function"==typeof s}const rg=new Qn("Set Injector scope."),ig={},Ku={};let sg;function og(){return void 0===sg&&(sg=new P0),sg}class To{}class Iy extends To{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ug(o,v=>this.processProvider(v)),this.records.set(x0,lc(void 0,this)),h.has("environment")&&this.records.set(To,lc(void 0,this));const g=this.records.get(rg);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(N0.multi,wt,K.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Eo(this),c=rt(void 0);try{return o()}finally{Eo(u),rt(c)}}get(o,u=xa,c=K.Default){this.assertNotDestroyed();const h=Eo(this),g=rt(void 0);try{if(!(c&K.SkipSelf)){let w=this.records.get(o);if(void 0===w){const b=function QD(s){return"function"==typeof s||"object"==typeof s&&s instanceof Qn}(o)&&Zn(o);w=b&&this.injectableDefInScope(b)?lc(_h(o),ig):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&K.Self?og():this.parent).get(o,u=c&K.Optional&&u===xa?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[yo]=v[yo]||[]).unshift(de(o)),h)throw v;return function hy(s,o,u,c){const h=s[yo];throw o[Hr]&&h.unshift(o[Hr]),s.message=function rs(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=de(o);if(Array.isArray(o))h=o.map(de).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):de(w)))}h=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(vs,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[yo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{rt(g),Eo(h)}}resolveInjectorInitializers(){const o=Eo(this),u=rt(void 0);try{const c=this.get(Ey.multi,wt,K.Self);for(const h of c)h()}finally{Eo(o),rt(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(de(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(o){let u=Is(o=Z(o))?o:Z(o&&o.provide);const c=function Cy(s){return mh(s)?lc(void 0,s.useValue):lc(ag(s),ig)}(o);if(Is(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=lc(void 0,ig,!0),h.factory=()=>Wr(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===ig&&(u.value=Ku,u.value=u.factory()),"object"==typeof u.value&&u.value&&function YD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Z(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function _h(s){const o=Zn(s),u=null!==o?o.factory:ti(s);if(null!==u)return u;if(s instanceof Qn)throw new Te(204,!1);if(s instanceof Function)return function L0(s){const o=s.length;if(o>0)throw function Qo(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Te(204,!1);const u=function Mn(s){const o=s&&(s[xn]||s[pr]);if(o){const u=function Gn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Te(204,!1)}function ag(s,o,u){let c;if(Is(s)){const h=Z(s);return ti(h)||_h(h)}if(mh(s))c=()=>Z(s.useValue);else if(function bo(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Wr(s.deps||[]));else if(function ng(s){return!(!s||!s.useExisting)}(s))c=()=>nr(Z(s.useExisting));else{const h=Z(s&&(s.useClass||s.provide));if(!function yh(s){return!!s.deps}(s))return ti(h)||_h(h);c=()=>new h(...Wr(s.deps))}return c}function lc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function by(s){return!!s.\u0275providers}function ug(s,o){for(const u of s)Array.isArray(u)?ug(u,o):by(u)?ug(u.\u0275providers,o):o(u)}class Ty{}class cg{resolveComponentFactory(o){throw function U0(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Zu=(()=>{class s{}return s.NULL=new cg,s})();function XD(){return cc(Br(),Ue())}function cc(s,o){return new Va(mi(s,o))}let Va=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=XD,s})();function $0(s){return s instanceof Va?s.nativeElement:s}class JD{}let gk=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function mk(){const s=Ue(),u=Nn(Br().index,s);return(Pr(u)?u:s)[11]}(),s})(),Dy=(()=>{class s{}return s.\u0275prov=Dt({token:s,providedIn:"root",factory:()=>null}),s})();class j0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const H0=new j0("14.2.9"),Sy={};function Py(s){return s.ngOriginalError}class wh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Py(o);for(;u&&Py(u);)u=Py(u);return u||null}}const ky=new Map;let oS=0;const mg="__ngContext__";function ii(s,o){Pr(o)?(s[mg]=o[20],function uS(s){ky.set(s[20],s)}(o)):s[mg]=o}function sa(s){return s instanceof Function?s():s}var Do=(()=>((Do=Do||{})[Do.Important=1]="Important",Do[Do.DashCase=2]="DashCase",Do))();function Uy(s,o){return undefined(s,o)}function gc(s){const o=s[3];return hi(o)?o[3]:o}function vg(s){return tI(s[13])}function Eg(s){return tI(s[4])}function tI(s){for(;null!==s&&!hi(s);)s=s[4];return s}function mc(s,o,u,c,h){if(null!=c){let g,v=!1;hi(c)?g=c:Pr(c)&&(v=!0,c=c[0]);const w=gr(c);0===s&&null!==u?null==h?uI(o,u,w):So(o,u,w,h||null,!0):1===s&&null!==u?So(o,u,w,h||null,!0):2===s?function IS(s,o,u){const c=Cg(s,o);c&&function wS(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function Dk(s,o,u,c,h){const g=u[7];g!==gr(u)&&mc(o,s,c,g,h);for(let w=10;w<u.length;w++){const b=u[w];Qu(b[1],b,s,o,c,g)}}(o,s,g,u,h)}}function wg(s,o,u){return s.createElement(o,u)}function sI(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Tu(h,-1)),u.splice(c,1)}function Hy(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&sI(h,c),o>0&&(s[u-1][4]=c[4]);const g=ni(s,10+o);!function jy(s,o){Qu(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function bh(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Qu(s,o,u,3,null,null),function bk(s){let o=s[13];if(!o)return Ig(s[1],s);for(;o;){let u=null;if(Pr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Pr(o)&&Ig(o[1],o),o=o[3];null===o&&(o=s),Pr(o)&&Ig(o[1],o),u=o&&o[4]}o=u}}(o)}}function Ig(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function zy(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof ji)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=h[g[v]],b=g[v+1];try{b.call(w)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function Wy(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],w="function"==typeof v?v(o):gr(o[v]),b=c[h=u[g+2]],D=u[g+3];"boolean"==typeof D?w.removeEventListener(u[g],b,D):D>=0?c[h=D]():c[h=-D].unsubscribe(),g+=2}else{const v=c[h=u[g+1]];u[g].call(v)}if(null!==c){for(let g=h+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&hi(o[3])){u!==o[3]&&sI(u,o);const c=o[19];null!==c&&c.detachView(s)}!function lS(s){ky.delete(s[20])}(o)}}function oI(s,o,u){return function aI(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===nt.None||h===nt.Emulated)return null}return mi(c,u)}(s,o.parent,u)}function So(s,o,u,c,h){s.insertBefore(o,u,c,h)}function uI(s,o,u){s.appendChild(o,u)}function lI(s,o,u,c,h){null!==c?So(s,o,u,c,h):uI(s,o,u)}function Cg(s,o){return s.parentNode(o)}let Gy=function dI(s,o,u){return 40&s.type?mi(s,u):null};function Tg(s,o,u,c){const h=oI(s,c,o),g=o[11],w=function Kr(s,o,u){return Gy(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let b=0;b<u.length;b++)lI(g,h,u[b],w,!1);else lI(g,h,u,w,!1)}function Dg(s,o){if(null!==o){const u=o.type;if(3&u)return mi(o,s);if(4&u)return hI(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Dg(s,c);{const h=s[o.index];return hi(h)?hI(-1,h):gr(h)}}if(32&u)return Uy(o,s)()||gr(s[o.index]);{const c=qy(s,o);return null!==c?Array.isArray(c)?c[0]:Dg(gc(s[16]),c):Dg(s,o.next)}}return null}function qy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function hI(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Dg(c,h)}return o[7]}function Ky(s,o,u,c,h,g,v){for(;null!=u;){const w=c[u.index],b=u.type;if(v&&0===o&&(w&&ii(gr(w),c),u.flags|=4),64!=(64&u.flags))if(8&b)Ky(s,o,u.child,c,h,g,!1),mc(o,s,h,w,g);else if(32&b){const D=Uy(u,c);let R;for(;R=D();)mc(o,s,h,R,g);mc(o,s,h,w,g)}else 16&b?Th(s,o,c,u,h,g):mc(o,s,h,w,g);u=v?u.projectionNext:u.next}}function Qu(s,o,u,c,h,g){Ky(u,c,s.firstChild,o,h,g,!1)}function Th(s,o,u,c,h,g){const v=u[16],b=v[6].projection[c.projection];if(Array.isArray(b))for(let D=0;D<b.length;D++)mc(o,s,h,b[D],g);else Ky(s,o,b,v[3],h,g,!0)}function Xu(s,o,u){s.setAttribute(o,"style",u)}function Dh(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function CS(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}u=h+1}}const Zy="ng-template";function Yy(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==CS(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function gI(s){return 4===s.type&&s.value!==Zy}function TS(s,o,u){return o===(4!==s.type||u?s.value:Zy)}function DS(s,o,u){let c=4;const h=s.attrs||[],g=function Sk(s){for(let o=0;o<s.length;o++)if(Gd(s[o]))return o;return s.length}(h);let v=!1;for(let w=0;w<o.length;w++){const b=o[w];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!TS(s,b,u)||""===b&&1===o.length){if(bs(c))return!1;v=!0}}else{const D=8&c?b:o[++w];if(8&c&&null!==s.attrs){if(!Yy(s.attrs,D,u)){if(bs(c))return!1;v=!0}continue}const V=SS(8&c?"class":b,h,gI(s),u);if(-1===V){if(bs(c))return!1;v=!0;continue}if(""!==D){let q;q=V>g?"":h[V+1].toLowerCase();const se=8&c?q:null;if(se&&-1!==CS(se,D,0)||2&c&&D!==q){if(bs(c))return!1;v=!0}}}}else{if(!v&&!bs(c)&&!bs(b))return!1;if(v&&bs(b))continue;v=!1,c=b|1&c}}return bs(c)||v}function bs(s){return 0==(1&s)}function SS(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function mI(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function AS(s,o,u=!1){for(let c=0;c<o.length;c++)if(DS(s,o[c],u))return!0;return!1}function _I(s,o){return s?":not("+o.trim()+")":o}function yI(s){let o=s[0],u=1,c=2,h="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const w=s[++u];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!bs(v)&&(o+=_I(g,h),h=""),c=v,g=g||!bs(c);u++}return""!==h&&(o+=_I(g,h)),o}const on={};function vI(s){EI(_n(),Ue(),or()+s,!1)}function EI(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Hl(o,g,u)}else{const g=s.preOrderHooks;null!==g&&zo(o,g,0,u)}$s(u)}function Jy(s,o=null,u=null,c){const h=II(s,o,u,c);return h.resolveInjectorInitializers(),h}function II(s,o=null,u=null,c,h=new Set){const g=[u||wt,ZD(s)];return c=c||("object"==typeof s?void 0:de(s)),new Iy(g,o||og(),c||null,h)}let el=(()=>{class s{static create(u,c){if(Array.isArray(u))return Jy({name:""},c,u,"");{const h=u.name??"";return Jy({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=xa,s.NULL=new P0,s.\u0275prov=Dt({token:s,providedIn:"any",factory:()=>nr(x0)}),s.__NG_ELEMENT_ID__=-1,s})();function $a(s,o=K.Default){const u=Ue();return null===u?nr(s,o):Zl(Br(),u,Z(s),o)}function Ah(){throw new Error("invalid")}function Mh(s,o){return s<<17|o<<2}function Ts(s){return s>>17&32767}function Ng(s){return 2|s}function Ha(s){return(131068&s)>>2}function kI(s,o){return-131069&s|o<<2}function Rh(s){return 1|s}function HI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],g=u[c+1];if(-1!==g){const v=s.data[g];Ld(h),v.contentQueries(2,o[g],g)}}}function Ph(s,o,u,c,h,g,v,w,b,D,R){const V=o.blueprint.slice();return V[0]=h,V[2]=76|c,(null!==R||s&&1024&s[2])&&(V[2]|=1024),bu(V),V[3]=V[15]=s,V[8]=u,V[10]=v||s&&s[10],V[11]=w||s&&s[11],V[12]=b||s&&s[12]||null,V[9]=D||s&&s[9]||null,V[6]=g,V[20]=function aS(){return oS++}(),V[21]=R,V[16]=2==o.type?s[16]:V,V}function Cc(s,o,u,c,h){let g=s.data[o];if(null===g)g=function zI(s,o,u,c,h){const g=Ll(),v=Pd(),b=s.data[o]=function ZI(s,o,u,c,h,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=b),null!==g&&(v?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(s,o,u,c,h),function Sp(){return Xt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=h;const v=function Vl(){const s=Xt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return $i(g,!0),g}function bc(s,o,u,c){if(0===u)return-1;const h=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function $g(s,o,u){$l(o);try{const c=s.viewQuery;null!==c&&yv(1,c,u);const h=s.template;null!==h&&jg(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&HI(s,o),s.staticViewQueries&&yv(2,s.viewQuery,u);const g=s.components;null!==g&&function qS(s,o){for(let u=0;u<o.length;u++)_v(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Da()}}function uv(s,o,u,c){const h=o[2];if(128!=(128&h)){$l(o);try{bu(o),function Su(s){return Xt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&jg(s,o,u,2,c);const v=3==(3&h);if(v){const D=s.preOrderCheckHooks;null!==D&&Hl(o,D,null)}else{const D=s.preOrderHooks;null!==D&&zo(o,D,0,null),$d(o,0)}if(function rA(s){for(let o=vg(s);null!==o;o=Eg(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],g=h[3];0==(512&h[2])&&Tu(g,1),h[2]|=512}}}(o),function Fh(s){for(let o=vg(s);null!==o;o=Eg(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];ho(c)&&uv(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&HI(s,o),v){const D=s.contentCheckHooks;null!==D&&Hl(o,D)}else{const D=s.contentHooks;null!==D&&zo(o,D,1),$d(o,1)}!function GS(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)$s(~h);else{const g=h,v=u[++c],w=u[++c];Ap(v,g),w(2,o[g])}}}finally{$s(-1)}}(s,o);const w=s.components;null!==w&&function WI(s,o){for(let u=0;u<o.length;u++)gv(s,o[u])}(o,w);const b=s.viewQuery;if(null!==b&&yv(2,b,c),v){const D=s.viewCheckHooks;null!==D&&Hl(o,D)}else{const D=s.viewHooks;null!==D&&zo(o,D,2),$d(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Tu(o[3],-1))}finally{Da()}}}function jg(s,o,u,c,h){const g=or(),v=2&c;try{$s(-1),v&&o.length>22&&EI(s,o,22,!1),u(c,h)}finally{$s(g)}}function Hg(s,o,u){!Du()||(function YI(s,o,u,c){const h=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||qo(u,o),ii(c,o);const v=u.initialInputs;for(let w=h;w<g;w++){const b=s.data[w],D=Ui(b);D&&JI(o,u,b);const R=Hs(o,s,w,u);ii(R,o),null!==v&&pv(0,w-h,R,b,0,v),D&&(Nn(u.index,o)[8]=R)}}(s,o,u,mi(u,o)),128==(128&u.flags)&&function QI(s,o,u){const c=u.directiveStart,h=u.directiveEnd,g=u.index,v=function y0(){return Xt.lFrame.currentDirectiveIndex}();try{$s(g);for(let w=c;w<h;w++){const b=s.data[w],D=o[w];Bl(w),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&zg(b,D)}}finally{$s(-1),Bl(v)}}(s,o,u))}function kh(s,o,u=mi){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],w=-1===v?u(o,s):s[v];s[h++]=w}}}function qI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=KI(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function KI(s,o,u,c,h,g,v,w,b,D){const R=22+c,V=R+h,q=function KS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:on);return u}(R,V),se="function"==typeof D?D():D;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:w,declTNode:o,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:se,incompleteFirstPass:!1}}function cv(s,o,u,c){const h=rC(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&iC(s).push(c,h.length-1))}function si(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function ZS(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,v=[];let w=null,b=null;for(let D=o.directiveStart;D<c;D++){const R=h[D],V=R.inputs,q=null===g||gI(o)?null:tA(V,g);v.push(q),w=si(V,D,w),b=si(R.outputs,D,b)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=b}function QS(s,o){const u=Nn(o,s);16&u[2]||(u[2]|=32)}function dv(s,o,u,c){let h=!1;if(Du()){const g=function JS(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];AS(u,v.selectors,!1)&&(h||(h=[]),Pu(qo(u,o),s,v.type),Ui(v)?(Oh(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===c?null:{"":-1};if(null!==g){h=!0,fv(u,s.data.length,g.length);for(let R=0;R<g.length;R++){const V=g[R];V.providersResolver&&V.providersResolver(V)}let w=!1,b=!1,D=bc(s,o,g.length,null);for(let R=0;R<g.length;R++){const V=g[R];u.mergedAttrs=xu(u.mergedAttrs,V.hostAttrs),XI(s,u,o,D,V),Vk(D,V,v),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const q=V.type.prototype;!w&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),w=!0),!b&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),D++}ZS(s,u)}v&&function eA(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=u[o[h+1]];if(null==g)throw new Te(-301,!1);c.push(o[h],g)}}}(u,c,v)}return u.mergedAttrs=xu(u.mergedAttrs,u.attrs),h}function hv(s,o,u,c,h,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const b=~o.index;(function XS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(w)!=b&&w.push(b),w.push(c,h,v)}}function zg(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Oh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Vk(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ui(o)&&(u[""]=s)}}function fv(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function XI(s,o,u,c,h){s.data[c]=h;const g=h.factory||(h.factory=ti(h.type)),v=new ji(g,Ui(h),$a);s.blueprint[c]=v,u[c]=v,hv(s,o,0,c,bc(s,u,h.hostVars,on),h)}function JI(s,o,u){const c=mi(o,s),h=qI(u),g=s[10],v=qg(s,Ph(s,h,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=v}function Mo(s,o,u,c,h,g){const v=mi(s,o);!function Gg(s,o,u,c,h,g,v){if(null==g)s.removeAttribute(o,h,u);else{const w=null==v?Ee(g):v(g,c||"",h);s.setAttribute(o,h,w,u)}}(o[11],v,g,s.value,u,c,h)}function pv(s,o,u,c,h,g){const v=g[o];if(null!==v){const w=c.setInput;for(let b=0;b<v.length;){const D=v[b++],R=v[b++],V=v[b++];null!==w?c.setInput(u,V,D,R):u[R]=V}}}function tA(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function eC(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function gv(s,o){const u=Nn(o,s);if(ho(u)){const c=u[1];48&u[2]?uv(c,u,c.template,u[8]):u[5]>0&&mv(u)}}function mv(s){for(let c=vg(s);null!==c;c=Eg(c))for(let h=10;h<c.length;h++){const g=c[h];if(ho(g))if(512&g[2]){const v=g[1];uv(v,g,v.template,g[8])}else g[5]>0&&mv(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=Nn(u[c],s);ho(h)&&h[5]>0&&mv(h)}}function _v(s,o){const u=Nn(o,s),c=u[1];(function tC(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),$g(c,u,u[8])}function qg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Tc(s){for(;s;){s[2]|=32;const o=gc(s);if(Ea(s)&&!o)return s;s=o}return null}function Kg(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{uv(s,o,s.template,u)}catch(v){throw c&&sC(o,v),v}finally{h.end&&h.end()}}function yv(s,o,u){Ld(0),o(s,u)}function rC(s){return s[7]||(s[7]=[])}function iC(s){return s.cleanup||(s.cleanup=[])}function sC(s,o){const u=s[9],c=u?u.get(wh,null):null;c&&c.handleError(o)}function oC(s,o,u,c,h){for(let g=0;g<u.length;){const v=u[g++],w=u[g++],b=o[v],D=s.data[v];null!==D.setInput?D.setInput(b,h,c,w):b[w]=h}}function Zg(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?h=me(h,w):2==g&&(c=me(c,w+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Lh(s,o,u,c,h=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(gr(g)),hi(g))for(let w=10;w<g.length;w++){const b=g[w],D=b[1].firstChild;null!==D&&Lh(b[1],b,D,c)}const v=u.type;if(8&v)Lh(s,o,u.child,c);else if(32&v){const w=Uy(u,o);let b;for(;b=w();)c.push(b)}else if(16&v){const w=qy(o,u);if(Array.isArray(w))c.push(...w);else{const b=gc(o[16]);Lh(b[1],b,w,c,!0)}}u=h?u.projectionNext:u.next}return c}class Dc{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Lh(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(hi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Hy(o,c),ni(u,c))}this._attachedToViewContainer=!1}bh(this._lView[1],this._lView)}onDestroy(o){cv(this._lView[1],this._lView,null,o)}markForCheck(){Tc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Kg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iI(s,o){Qu(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=o}}class sl extends Dc{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Kg(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Ev extends Zu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=S(o);return new Vh(u,this.ngModule)}}function wv(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class aC{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,Sy,c);return h!==Sy||u===Sy?h:this.parentInjector.get(o,u,c)}}class Vh extends Ty{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function RS(s){return s.map(yI).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return wv(this.componentDef.inputs)}get outputs(){return wv(this.componentDef.outputs)}create(o,u,c,h){let g=(h=h||this.ngModule)instanceof To?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new aC(o,g):o,w=v.get(JD,null);if(null===w)throw new Te(407,!1);const b=v.get(Dy,null),D=w.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",V=c?function lv(s,o,u){return s.selectRootElement(o,u===nt.ShadowDom)}(D,c,this.componentDef.encapsulation):wg(w.createRenderer(null,this.componentDef),R,function sA(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),q=this.componentDef.onPush?288:272,se=KI(0,null,null,1,0,null,null,null,null,null),De=Ph(null,se,null,q,null,null,w,D,b,v,null);let Ye,st;$l(De);try{const It=function cC(s,o,u,c,h,g){const v=u[1];u[22]=s;const b=Cc(v,22,2,"#host",null),D=b.mergedAttrs=o.hostAttrs;null!==D&&(Zg(b,D,!0),null!==s&&(js(h,s,D),null!==b.classes&&Dh(h,s,b.classes),null!==b.styles&&Xu(h,s,b.styles)));const R=c.createRenderer(s,o),V=Ph(u,qI(o),null,o.onPush?32:16,u[22],b,c,R,g||null,null,null);return v.firstCreatePass&&(Pu(qo(b,u),v,o.type),Oh(v,b),fv(b,u.length,1)),qg(u,V),u[22]=V}(V,this.componentDef,De,w,D);if(V)if(c)js(D,V,["ng-version",H0.full]);else{const{attrs:St,classes:Ve}=function xS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&u.push(g);else{if(!bs(h))break;h=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);St&&js(D,V,St),Ve&&Ve.length>0&&Dh(D,V,Ve.join(" "))}if(st=Cu(se,22),void 0!==u){const St=st.projection=[];for(let Ve=0;Ve<this.ngContentSelectors.length;Ve++){const Ht=u[Ve];St.push(null!=Ht?Array.from(Ht):null)}}Ye=function aA(s,o,u,c){const h=u[1],g=function Lk(s,o,u){const c=Br();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),XI(s,c,o,bc(s,o,1,null),u),ZS(s,c));const h=Hs(o,s,c.directiveStart,c);ii(h,o);const g=mi(c,o);return g&&ii(g,o),h}(h,u,o);if(s[8]=u[8]=g,null!==c)for(const w of c)w(g,o);if(o.contentQueries){const w=Br();o.contentQueries(1,g,w.directiveStart)}const v=Br();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||($s(v.index),hv(u[1],v,0,v.directiveStart,v.directiveEnd,o),zg(o,g)),g}(It,this.componentDef,De,[dC]),$g(se,De,null)}finally{Da()}return new lC(this.componentType,Ye,cc(st,De),De,st)}}class lC extends class V0{}{constructor(o,u,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new sl(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const g=this._rootLView;oC(g[1],g,h,o,u),QS(g,this._tNode.index)}}get injector(){return new Fu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function dC(){const s=Br();Mu(Ue()[1],s)}function Yg(s){let o=function hC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(Ui(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Te(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const v=s;v.inputs=Qg(s.inputs),v.declaredInputs=Qg(s.declaredInputs),v.outputs=Qg(s.outputs);const w=h.hostBindings;w&&jk(s,w);const b=h.viewQuery,D=h.contentQueries;if(b&&Bk(s,b),D&&$k(s,D),ue(s.inputs,h.inputs),ue(s.declaredInputs,h.declaredInputs),ue(s.outputs,h.outputs),Ui(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Yg&&(u=!1)}}o=Object.getPrototypeOf(o)}!function uA(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=xu(h.hostAttrs,u=xu(u,h.hostAttrs))}}(c)}function Qg(s){return s===Yn?{}:s===wt?[]:s}function Bk(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function $k(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,g)=>{o(c,h,g),u(c,h,g)}:o}function jk(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Uh=null;function Sc(){if(!Uh){const s=mt.Symbol;if(s&&s.iterator)Uh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Uh=c)}}}return Uh}function Ac(s){return!!gC(s)&&(Array.isArray(s)||!(s instanceof Map)&&Sc()in s)}function gC(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ir(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Bh(s,o,u,c){const h=Ue();return ir(h,Au(),o)&&(_n(),Mo(ar(),h,s,o,u,c)),Bh}function pA(s,o,u,c,h,g,v,w){const b=Ue(),D=_n(),R=s+22,V=D.firstCreatePass?function Wh(s,o,u,c,h,g,v,w,b){const D=o.consts,R=Cc(o,s,4,v||null,gs(D,w));dv(o,u,R,gs(D,b)),Mu(o,R);const V=R.tViews=KI(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,D,b,o,u,c,h,g,v):D.data[R];$i(V,!1);const q=b[11].createComment("");Tg(D,b,q,V),ii(q,b),qg(b,b[R]=eC(q,b,q,V)),Us(V)&&Hg(D,b,V),null!=v&&kh(b,V,w)}function Dv(s,o,u){const c=Ue();return ir(c,Au(),o)&&function zi(s,o,u,c,h,g,v,w){const b=mi(o,u);let R,D=o.inputs;!w&&null!=D&&(R=D[c])?(oC(s,u,R,c,h),Ji(o)&&QS(u,o.index)):3&o.type&&(c=function YS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,g.setProperty(b,c,h))}(_n(),ar(),c,s,o,c[11],u,!1),Dv}function mC(s,o,u,c,h){const v=h?"class":"style";oC(s,u,o.inputs[v],v,c)}function Xg(s,o,u,c){const h=Ue(),g=_n(),v=22+s,w=h[11],b=h[v]=wg(w,o,function Bd(){return Xt.lFrame.currentNamespace}()),D=g.firstCreatePass?function Gk(s,o,u,c,h,g,v){const w=o.consts,D=Cc(o,s,2,h,gs(w,g));return dv(o,u,D,gs(w,v)),null!==D.attrs&&Zg(D,D.attrs,!1),null!==D.mergedAttrs&&Zg(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(v,g,h,0,o,u,c):g.data[v];$i(D,!0);const R=D.mergedAttrs;null!==R&&js(w,b,R);const V=D.classes;null!==V&&Dh(w,b,V);const q=D.styles;return null!==q&&Xu(w,b,q),64!=(64&D.flags)&&Tg(g,h,b,D),0===function Md(){return Xt.lFrame.elementDepthCount}()&&ii(b,h),function z_(){Xt.lFrame.elementDepthCount++}(),Us(D)&&(Hg(g,h,D),function GI(s,o,u){if(Vs(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,D,h)),null!==c&&kh(h,D),Xg}function Sv(){let s=Br();Pd()?function Ul(){Xt.lFrame.isParent=!1}():(s=s.parent,$i(s,!1));const o=s;!function Rd(){Xt.lFrame.elementDepthCount--}();const u=_n();return u.firstCreatePass&&(Mu(u,s),Vs(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Wl(s){return 0!=(16&s.flags)}(o)&&mC(u,o,Ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zl(s){return 0!=(32&s.flags)}(o)&&mC(u,o,Ue(),o.stylesWithoutHost,!1),Sv}function _C(s,o,u,c){return Xg(s,o,u,c),Sv(),_C}function EC(s){return!!s&&"function"==typeof s.then}function _A(s){return!!s&&"function"==typeof s.subscribe}const yA=_A;function wC(s,o,u,c){const h=Ue(),g=_n(),v=Br();return function EA(s,o,u,c,h,g,v,w){const b=Us(c),R=s.firstCreatePass&&iC(s),V=o[8],q=rC(o);let se=!0;if(3&c.type||w){const st=mi(c,o),It=w?w(st):st,St=q.length,Ve=w?kn=>w(gr(kn[c.index])):c.index;let Ht=null;if(!w&&b&&(Ht=function Zk(s,o,u,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===u&&h[g+1]===c){const w=o[7],b=h[g+2];return w.length>b?w[b]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,c.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=g,Ht.__ngLastListenerFn__=g,se=!1;else{g=IA(c,o,V,g,!1);const kn=u.listen(It,h,g);q.push(g,kn),R&&R.push(h,Ve,St,St+1)}}else g=IA(c,o,V,g,!1);const De=c.outputs;let Ye;if(se&&null!==De&&(Ye=De[h])){const st=Ye.length;if(st)for(let It=0;It<st;It+=2){const sr=o[Ye[It]][Ye[It+1]].subscribe(g),pa=q.length;q.push(g,sr),R&&R.push(h,c.index,pa,-(pa+1))}}}(g,h,h[11],v,s,o,0,c),wC}function wA(s,o,u,c){try{return!1!==u(c)}catch(h){return sC(s,h),!1}}function IA(s,o,u,c,h){return function g(v){if(v===Function)return c;Tc(2&s.flags?Nn(s.index,o):o);let b=wA(o,0,c,v),D=g.__ngNextListenerFn__;for(;D;)b=wA(o,0,D,v)&&b,D=D.__ngNextListenerFn__;return h&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function NA(s,o,u,c,h){const g=s[u+1],v=null===o;let w=c?Ts(g):Ha(g),b=!1;for(;0!==w&&(!1===b||v);){const R=s[w+1];nO(s[w],o)&&(b=!0,s[w+1]=c?Rh(R):Ng(R)),w=c?Ts(R):Ha(R)}b&&(s[u+1]=c?Ng(g):Rh(g))}function nO(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&mo(s,o)>=0}function CC(s,o){return function As(s,o,u,c){const h=Ue(),g=_n(),v=function fo(s){const o=Xt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function Zr(s,o,u,c){const h=s.data;if(null===h[u+1]){const g=h[or()],v=function bC(s,o){return o>=s.expandoStartIndex}(s,u);(function Rv(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function Ms(s,o,u,c){const h=function Od(s){const o=Xt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Gh(u=Mv(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(u=Mv(h,s,o,u,c),null===g){let b=function Jg(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Ha(c))return s[Ts(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=Mv(null,s,o,b[1],c),b=Gh(b,o.attrs,c),function Av(s,o,u,c){s[Ts(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else g=function BA(s,o,u){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=Gh(c,s[g].hostAttrs,u);return Gh(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(h,g,o,c),function eO(s,o,u,c,h,g){let v=g?o.classBindings:o.styleBindings,w=Ts(v),b=Ha(v);s[c]=u;let R,D=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||mo(V,R)>0)&&(D=!0)}else R=u;if(h)if(0!==b){const q=Ts(s[w+1]);s[c+1]=Mh(q,w),0!==q&&(s[q+1]=kI(s[q+1],c)),s[w+1]=function ja(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=Mh(w,0),0!==w&&(s[w+1]=kI(s[w+1],c)),w=c;else s[c+1]=Mh(b,0),0===w?w=c:s[b+1]=kI(s[b+1],c),b=c;D&&(s[c+1]=Ng(s[c+1])),NA(s,R,c,!0),NA(s,R,c,!1),function tO(s,o,u,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&mo(g,o)>=0&&(u[c+1]=Rh(u[c+1]))}(o,R,s,c,g),v=Mh(w,b),g?o.classBindings=v:o.styleBindings=v}(h,g,o,u,v,c)}}(g,s,v,c),o!==on&&ir(h,v,o)&&function SC(s,o,u,c,h,g,v,w){if(!(3&o.type))return;const b=s.data,D=b[w+1];ai(function Pg(s){return 1==(1&s)}(D)?AC(b,o,u,h,Ha(D),v):void 0)||(ai(g)||function vi(s){return 2==(2&s)}(D)&&(g=AC(b,null,u,h,w,v)),function pI(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Do.DashCase;null==h?s.removeStyle(u,c,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Do.Important),s.setStyle(u,c,h,g))}}(c,v,function Iu(s,o){return gr(o[s])}(or(),u),h,g))}(g,g.data[or()],h,h[11],s,h[v+1]=function em(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(ws(s)))),s}(o,u),c,v)}(s,o,null,!0),CC}function Mv(s,o,u,c,h){let g=null;const v=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<v&&(g=o[w],c=Gh(c,g.hostAttrs,h),g!==s);)w++;return null!==s&&(u.directiveStylingLast=w),c}function Gh(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Tt(s,v,!!u||o[++g]))}return void 0===s?null:s}function AC(s,o,u,c,h,g){const v=null===o;let w;for(;h>0;){const b=s[h],D=Array.isArray(b),R=D?b[1]:b,V=null===R;let q=u[h+1];q===on&&(q=V?wt:void 0);let se=V?Xd(q,c):R===c?q:void 0;if(D&&!ai(se)&&(se=Xd(b,c)),ai(se)&&(w=se,v))return w;const De=s[h+1];h=v?Ts(De):Ha(De)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(w=Xd(b,c))}return w}function ai(s){return void 0!==s}function tm(s,o=""){const u=Ue(),c=_n(),h=s+22,g=c.firstCreatePass?Cc(c,h,1,o,null):c.data[h],v=u[h]=function $y(s,o){return s.createText(o)}(u[11],o);Tg(c,u,v,g),$i(g,!1)}const qa=void 0;var HC=["en",[["a","p"],["AM","PM"],qa],[["AM","PM"],qa,qa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qa,"{1} 'at' {0}",qa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Fc(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Lc={};function Uv(s){const o=function KA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=zC(o);if(u)return u;const c=o.split("-")[0];if(u=zC(c),u)return u;if("en"===c)return HC;throw new Te(701,!1)}function WC(s){return Uv(s)[zt.PluralCase]}function zC(s){return s in Lc||(Lc[s]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[s]),Lc[s]}var zt=(()=>((zt=zt||{})[zt.LocaleId=0]="LocaleId",zt[zt.DayPeriodsFormat=1]="DayPeriodsFormat",zt[zt.DayPeriodsStandalone=2]="DayPeriodsStandalone",zt[zt.DaysFormat=3]="DaysFormat",zt[zt.DaysStandalone=4]="DaysStandalone",zt[zt.MonthsFormat=5]="MonthsFormat",zt[zt.MonthsStandalone=6]="MonthsStandalone",zt[zt.Eras=7]="Eras",zt[zt.FirstDayOfWeek=8]="FirstDayOfWeek",zt[zt.WeekendRange=9]="WeekendRange",zt[zt.DateFormat=10]="DateFormat",zt[zt.TimeFormat=11]="TimeFormat",zt[zt.DateTimeFormat=12]="DateTimeFormat",zt[zt.NumberSymbols=13]="NumberSymbols",zt[zt.NumberFormats=14]="NumberFormats",zt[zt.CurrencyCode=15]="CurrencyCode",zt[zt.CurrencySymbol=16]="CurrencySymbol",zt[zt.CurrencyName=17]="CurrencyName",zt[zt.Currencies=18]="Currencies",zt[zt.Directionality=19]="Directionality",zt[zt.PluralCase=20]="PluralCase",zt[zt.ExtraData=21]="ExtraData",zt))();const ol="en-US";let $v=ol;function nf(s,o,u,c,h){if(s=Z(s),Array.isArray(s))for(let g=0;g<s.length;g++)nf(s[g],o,u,c,h);else{const g=_n(),v=Ue();let w=Is(s)?s:Z(s.provide),b=ag(s);const D=Br(),R=1048575&D.providerIndexes,V=D.directiveStart,q=D.providerIndexes>>20;if(Is(s)||!s.multi){const se=new ji(b,h,$a),De=Em(w,o,h?R:R+q,V);-1===De?(Pu(qo(D,v),g,w),vm(g,s,o.length),o.push(w),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(se),v.push(se)):(u[De]=se,v[De]=se)}else{const se=Em(w,o,R+q,V),De=Em(w,o,R,R+q),Ye=se>=0&&u[se],st=De>=0&&u[De];if(h&&!st||!h&&!Ye){Pu(qo(D,v),g,w);const It=function nE(s,o,u,c,h){const g=new ji(s,u,$a);return g.multi=[],g.index=o,g.componentProviders=0,eE(g,h,c&&!u),g}(h?tE:wm,u.length,h,c,b);!h&&st&&(u[De].providerFactory=It),vm(g,s,o.length,0),o.push(w),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(It),v.push(It)}else vm(g,s,se>-1?se:De,eE(u[h?De:se],b,!h&&c));!h&&c&&st&&u[De].componentProviders++}}}function vm(s,o,u,c){const h=Is(o),g=function F0(s){return!!s.useClass}(o);if(h||g){const b=(g?Z(o.useClass):o).prototype.ngOnDestroy;if(b){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=D.indexOf(u);-1===R?D.push(u,[c,b]):D[R+1].push(c,b)}else D.push(u,b)}}}function eE(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Em(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function wm(s,o,u,c){return rf(this.multi,[])}function tE(s,o,u,c){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Hs(u,u[1],this.providerFactory.index,c);g=w.slice(0,v),rf(h,g);for(let b=v;b<w.length;b++)g.push(w[b])}else g=[],rf(h,g);return g}function rf(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Im(s,o=[]){return u=>{u.providersResolver=(c,h)=>function ym(s,o,u){const c=_n();if(c.firstCreatePass){const h=Ui(s);nf(u,c.data,c.blueprint,h,!0),nf(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class ll{}class rE{}function gM(s,o){return new iE(s,o??null)}class iE extends ll{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ev(this);const c=Le(o);this._bootstrapComponents=sa(c.bootstrap),this._r3Injector=II(o,u,[{provide:ll,useValue:this},{provide:Zu,useValue:this.componentFactoryResolver}],de(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class sf extends rE{constructor(o){super(),this.moduleType=o}create(o){return new iE(this.moduleType,o)}}class ab extends ll{constructor(o,u,c){super(),this.componentFactoryResolver=new Ev(this),this.instance=null;const h=new Iy([...o,{provide:ll,useValue:this},{provide:Zu,useValue:this.componentFactoryResolver}],u||og(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function sE(s,o,u=null){return new ab(s,o,u).injector}let oE=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=k0(0,u.type),h=c.length>0?sE([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Dt({token:s,providedIn:"environment",factory:()=>new s(nr(To))}),s})();function Cm(s){s.getStandaloneInjector=o=>o.get(oE).getOrCreateStandaloneInjector(s)}function Mm(s){return o=>{setTimeout(s,void 0,o)}}const Gi=class vb extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,g=u||(()=>null),v=c;if(o&&"object"==typeof o){const b=o;h=b.next?.bind(b),g=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(g=Mm(g),h&&(h=Mm(h)),v&&(v=Mm(v)));const w=super.subscribe({next:h,error:g,complete:v});return o instanceof B.w0&&o.add(w),w}};function dE(){return this._results[Sc()]()}class ff{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Sc(),c=ff.prototype;c[u]||(c[u]=dE)}get changes(){return this._changes||(this._changes=new Gi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=er(o);(this._changesDetected=!function ys(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(u&&(h=u(h),g=u(g)),g!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dl=(()=>{class s{}return s.__NG_ELEMENT_ID__=Eb,s})();const Rm=dl,pf=class extends Rm{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=Ph(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(c)),$g(c,h,o),new Dc(h)}};function Eb(){return xm(Br(),Ue())}function xm(s,o){return 4&s.type?new pf(o,s,cc(s,o)):null}let Hc=(()=>{class s{}return s.__NG_ELEMENT_ID__=Nm,s})();function Nm(){return wb(Br(),Ue())}const hE=Hc,fE=class extends hE{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return cc(this._hostTNode,this._hostLView)}get injector(){return new Fu(this._hostTNode,this._hostLView)}get parentInjector(){const o=Nu(this._hostTNode,this._hostLView);if(iy(o)){const u=po(o,this._hostLView),c=Go(o);return new Fu(u[1].data[c+8],u)}return new Fu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=pE(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,g;"number"==typeof c?h=c:null!=c&&(h=c.index,g=c.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,h),v}createComponent(o,u,c,h,g){const v=o&&!function _s(s){return"function"==typeof s}(o);let w;if(v)w=u;else{const V=u||{};w=V.index,c=V.injector,h=V.projectableNodes,g=V.environmentInjector||V.ngModuleRef}const b=v?o:new Vh(S(o)),D=c||this.parentInjector;if(!g&&null==b.ngModule){const q=(v?D:this.parentInjector).get(To,null);q&&(g=q)}const R=b.create(D,h,void 0,g);return this.insert(R.hostView,w),R}insert(o,u){const c=o._lView,h=c[1];if(function W_(s){return hi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const V=c[3],q=new fE(V,V[6],V[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function vS(s,o,u,c){const h=10+c,g=u.length;c>0&&(u[h-1][4]=o),c<g-10?(o[4]=u[h],Yo(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function ES(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=64}(h,c,v,g);const w=hI(g,v),b=c[11],D=Cg(b,v[7]);return null!==D&&function rI(s,o,u,c,h,g){c[0]=h,c[6]=o,Qu(s,c,u,1,h,g)}(h,v[6],b,c,D,w),o.attachToViewContainerRef(),Yo(Pm(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=pE(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Hy(this._lContainer,u);c&&(ni(Pm(this._lContainer),u),bh(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Hy(this._lContainer,u);return c&&null!=ni(Pm(this._lContainer),u)?new Dc(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function pE(s){return s[8]}function Pm(s){return s[8]||(s[8]=[])}function wb(s,o){let u;const c=o[s.index];if(hi(c))u=c;else{let h;if(8&s.type)h=gr(c);else{const g=o[11];h=g.createComment("");const v=mi(s,o);So(g,Cg(g,v),h,function cI(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=eC(c,o,h,s),qg(o,u)}return new fE(u,s,o)}class hl{constructor(o){this.queryList=o,this.matches=null}clone(){return new hl(this.queryList)}setDirty(){this.queryList.setDirty()}}class aa{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new aa(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Ab(o,u).matches&&this.queries[u].setDirty()}}class km{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class mE{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new mE(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class _E{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new _E(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,u,Cb(u,g)),this.matchTNodeWithReadOption(o,u,Ou(u,o,g,!1,!1))}else c===dl?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ou(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Va||h===Hc||h===dl&&4&u.type)this.addMatch(u.index,-2);else{const g=Ou(u,o,h,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Cb(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function SM(s,o,u,c){return-1===u?function bb(s,o){return 11&s.type?cc(s,o):4&s.type?xm(s,o):null}(o,s):-2===u?function fl(s,o,u){return u===Va?cc(o,s):u===dl?xm(o,s):u===Hc?wb(o,s):void 0}(s,o,c):Hs(s,s[1],u,o)}function No(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,v=u.matches,w=[];for(let b=0;b<v.length;b+=2){const D=v[b];w.push(D<0?null:SM(o,g[D],v[b+1],u.metadata.read))}h.matches=w}return h.matches}function Wc(s,o,u,c){const h=s.queries.getByIndex(u),g=h.matches;if(null!==g){const v=No(s,o,h,u);for(let w=0;w<g.length;w+=2){const b=g[w];if(b>0)c.push(v[w/2]);else{const D=g[w+1],R=o[-b];for(let V=10;V<R.length;V++){const q=R[V];q[17]===q[3]&&Wc(q[1],q,D,c)}if(null!==R[9]){const V=R[9];for(let q=0;q<V.length;q++){const se=V[q];Wc(se[1],se,D,c)}}}}}return c}function mf(s){const o=Ue(),u=_n(),c=Fd();Ld(c+1);const h=Ab(u,c);if(s.dirty&&function H_(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Wc(u,o,c,[]):No(u,o,h,c);s.reset(g,$0),s.notifyOnChanges()}return!0}return!1}function lr(s,o,u,c){const h=_n();if(h.firstCreatePass){const g=Br();(function Db(s,o,u){null===s.queries&&(s.queries=new mE),s.queries.track(new _E(o,u))})(h,new km(o,u,c),g.index),function Sb(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function zc(s,o,u){const c=new ff(4==(4&u));cv(s,o,c,c.destroy),null===o[19]&&(o[19]=new aa),o[19].queries.push(new hl(c))}(h,Ue(),u)}function _f(){return function yf(s,o){return s[19].queries[o].queryList}(Ue(),Fd())}function Ab(s,o){return s.queries.getByIndex(o)}function Df(...s){}const NE=new Qn("Application Initializer");let Sf=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Df,this.reject=Df,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(EC(g))u.push(g);else if(yA(g)){const v=new Promise((w,b)=>{g.subscribe({complete:w,error:b})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(nr(NE,8))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const PE=new Qn("AppId",{providedIn:"root",factory:function kE(){return`${Fi()}${Fi()}${Fi()}`}});function Fi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FE=new Qn("Platform Initializer"),Fb=new Qn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ml=new Qn("appBootstrapListener"),$M=new Qn("AnimationModuleType");let LE=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const jm=new Qn("LocaleId",{providedIn:"root",factory:()=>_i(jm,K.Optional|K.SkipSelf)||function jM(){return typeof $localize<"u"&&$localize.locale||ol}()}),Lb=new Qn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Vb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let ci=(()=>{class s{compileModuleSync(u){return new sf(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=sa(Le(u).declarations).reduce((v,w)=>{const b=S(w);return b&&v.push(new Vh(b)),v},[]);return new Vb(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const BE=(()=>Promise.resolve(0))();function yt(s){typeof Zone>"u"?BE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Rs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gi(!1),this.onMicrotaskEmpty=new Gi(!1),this.onStable=new Gi(!1),this.onError=new Gi(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Kt(){let s=mt.requestAnimationFrame,o=mt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Qr(s){const o=()=>{!function je(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(mt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Hm(s),s.isCheckStableRunning=!0,_e(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Hm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,g,v,w)=>{try{return Bb(s),u.invokeTask(h,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),$b(s)}},onInvoke:(u,c,h,g,v,w,b)=>{try{return Bb(s),u.invoke(h,g,v,w,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),$b(s)}},onHasTask:(u,c,h,g)=>{u.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Hm(s),_e(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,h,g)=>(u.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rs.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(Rs.isInAngularZone())throw new Te(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,ht,Df,Df);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const ht={};function _e(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Hm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Bb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function $b(s){s._nesting--,_e(s)}class HM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gi,this.onMicrotaskEmpty=new Gi,this.onStable=new Gi,this.onError=new Gi}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const jb=new Qn(""),Hb=new Qn("");let $E,Wb=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$E||(function MO(s){$E=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rs.assertNotInAngularZone(),yt(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yt(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(nr(Rs),nr(zb),nr(Hb))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac}),s})(),zb=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return $E?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),la=null;const tn=new Qn("AllowMultipleToken"),eu=new Qn("PlatformDestroyListeners");class Sn{constructor(o,u){this.name=o,this.token=u}}function Wm(s,o,u=[]){const c=`Platform: ${o}`,h=new Qn(c);return(g=[])=>{let v=WE();if(!v||v.injector.get(tn,!1)){const w=[...u,...g,{provide:h,useValue:!0}];s?s(w):function WM(s){if(la&&!la.get(tn,!1))throw new Te(400,!1);la=s;const o=s.get(Qc);(function ut(s){const o=s.get(FE,null);o&&o.forEach(u=>u())})(s)}(function Gb(s=[],o){return el.create({name:o,providers:[{provide:rg,useValue:"platform"},{provide:eu,useValue:new Set([()=>la=null])},...s]})}(w,c))}return function yl(s){const o=WE();if(!o)throw new Te(401,!1);return o}()}}function WE(){return la?.get(Qc)??null}let Qc=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function GE(s,o){let u;return u="noop"===s?new HM:("zone.js"===s?void 0:s)||new Rs(o),u}(c?.ngZone,function zE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Rs,useValue:h}];return h.run(()=>{const v=el.create({providers:g,parent:this.injector,name:u.moduleType.name}),w=u.create(v),b=w.injector.get(wh,null);if(!b)throw new Te(402,!1);return h.runOutsideAngular(()=>{const D=h.onError.subscribe({next:R=>{b.handleError(R)}});w.onDestroy(()=>{Rf(this._modules,w),D.unsubscribe()})}),function qi(s,o,u){try{const c=u();return EC(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,h,()=>{const D=w.injector.get(Sf);return D.runInitializers(),D.donePromise.then(()=>(function jv(s){Ft(s,"Expected localeId to be defined"),"string"==typeof s&&($v=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(jm,ol)||ol),this._moduleDoBootstrap(w),w))})})}bootstrapModule(u,c=[]){const h=zm({},c);return function yr(s,o,u){const c=new sf(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(u){const c=u.injector.get(Mf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(eu,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(nr(el))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function zm(s,o){return Array.isArray(o)?o.reduce(zm,s):{...s,...o}}let Mf=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new L.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),v=new L.y(w=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Rs.assertNotInAngularZone(),yt(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{Rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{b.unsubscribe(),D.unsubscribe()}});this.isStable=(0,ee.T)(g,v.pipe((0,Ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof Ty;if(!this._injector.get(Sf).done)throw!h&&fe(u),new Te(405,false);let v;v=h?u:this._injector.get(Zu).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const w=function Af(s){return s.isBoundToModule}(v)?void 0:this._injector.get(ll),D=v.create(el.NULL,[],c||v.selector,w),R=D.location.nativeElement,V=D.injector.get(jb,null);return V?.registerApplication(R),D.onDestroy(()=>{this.detachView(D.hostView),Rf(this.components,D),V?.unregisterApplication(R)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Rf(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ml,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Rf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(nr(Rs),nr(To),nr(wh))},s.\u0275prov=Dt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Rf(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let pe=!0,xf=!1;function Js(){return xf=!0,pe}function zM(){if(xf)throw new Error("Cannot enable prod mode after platform setup.");pe=!1}let El=(()=>{class s{}return s.__NG_ELEMENT_ID__=Kb,s})();function Kb(s){return function KE(s,o,u){if(Ji(s)&&!u){const c=Nn(s.index,o);return new Dc(c,c)}return 47&s.type?new Dc(o[16],o):null}(Br(),Ue(),16==(16&s))}class Qb{constructor(){}supports(o){return Ac(o)}create(o){return new Nf(o)}}const nu=(s,o)=>o;class Nf{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||nu}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<kf(c,h,g)?u:c,w=kf(v,h,g),b=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{g||(g=[]);const D=w-h,R=b-h;if(D!=R){for(let q=0;q<D;q++){const se=q<g.length?g[q]:g[q]=0,De=se+q;R<=De&&De<D&&(g[q]=se+1)}g[v.previousIndex]=R-D}}w!==b&&o(v,w,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Ac(o))throw new Te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,w)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,w),c=!0),u=u._next}else h=0,function Wk(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Sc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,w=>{v=this._trackByFn(h,w),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,w,v,h)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,h)):o=this._addAfter(new Pf(u,c),g,h),o}_verifyReinsertion(o,u,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new da),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new da),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Pf{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class da{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Xb,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kf(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class ru{constructor(){}supports(o){return o instanceof Map||gC(o)}create(){return new Oo}}class Oo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||gC(o)))throw new Te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const c=new Of(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Of{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ha(){return new Zm([new Qb])}let Zm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ha()),deps:[[s,new ta,new _r]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Te(901,!1)}}return s.\u0275prov=Dt({token:s,providedIn:"root",factory:ha}),s})();function Ym(){return new fa([new ru])}let fa=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ym()),deps:[[s,new ta,new _r]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Te(901,!1)}}return s.\u0275prov=Dt({token:s,providedIn:"root",factory:Ym}),s})();const Qm=Wm(null,"core",[]);let Vf=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(nr(Mf))},s.\u0275mod=un({type:s}),s.\u0275inj=At({}),s})();function Jb(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},579:(Et,Re,k)=>{k.d(Re,{EI:()=>Ae,Gb:()=>Jn,Iv:()=>bn,Kz:()=>bt,Xd:()=>Ln,lT:()=>Cn,xP:()=>at});var f=k(5861),B=k(9681),L=k(1877),ee=k(2090),Ie=k(4859);k(2833);const ue="analytics",de="firebase_id",z="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Z="https://www.googletagmanager.com/gtag/js",Ne=new L.Yd("@firebase/analytics");function Pe(P){return Promise.all(P.map(x=>x.catch(S=>S)))}function Te(P,x){const S=document.createElement("script");S.src=`${Z}?l=${P}&id=${x}`,S.async=!0,document.head.appendChild(S)}function Ee(P,x,S,N,H,fe){return he.apply(this,arguments)}function he(){return(he=(0,f.Z)(function*(P,x,S,N,H,fe){const Le=N[H];try{if(Le)yield x[Le];else{const ge=(yield Pe(S)).find(Me=>Me.measurementId===H);ge&&(yield x[ge.appId])}}catch(ze){Ne.error(ze)}P("config",H,fe)})).apply(this,arguments)}function ct(P,x,S,N,H){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,f.Z)(function*(P,x,S,N,H){try{let fe=[];if(H&&H.send_to){let Le=H.send_to;Array.isArray(Le)||(Le=[Le]);const ze=yield Pe(S);for(const ge of Le){const Me=ze.find(ln=>ln.measurementId===ge),_t=Me&&x[Me.appId];if(!_t){fe=[];break}fe.push(_t)}}0===fe.length&&(fe=Object.values(x)),yield Promise.all(fe),P("event",N,H||{})}catch(fe){Ne.error(fe)}})).apply(this,arguments)}function be(P){const x=window.document.getElementsByTagName("script");for(const S of Object.values(x))if(S.src&&S.src.includes(Z)&&S.src.includes(P))return S;return null}const ne=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Q=new class X{constructor(x={},S=1e3){this.throttleMetadata=x,this.intervalMillis=S}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,S){this.throttleMetadata[x]=S}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function le(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function ae(P){return Be.apply(this,arguments)}function Be(){return(Be=(0,f.Z)(function*(P){var x;const{appId:S,apiKey:N}=P,H={method:"GET",headers:le(N)},fe=z.replace("{app-id}",S),Le=yield fetch(fe,H);if(200!==Le.status&&304!==Le.status){let ze="";try{const ge=yield Le.json();null!==(x=ge.error)&&void 0!==x&&x.message&&(ze=ge.error.message)}catch{}throw ne.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:ze})}return Le.json()})).apply(this,arguments)}function $e(P){return pt.apply(this,arguments)}function pt(){return(pt=(0,f.Z)(function*(P,x=Q,S){const{appId:N,apiKey:H,measurementId:fe}=P.options;if(!N)throw ne.create("no-app-id");if(!H){if(fe)return{measurementId:fe,appId:N};throw ne.create("no-api-key")}const Le=x.getThrottleMetadata(N)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new Rn;return setTimeout((0,f.Z)(function*(){ze.abort()}),void 0!==S?S:6e4),nn({appId:N,apiKey:H,measurementId:fe},Le,ze,x)})).apply(this,arguments)}function nn(P,x,S){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(P,{throttleEndTimeMillis:x,backoffCount:S},N,H=Q){var fe,Le;const{appId:ze,measurementId:ge}=P;try{yield Ke(N,x)}catch(Me){if(ge)return Ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${null===(fe=Me)||void 0===fe?void 0:fe.message}]`),{appId:ze,measurementId:ge};throw Me}try{const Me=yield ae(P);return H.deleteThrottleMetadata(ze),Me}catch(Me){const _t=Me;if(!cn(_t)){if(H.deleteThrottleMetadata(ze),ge)return Ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${_t?.message}]`),{appId:ze,measurementId:ge};throw Me}const ln=503===Number(null===(Le=_t?.customData)||void 0===Le?void 0:Le.httpStatus)?(0,ee.$s)(S,H.intervalMillis,30):(0,ee.$s)(S,H.intervalMillis),$t={throttleEndTimeMillis:Date.now()+ln,backoffCount:S+1};return H.setThrottleMetadata(ze,$t),Ne.debug(`Calling attemptFetch again in ${ln} millis`),nn(P,$t,N,H)}})).apply(this,arguments)}function Ke(P,x){return new Promise((S,N)=>{const H=Math.max(x-Date.now(),0),fe=setTimeout(S,H);P.addEventListener(()=>{clearTimeout(fe),N(ne.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function cn(P){if(!(P instanceof ee.ZR&&P.customData))return!1;const x=Number(P.customData.httpStatus);return 429===x||500===x||503===x||504===x}class Rn{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}let pn,Fn;function Vt(){return(Vt=(0,f.Z)(function*(P,x,S,N,H){if(H&&H.global)P("event",S,N);else{const fe=yield x;P("event",S,Object.assign(Object.assign({},N),{send_to:fe}))}})).apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(P,x,S,N){if(N&&N.global)return P("set",{screen_name:S}),Promise.resolve();P("config",yield x,{update:!0,screen_name:S})})).apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(P,x,S,N){if(N&&N.global)return P("set",{user_id:S}),Promise.resolve();P("config",yield x,{update:!0,user_id:S})})).apply(this,arguments)}function Gn(){return(Gn=(0,f.Z)(function*(P,x,S,N){if(N&&N.global){const H={};for(const fe of Object.keys(S))H[`user_properties.${fe}`]=S[fe];return P("set",H),Promise.resolve()}P("config",yield x,{update:!0,user_properties:S})})).apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(P,x){const S=yield P;window[`ga-disable-${S}`]=!x})).apply(this,arguments)}function pr(P){Fn=P}function it(P){pn=P}function K(){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(){var P;if(!(0,ee.hl)())return Ne.warn(ne.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(x){return Ne.warn(ne.create("indexeddb-unavailable",{errorInfo:null===(P=x)||void 0===P?void 0:P.toString()}).message),!1}return!0})).apply(this,arguments)}function rt(){return(rt=(0,f.Z)(function*(P,x,S,N,H,fe,Le){var ze;const ge=$e(P);ge.then(rn=>{S[rn.measurementId]=rn.appId,P.options.measurementId&&rn.measurementId!==P.options.measurementId&&Ne.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${rn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rn=>Ne.error(rn)),x.push(ge);const Me=K().then(rn=>{if(rn)return N.getId()}),[_t,ln]=yield Promise.all([ge,Me]);be(fe)||Te(fe,_t.measurementId),Fn&&(H("consent","default",Fn),pr(void 0)),H("js",new Date);const $t=null!==(ze=Le?.config)&&void 0!==ze?ze:{};return $t.origin="firebase",$t.update=!0,null!=ln&&($t[de]=ln),H("config",_t.measurementId,$t),pn&&(H("set",pn),it(void 0)),_t.measurementId})).apply(this,arguments)}class Rt{constructor(x){this.app=x}_delete(){return delete Zt[this.app.options.appId],Promise.resolve()}}let Zt={},qt=[];const an={};let nt,mt,Wt="dataLayer",tt="gtag",qn=!1;function Ln(P){if(qn)throw ne.create("already-initialized");P.dataLayerName&&(Wt=P.dataLayerName),P.gtagName&&(tt=P.gtagName)}function wt(P,x,S){!function Yn(){const P=[];if((0,ee.ru)()&&P.push("This is a browser extension environment."),(0,ee.zI)()||P.push("Cookies are not available."),P.length>0){const x=P.map((N,H)=>`(${H+1}) ${N}`).join(" "),S=ne.create("invalid-analytics-context",{errorInfo:x});Ne.warn(S.message)}}();const N=P.options.appId;if(!N)throw ne.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw ne.create("no-api-key");Ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zt[N])throw ne.create("already-exists",{id:N});if(!qn){!function Je(P){let x=[];Array.isArray(window[P])?x=window[P]:window[P]=x}(Wt);const{wrappedGtag:fe,gtagCore:Le}=function xe(P,x,S,N,H){let fe=function(...Le){window[N].push(arguments)};return window[H]&&"function"==typeof window[H]&&(fe=window[H]),window[H]=function Fe(P,x,S,N){function fe(){return(fe=(0,f.Z)(function*(Le,ze,ge){try{"event"===Le?yield ct(P,x,S,ze,ge):"config"===Le?yield Ee(P,x,S,N,ze,ge):"consent"===Le?P("consent","update",ge):P("set",ze)}catch(Me){Ne.error(Me)}})).apply(this,arguments)}return function H(Le,ze,ge){return fe.apply(this,arguments)}}(fe,P,x,S),{gtagCore:fe,wrappedGtag:window[H]}}(Zt,qt,an,Wt,tt);mt=fe,nt=Le,qn=!0}return Zt[N]=function Xe(P,x,S,N,H,fe,Le){return rt.apply(this,arguments)}(P,qt,an,x,nt,Wt,S),new Rt(P)}function Jn(){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}function Cn(P,x,S){P=(0,ee.m9)(P),function At(P,x,S,N){return Zn.apply(this,arguments)}(mt,Zt[P.app.options.appId],x,S).catch(N=>Ne.error(N))}function bn(P,x,S){P=(0,ee.m9)(P),function wr(P,x,S,N){return Nr.apply(this,arguments)}(mt,Zt[P.app.options.appId],x,S).catch(N=>Ne.error(N))}function at(P,x,S){P=(0,ee.m9)(P),function Mn(P,x,S,N){return Gn.apply(this,arguments)}(mt,Zt[P.app.options.appId],x,S).catch(N=>Ne.error(N))}function Ae(P,x){P=(0,ee.m9)(P),function Ir(P,x){return xn.apply(this,arguments)}(Zt[P.app.options.appId],x).catch(S=>Ne.error(S))}function bt(P,x,S,N){P=(0,ee.m9)(P),function Dt(P,x,S,N,H){return Vt.apply(this,arguments)}(mt,Zt[P.app.options.appId],x,S,N).catch(H=>Ne.error(H))}const un="@firebase/analytics",W="0.8.4";!function $(){(0,B._registerComponent)(new Ie.wA(ue,(x,{options:S})=>wt(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,B._registerComponent)(new Ie.wA("analytics-internal",function P(x){try{const S=x.getProvider(ue).getImmediate();return{logEvent:(N,H,fe)=>bt(S,N,H,fe)}}catch(S){throw ne.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,B.registerVersion)(un,W),(0,B.registerVersion)(un,W,"esm2017")}()},3942:(Et,Re,k)=>{k.d(Re,{Z:()=>Te});var f=k(2090),B=k(4859),L=k(9681),ee=k(1877);class Ie{constructor(Ee,he){this._delegate=Ee,this.firebase=he,(0,L._addComponent)(Ee,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Ee,he=L._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(Ee);return!Ze.isInitialized()&&"EXPLICIT"===(null===(ct=Ze.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:he})}_removeServiceInstance(Ee,he=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(he)}_addComponent(Ee){(0,L._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,L._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function me(){const Je=function de(Je){const Ee={},he={__esModule:!0,initializeApp:function Fe(ne,ce={}){const we=L.initializeApp(ne,ce);if((0,f.r3)(Ee,we.name))return Ee[we.name];const X=new Je(we,he);return Ee[we.name]=X,X},app:Ze,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function be(ne){const ce=ne.name,we=ce.replace("-compat","");if(L._registerComponent(ne)&&"PUBLIC"===ne.type){const X=(Q=Ze())=>{if("function"!=typeof Q[we])throw ue.create("invalid-app-argument",{appName:ce});return Q[we]()};void 0!==ne.serviceProps&&(0,f.ZB)(X,ne.serviceProps),he[we]=X,Je.prototype[we]=function(...Q){return this._getService.bind(this,ce).apply(this,ne.multipleInstances?Q:[])}}return"PUBLIC"===ne.type?he[we]:null},removeApp:function ct(ne){delete Ee[ne]},useAsService:function qe(ne,ce){return"serverAuth"===ce?null:ce},modularAPIs:L}};function Ze(ne){if(!(0,f.r3)(Ee,ne=ne||L._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:ne});return Ee[ne]}return he.default=he,Object.defineProperty(he,"apps",{get:function xe(){return Object.keys(Ee).map(ne=>Ee[ne])}}),Ze.App=Je,he}(Ie);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function Ee(he){(0,f.ZB)(Je,he)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Je}(),z=new ee.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=G;!function Pe(Je){(0,L.registerVersion)("@firebase/app-compat","0.1.38",Je)}()},9681:(Et,Re,k)=>{k.r(Re),k.d(Re,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Ir,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>pn,_addOrOverwriteComponent:()=>Dt,_apps:()=>cn,_clearComponents:()=>wr,_components:()=>Rn,_getProvider:()=>At,_registerComponent:()=>Vt,_removeServiceInstance:()=>Zn,deleteApp:()=>it,getApp:()=>Fn,getApps:()=>pr,initializeApp:()=>xn,onLog:()=>Xe,registerVersion:()=>ke,setLogLevel:()=>rt});var f=k(5861),B=k(4859),L=k(1877),ee=k(2090),Ie=k(8766);class ve{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(dt=>{if(function ue(at){return"VERSION"===at.getComponent()?.type}(dt)){const bt=dt.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(dt=>dt).join(" ")}}const de="@firebase/app",G=new L.Yd("@firebase/app"),Ft="[DEFAULT]",Ke={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Rn=new Map;function pn(at,Ae){try{at.container.addComponent(Ae)}catch(dt){G.debug(`Component ${Ae.name} failed to register with FirebaseApp ${at.name}`,dt)}}function Dt(at,Ae){at.container.addOrOverwriteComponent(Ae)}function Vt(at){const Ae=at.name;if(Rn.has(Ae))return G.debug(`There were multiple attempts to register component ${Ae}.`),!1;Rn.set(Ae,at);for(const dt of cn.values())pn(dt,at);return!0}function At(at,Ae){const dt=at.container.getProvider("heartbeat").getImmediate({optional:!0});return dt&&dt.triggerHeartbeat(),at.container.getProvider(Ae)}function Zn(at,Ae,dt=Ft){At(at,Ae).clearInstance(dt)}function wr(){Rn.clear()}const Mn=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gn{constructor(Ae,dt,bt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},dt),this._name=dt.name,this._automaticDataCollectionEnabled=dt.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}}const Ir="9.13.0";function xn(at,Ae={}){let dt=at;"object"!=typeof Ae&&(Ae={name:Ae});const bt=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},Ae),Pt=bt.name;if("string"!=typeof Pt||!Pt)throw Mn.create("bad-app-name",{appName:String(Pt)});if(dt||(dt=(0,ee.aH)()),!dt)throw Mn.create("no-options");const un=cn.get(Pt);if(un){if((0,ee.vZ)(dt,un.options)&&(0,ee.vZ)(bt,un.config))return un;throw Mn.create("duplicate-app",{appName:Pt})}const W=new B.H0(Pt);for(const P of Rn.values())W.addComponent(P);const $=new Gn(dt,bt,W);return cn.set(Pt,$),$}function Fn(at=Ft){const Ae=cn.get(at);if(!Ae&&at===Ft)return xn();if(!Ae)throw Mn.create("no-app",{appName:at});return Ae}function pr(){return Array.from(cn.values())}function it(at){return K.apply(this,arguments)}function K(){return(K=(0,f.Z)(function*(at){const Ae=at.name;cn.has(Ae)&&(cn.delete(Ae),yield Promise.all(at.container.getProviders().map(dt=>dt.delete())),at.isDeleted=!0)})).apply(this,arguments)}function ke(at,Ae,dt){var bt;let Pt=null!==(bt=Ke[at])&&void 0!==bt?bt:at;dt&&(Pt+=`-${dt}`);const un=Pt.match(/\s|\//),W=Ae.match(/\s|\//);if(un||W){const $=[`Unable to register library "${Pt}" with version "${Ae}":`];return un&&$.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),un&&W&&$.push("and"),W&&$.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void G.warn($.join(" "))}Vt(new B.wA(`${Pt}-version`,()=>({library:Pt,version:Ae}),"VERSION"))}function Xe(at,Ae){if(null!==at&&"function"!=typeof at)throw Mn.create("invalid-log-argument");(0,L.Am)(at,Ae)}function rt(at){(0,L.Ub)(at)}const qt="firebase-heartbeat-store";let an=null;function Wt(){return an||(an=(0,Ie.X3)("firebase-heartbeat-database",1,{upgrade:(at,Ae)=>{0===Ae&&at.createObjectStore(qt)}}).catch(at=>{throw Mn.create("idb-open",{originalErrorMessage:at.message})})),an}function nt(){return(nt=(0,f.Z)(function*(at){var Ae;try{return(yield Wt()).transaction(qt).objectStore(qt).get(Ln(at))}catch(dt){if(dt instanceof ee.ZR)G.warn(dt.message);else{const bt=Mn.create("idb-get",{originalErrorMessage:null===(Ae=dt)||void 0===Ae?void 0:Ae.message});G.warn(bt.message)}}})).apply(this,arguments)}function mt(at,Ae){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(at,Ae){var dt;try{const Pt=(yield Wt()).transaction(qt,"readwrite");return yield Pt.objectStore(qt).put(Ae,Ln(at)),Pt.done}catch(bt){if(bt instanceof ee.ZR)G.warn(bt.message);else{const Pt=Mn.create("idb-set",{originalErrorMessage:null===(dt=bt)||void 0===dt?void 0:dt.message});G.warn(Pt.message)}}})).apply(this,arguments)}function Ln(at){return`${at.name}!${at.options.appId}`}class Cr{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const dt=this.container.getProvider("app").getImmediate();this._storage=new Bt(dt),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var Ae=this;return(0,f.Z)(function*(){const bt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=xt();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!Ae._heartbeatsCache.heartbeats.some(un=>un.date===Pt))return Ae._heartbeatsCache.heartbeats.push({date:Pt,agent:bt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(un=>{const W=new Date(un.date).valueOf();return Date.now()-W<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,f.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const dt=xt(),{heartbeatsToSend:bt,unsentEntries:Pt}=function Jn(at,Ae=1024){const dt=[];let bt=at.slice();for(const Pt of at){const un=dt.find(W=>W.agent===Pt.agent);if(un){if(un.dates.push(Pt.date),Cn(dt)>Ae){un.dates.pop();break}}else if(dt.push({agent:Pt.agent,dates:[Pt.date]}),Cn(dt)>Ae){dt.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:dt,unsentEntries:bt}}(Ae._heartbeatsCache.heartbeats),un=(0,ee.L)(JSON.stringify({version:2,heartbeats:bt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=dt,Pt.length>0?(Ae._heartbeatsCache.heartbeats=Pt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),un})()}}function xt(){return(new Date).toISOString().substring(0,10)}class Bt{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,f.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function tt(at){return nt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var dt=this;return(0,f.Z)(function*(){var bt;if(yield dt._canUseIndexedDBPromise){const un=yield dt.read();return mt(dt.app,{lastSentHeartbeatDate:null!==(bt=Ae.lastSentHeartbeatDate)&&void 0!==bt?bt:un.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var dt=this;return(0,f.Z)(function*(){var bt;if(yield dt._canUseIndexedDBPromise){const un=yield dt.read();return mt(dt.app,{lastSentHeartbeatDate:null!==(bt=Ae.lastSentHeartbeatDate)&&void 0!==bt?bt:un.lastSentHeartbeatDate,heartbeats:[...un.heartbeats,...Ae.heartbeats]})}})()}}function Cn(at){return(0,ee.L)(JSON.stringify({version:2,heartbeats:at})).length}!function bn(at){Vt(new B.wA("platform-logger",Ae=>new ve(Ae),"PRIVATE")),Vt(new B.wA("heartbeat",Ae=>new Cr(Ae),"PRIVATE")),ke(de,"0.8.3",at),ke(de,"0.8.3","esm2017"),ke("fire-js","")}("")},4859:(Et,Re,k)=>{k.d(Re,{H0:()=>de,wA:()=>L});var f=k(5861),B=k(2090);class L{constructor(G,z,Z){this.name=G,this.instanceFactory=z,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ee="[DEFAULT]";class Ie{constructor(G,z){this.name=G,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(z)){const Z=new B.BH;if(this.instancesDeferred.set(z,Z),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ne=this.getOrInitializeService({instanceIdentifier:z});Ne&&Z.resolve(Ne)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(G){var z;const Z=this.normalizeInstanceIdentifier(G?.identifier),Ne=null!==(z=G?.optional)&&void 0!==z&&z;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Pe){if(Ne)return null;throw Pe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ue(me){return"EAGER"===me.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[z,Z]of this.instancesDeferred.entries()){const Ne=this.normalizeInstanceIdentifier(z);try{const Pe=this.getOrInitializeService({instanceIdentifier:Ne});Z.resolve(Pe)}catch{}}}}clearInstance(G=ee){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,f.Z)(function*(){const z=Array.from(G.instances.values());yield Promise.all([...z.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...z.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ee){return this.instances.has(G)}getOptions(G=ee){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:z={}}=G,Z=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ne=this.getOrInitializeService({instanceIdentifier:Z,options:z});for(const[Pe,Te]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Pe)&&Te.resolve(Ne);return Ne}onInit(G,z){var Z;const Ne=this.normalizeInstanceIdentifier(z),Pe=null!==(Z=this.onInitCallbacks.get(Ne))&&void 0!==Z?Z:new Set;Pe.add(G),this.onInitCallbacks.set(Ne,Pe);const Te=this.instances.get(Ne);return Te&&G(Te,Ne),()=>{Pe.delete(G)}}invokeOnInitCallbacks(G,z){const Z=this.onInitCallbacks.get(z);if(Z)for(const Ne of Z)try{Ne(G,z)}catch{}}getOrInitializeService({instanceIdentifier:G,options:z={}}){let Z=this.instances.get(G);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(me=G,me===ee?void 0:me),options:z}),this.instances.set(G,Z),this.instancesOptions.set(G,z),this.invokeOnInitCallbacks(Z,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Z)}catch{}var me;return Z||null}normalizeInstanceIdentifier(G=ee){return this.component?this.component.multipleInstances?G:ee:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const z=this.getProvider(G.name);if(z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const z=new Ie(G,this);return this.providers.set(G,z),z}getProviders(){return Array.from(this.providers.values())}}},2833:(Et,Re,k)=>{var f=k(5861),B=k(9681),L=k(4859),ee=k(2090),Ie=k(8766);const ve="@firebase/installations",ue="0.5.16",me=`w:${ue}`,G="FIS_v2",Je=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ee(te){return te instanceof ee.ZR&&te.code.includes("request-failed")}function he({projectId:te}){return`https://firebaseinstallations.googleapis.com/v1/projects/${te}/installations`}function ct(te){return{token:te.token,requestStatus:2,expiresIn:ce(te.expiresIn),creationTime:Date.now()}}function Ze(te,Ce){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,f.Z)(function*(te,Ce){const Ct=(yield Ce.json()).error;return Je.create("request-failed",{requestName:te,serverCode:Ct.code,serverMessage:Ct.message,serverStatus:Ct.status})})).apply(this,arguments)}function xe({apiKey:te}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":te})}function be(te,{refreshToken:Ce}){const He=xe(te);return He.append("Authorization",function we(te){return`${G} ${te}`}(Ce)),He}function qe(te){return ne.apply(this,arguments)}function ne(){return(ne=(0,f.Z)(function*(te){const Ce=yield te();return Ce.status>=500&&Ce.status<600?te():Ce})).apply(this,arguments)}function ce(te){return Number(te.replace("s","000"))}function X(te,Ce){return Q.apply(this,arguments)}function Q(){return(Q=(0,f.Z)(function*({appConfig:te,heartbeatServiceProvider:Ce},{fid:He}){const Ct=he(te),sn=xe(te),wn=Ce.getImmediate({optional:!0});if(wn){const Ur=yield wn.getHeartbeatsHeader();Ur&&sn.append("x-firebase-client",Ur)}const jn={method:"POST",headers:sn,body:JSON.stringify({fid:He,authVersion:G,appId:te.appId,sdkVersion:me})},Vr=yield qe(()=>fetch(Ct,jn));if(Vr.ok){const Ur=yield Vr.json();return{fid:Ur.fid||He,registrationStatus:2,refreshToken:Ur.refreshToken,authToken:ct(Ur.authToken)}}throw yield Ze("Create Installation",Vr)})).apply(this,arguments)}function le(te){return new Promise(Ce=>{setTimeout(Ce,te)})}const Be=/^[cdef][\w-]{21}$/;function pt(){try{const te=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(te),te[0]=112+te[0]%16;const He=function nn(te){return function ae(te){return btoa(String.fromCharCode(...te)).replace(/\+/g,"-").replace(/\//g,"_")}(te).substr(0,22)}(te);return Be.test(He)?He:""}catch{return""}}function Ft(te){return`${te.appName}!${te.appId}`}const Ke=new Map;function cn(te,Ce){const He=Ft(te);Dt(He,Ce),function Vt(te,Ce){const He=function Zn(){return!At&&"BroadcastChannel"in self&&(At=new BroadcastChannel("[Firebase] FID Change"),At.onmessage=te=>{Dt(te.data.key,te.data.fid)}),At}();He&&He.postMessage({key:te,fid:Ce}),function wr(){0===Ke.size&&At&&(At.close(),At=null)}()}(He,Ce)}function Dt(te,Ce){const He=Ke.get(te);if(He)for(const Ct of He)Ct(Ce)}let At=null;const Gn="firebase-installations-store";let Ir=null;function xn(){return Ir||(Ir=(0,Ie.X3)("firebase-installations-database",1,{upgrade:(te,Ce)=>{0===Ce&&te.createObjectStore(Gn)}})),Ir}function Fn(te,Ce){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(te,Ce){const He=Ft(te),sn=(yield xn()).transaction(Gn,"readwrite"),wn=sn.objectStore(Gn),Vn=yield wn.get(He);return yield wn.put(Ce,He),yield sn.done,(!Vn||Vn.fid!==Ce.fid)&&cn(te,Ce.fid),Ce})).apply(this,arguments)}function it(te){return K.apply(this,arguments)}function K(){return(K=(0,f.Z)(function*(te){const Ce=Ft(te),Ct=(yield xn()).transaction(Gn,"readwrite");yield Ct.objectStore(Gn).delete(Ce),yield Ct.done})).apply(this,arguments)}function ke(te,Ce){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,f.Z)(function*(te,Ce){const He=Ft(te),sn=(yield xn()).transaction(Gn,"readwrite"),wn=sn.objectStore(Gn),Vn=yield wn.get(He),jn=Ce(Vn);return void 0===jn?yield wn.delete(He):yield wn.put(jn,He),yield sn.done,jn&&(!Vn||Vn.fid!==jn.fid)&&cn(te,jn.fid),jn})).apply(this,arguments)}function rt(te){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,f.Z)(function*(te){let Ce;const He=yield ke(te.appConfig,Ct=>{const sn=Zt(Ct),wn=qt(te,sn);return Ce=wn.registrationPromise,wn.installationEntry});return""===He.fid?{installationEntry:yield Ce}:{installationEntry:He,registrationPromise:Ce}})).apply(this,arguments)}function Zt(te){return qn(te||{fid:pt(),registrationStatus:0})}function qt(te,Ce){if(0===Ce.registrationStatus){if(!navigator.onLine)return{installationEntry:Ce,registrationPromise:Promise.reject(Je.create("app-offline"))};const He={fid:Ce.fid,registrationStatus:1,registrationTime:Date.now()},Ct=function an(te,Ce){return Wt.apply(this,arguments)}(te,He);return{installationEntry:He,registrationPromise:Ct}}return 1===Ce.registrationStatus?{installationEntry:Ce,registrationPromise:tt(te)}:{installationEntry:Ce}}function Wt(){return(Wt=(0,f.Z)(function*(te,Ce){try{const He=yield X(te,Ce);return Fn(te.appConfig,He)}catch(He){throw Ee(He)&&409===He.customData.serverCode?yield it(te.appConfig):yield Fn(te.appConfig,{fid:Ce.fid,registrationStatus:0}),He}})).apply(this,arguments)}function tt(te){return nt.apply(this,arguments)}function nt(){return(nt=(0,f.Z)(function*(te){let Ce=yield mt(te.appConfig);for(;1===Ce.registrationStatus;)yield le(100),Ce=yield mt(te.appConfig);if(0===Ce.registrationStatus){const{installationEntry:He,registrationPromise:Ct}=yield rt(te);return Ct||He}return Ce})).apply(this,arguments)}function mt(te){return ke(te,Ce=>{if(!Ce)throw Je.create("installation-not-found");return qn(Ce)})}function qn(te){return function Ln(te){return 1===te.registrationStatus&&te.registrationTime+1e4<Date.now()}(te)?{fid:te.fid,registrationStatus:0}:te}function Yn(te,Ce){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*({appConfig:te,heartbeatServiceProvider:Ce},He){const Ct=Cr(te,He),sn=be(te,He),wn=Ce.getImmediate({optional:!0});if(wn){const Ur=yield wn.getHeartbeatsHeader();Ur&&sn.append("x-firebase-client",Ur)}const jn={method:"POST",headers:sn,body:JSON.stringify({installation:{sdkVersion:me,appId:te.appId}})},Vr=yield qe(()=>fetch(Ct,jn));if(Vr.ok)return ct(yield Vr.json());throw yield Ze("Generate Auth Token",Vr)})).apply(this,arguments)}function Cr(te,{fid:Ce}){return`${he(te)}/${Ce}/authTokens:generate`}function xt(te){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(te,Ce=!1){let He;const Ct=yield ke(te.appConfig,wn=>{if(!dt(wn))throw Je.create("not-registered");const Vn=wn.authToken;if(!Ce&&bt(Vn))return wn;if(1===Vn.requestStatus)return He=Bt(te,Ce),wn;{if(!navigator.onLine)throw Je.create("app-offline");const jn=un(wn);return He=at(te,jn),jn}});return He?yield He:Ct.authToken})).apply(this,arguments)}function Bt(te,Ce){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(te,Ce){let He=yield bn(te.appConfig);for(;1===He.authToken.requestStatus;)yield le(100),He=yield bn(te.appConfig);const Ct=He.authToken;return 0===Ct.requestStatus?xt(te,Ce):Ct})).apply(this,arguments)}function bn(te){return ke(te,Ce=>{if(!dt(Ce))throw Je.create("not-registered");return function W(te){return 1===te.requestStatus&&te.requestTime+1e4<Date.now()}(Ce.authToken)?Object.assign(Object.assign({},Ce),{authToken:{requestStatus:0}}):Ce})}function at(te,Ce){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(te,Ce){try{const He=yield Yn(te,Ce),Ct=Object.assign(Object.assign({},Ce),{authToken:He});return yield Fn(te.appConfig,Ct),He}catch(He){if(!Ee(He)||401!==He.customData.serverCode&&404!==He.customData.serverCode){const Ct=Object.assign(Object.assign({},Ce),{authToken:{requestStatus:0}});yield Fn(te.appConfig,Ct)}else yield it(te.appConfig);throw He}})).apply(this,arguments)}function dt(te){return void 0!==te&&2===te.registrationStatus}function bt(te){return 2===te.requestStatus&&!function Pt(te){const Ce=Date.now();return Ce<te.creationTime||te.creationTime+te.expiresIn<Ce+36e5}(te)}function un(te){const Ce={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},te),{authToken:Ce})}function P(){return(P=(0,f.Z)(function*(te){const Ce=te,{installationEntry:He,registrationPromise:Ct}=yield rt(Ce);return Ct?Ct.catch(console.error):xt(Ce).catch(console.error),He.fid})).apply(this,arguments)}function S(){return(S=(0,f.Z)(function*(te,Ce=!1){const He=te;return yield N(He),(yield xt(He,Ce)).token})).apply(this,arguments)}function N(te){return H.apply(this,arguments)}function H(){return(H=(0,f.Z)(function*(te){const{registrationPromise:Ce}=yield rt(te);Ce&&(yield Ce)})).apply(this,arguments)}function rn(te){return Je.create("missing-app-config-values",{valueName:te})}const qr="installations",oo=te=>{const Ce=te.getProvider("app").getImmediate(),He=function $t(te){if(!te||!te.options)throw rn("App Configuration");if(!te.name)throw rn("App Name");const Ce=["projectId","apiKey","appId"];for(const He of Ce)if(!te.options[He])throw rn(He);return{appName:te.name,projectId:te.options.projectId,apiKey:te.options.apiKey,appId:te.options.appId}}(Ce);return{app:Ce,appConfig:He,heartbeatServiceProvider:(0,B._getProvider)(Ce,"heartbeat"),_delete:()=>Promise.resolve()}},Os=te=>{const Ce=te.getProvider("app").getImmediate(),He=(0,B._getProvider)(Ce,qr).getImmediate();return{getId:()=>function $(te){return P.apply(this,arguments)}(He),getToken:sn=>function x(te){return S.apply(this,arguments)}(He,sn)}};(function Mt(){(0,B._registerComponent)(new L.wA(qr,oo,"PUBLIC")),(0,B._registerComponent)(new L.wA("installations-internal",Os,"PRIVATE"))})(),(0,B.registerVersion)(ve,ue),(0,B.registerVersion)(ve,ue,"esm2017")},1877:(Et,Re,k)=>{k.d(Re,{Am:()=>me,Ub:()=>de,Yd:()=>ue,in:()=>B});const f=[];var B=(()=>{return(G=B||(B={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",B;var G})();const L={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ee=B.INFO,Ie={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ve=(G,z,...Z)=>{if(z<G.logLevel)return;const Ne=(new Date).toISOString(),Pe=Ie[z];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Pe](`[${Ne}]  ${G.name}:`,...Z)};class ue{constructor(z){this.name=z,this._logLevel=ee,this._logHandler=ve,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in B))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?L[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...z),this._logHandler(this,B.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...z),this._logHandler(this,B.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,B.INFO,...z),this._logHandler(this,B.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,B.WARN,...z),this._logHandler(this,B.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...z),this._logHandler(this,B.ERROR,...z)}}function de(G){f.forEach(z=>{z.setLogLevel(G)})}function me(G,z){for(const Z of f){let Ne=null;z&&z.level&&(Ne=L[z.level]),Z.userLogHandler=null===G?null:(Pe,Te,...Je)=>{const Ee=Je.map(he=>{if(null==he)return null;if("string"==typeof he)return he;if("number"==typeof he||"boolean"==typeof he)return he.toString();if(he instanceof Error)return he.message;try{return JSON.stringify(he)}catch{return null}}).filter(he=>he).join(" ");Te>=(Ne??Pe.logLevel)&&G({level:B[Te].toLowerCase(),message:Ee,args:Je,type:Pe.name})}}}},8766:(Et,Re,k)=>{k.d(Re,{Lj:()=>Fe,X3:()=>Ze});var f=k(5861);let L,ee;const ue=new WeakMap,de=new WeakMap,me=new WeakMap,G=new WeakMap,z=new WeakMap;let Pe={get(ce,we,X){if(ce instanceof IDBTransaction){if("done"===we)return de.get(ce);if("objectStoreNames"===we)return ce.objectStoreNames||me.get(ce);if("store"===we)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return he(ce[we])},set:(ce,we,X)=>(ce[we]=X,!0),has:(ce,we)=>ce instanceof IDBTransaction&&("done"===we||"store"===we)||we in ce};function Ee(ce){return"function"==typeof ce?function Je(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...we){return ce.apply(ct(this),we),he(ue.get(this))}:function(...we){return he(ce.apply(ct(this),we))}:function(we,...X){const Q=ce.call(ct(this),we,...X);return me.set(Q,we.sort?we.sort():[we]),he(Q)}}(ce):(ce instanceof IDBTransaction&&function Ne(ce){if(de.has(ce))return;const we=new Promise((X,Q)=>{const le=()=>{ce.removeEventListener("complete",ae),ce.removeEventListener("error",Be),ce.removeEventListener("abort",Be)},ae=()=>{X(),le()},Be=()=>{Q(ce.error||new DOMException("AbortError","AbortError")),le()};ce.addEventListener("complete",ae),ce.addEventListener("error",Be),ce.addEventListener("abort",Be)});de.set(ce,we)}(ce),((ce,we)=>we.some(X=>ce instanceof X))(ce,function Ie(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Pe):ce)}function he(ce){if(ce instanceof IDBRequest)return function Z(ce){const we=new Promise((X,Q)=>{const le=()=>{ce.removeEventListener("success",ae),ce.removeEventListener("error",Be)},ae=()=>{X(he(ce.result)),le()},Be=()=>{Q(ce.error),le()};ce.addEventListener("success",ae),ce.addEventListener("error",Be)});return we.then(X=>{X instanceof IDBCursor&&ue.set(X,ce)}).catch(()=>{}),z.set(we,ce),we}(ce);if(G.has(ce))return G.get(ce);const we=Ee(ce);return we!==ce&&(G.set(ce,we),z.set(we,ce)),we}const ct=ce=>z.get(ce);function Ze(ce,we,{blocked:X,upgrade:Q,blocking:le,terminated:ae}={}){const Be=indexedDB.open(ce,we),$e=he(Be);return Q&&Be.addEventListener("upgradeneeded",pt=>{Q(he(Be.result),pt.oldVersion,pt.newVersion,he(Be.transaction))}),X&&Be.addEventListener("blocked",()=>X()),$e.then(pt=>{ae&&pt.addEventListener("close",()=>ae()),le&&pt.addEventListener("versionchange",()=>le())}).catch(()=>{}),$e}function Fe(ce,{blocked:we}={}){const X=indexedDB.deleteDatabase(ce);return we&&X.addEventListener("blocked",()=>we()),he(X).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],qe=new Map;function ne(ce,we){if(!(ce instanceof IDBDatabase)||we in ce||"string"!=typeof we)return;if(qe.get(we))return qe.get(we);const X=we.replace(/FromIndex$/,""),Q=we!==X,le=be.includes(X);if(!(X in(Q?IDBIndex:IDBObjectStore).prototype)||!le&&!xe.includes(X))return;const ae=function(){var Be=(0,f.Z)(function*($e,...pt){const nn=this.transaction($e,le?"readwrite":"readonly");let Ft=nn.store;return Q&&(Ft=Ft.index(pt.shift())),(yield Promise.all([Ft[X](...pt),le&&nn.done]))[0]});return function(pt){return Be.apply(this,arguments)}}();return qe.set(we,ae),ae}!function Te(ce){Pe=ce(Pe)}(ce=>({...ce,get:(we,X,Q)=>ne(we,X)||ce.get(we,X,Q),has:(we,X)=>!!ne(we,X)||ce.has(we,X)}))},5861:(Et,Re,k)=>{function f(L,ee,Ie,ve,ue,de,me){try{var G=L[de](me),z=G.value}catch(Z){return void Ie(Z)}G.done?ee(z):Promise.resolve(z).then(ve,ue)}function B(L){return function(){var ee=this,Ie=arguments;return new Promise(function(ve,ue){var de=L.apply(ee,Ie);function me(z){f(de,ve,ue,me,G,"next",z)}function G(z){f(de,ve,ue,me,G,"throw",z)}me(void 0)})}}k.d(Re,{Z:()=>B})}},Et=>{Et(Et.s=5223)}]);